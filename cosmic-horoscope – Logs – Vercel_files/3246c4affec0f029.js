;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="66caaf9b-1ccd-e541-5757-6ff2e6cd5e2f")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,4147070,e=>{"use strict";var t=e.i(1176592),i=e.i(287495);function r(e){let{loading:r,resolvedTheme:a}=function(){let e=(0,i.default)(),[r,a]=(0,t.useState)(!1);return(0,t.useEffect)(()=>a(!0),[]),{loading:!r,resolvedTheme:e?"light":"dark"}}();return r?e.logo:"dark"===a&&e.darkModeLogo?e.darkModeLogo:e.logo}e.s(["useFrameworkLogo",()=>r])},7175084,e=>{e.v({frameworkIconGroup:"index-module__Cg7LzG__frameworkIconGroup",numProjects:"index-module__Cg7LzG__numProjects"})},6509836,e=>{"use strict";var t=e.i(8711407),i=e.i(1176592),r=e.i(5255926),a=e.i(4585051),s=e.i(5614970),n=e.i(4147070),o=e.i(7175084);function l(e){let{projects:i,error:a,gitType:n}=e,l=(i?.length??0)>1?11:24;return a?(0,t.jsx)("div",{className:o.default.frameworkIconGroup,children:(0,t.jsx)(s.default,{gitType:n,height:24,width:24})}):i?(0,t.jsx)("div",{className:o.default.frameworkIconGroup,children:i.length<5?i.map(e=>e.framework.logo?(0,t.jsx)(u,{framework:e.framework,size:l},e.name):null):(0,t.jsx)("div",{className:o.default.numProjects,children:i.length<9?i.length:"9+"})}):(0,t.jsx)("div",{className:o.default.frameworkIconGroup,children:(0,t.jsx)(r.Skeleton,{height:24,rounded:!0,width:24})})}let u=(0,i.memo)(function(e){let{framework:i,size:r,style:s,className:o}=e,l=(0,n.useFrameworkLogo)({logo:i.logo,darkModeLogo:i.darkModeLogo});return(0,t.jsx)(a.Avatar,{className:o,size:r,style:s,title:i.name,url:l})});e.s(["FrameworkIcon",0,u,"FrameworkIconGroup",()=>l])},7045101,e=>{"use strict";var t=e.i(901210),i=e.i(8042625),r=e.i(277234),a=e.i(4244280),s=e.i(5140444);function n(e){let{user:n}=(0,s.useUser)(),{data:o,isLoading:l,isValidating:u,mutate:c,error:d}=(0,t.default)(()=>n&&!n.limited&&e?`${a.API_INTEGRATION_CONTROLLER_V3}/detect-eligible-projects${(0,i.encode)({url:e})}`:null,e=>(0,r.fetchAPI)(e,{throwOnHTTPError:!0}));return{data:o,error:d,isValidating:u,isLoading:l,mutate:e=>c(e)}}e.s(["useDetectEligibleProjects",()=>n])},1348804,2071958,7357255,e=>{"use strict";var t=e.i(9070994),i=e.i(4244280);async function r(e){let r=await (0,t.default)(`${i.API_REGISTRATION}/github-token`,{throwOnHTTPError:!0});return r.verified?e.github={...r,verified:!0}:e.github={},e}e.s(["withGitHubData",()=>r],1348804);var a=e.i(8042625);async function s(e){let{user:r,team:s}=e,n=s||r,o={};s&&(o.teamId=s.id);let l=`${i.API_INTEGRATION_CONTROLLER}/gitlab/verify${(0,a.encode)(o)}`,u=await (0,t.default)(l);return n.gitlab={...u,connected:u.verified&&!u.disconnected},n}async function n(e){let{user:r,team:s}=e,n=s||r,o={};s&&(o.teamId=s.id);let l=`${i.API_INTEGRATION_CONTROLLER}/bitbucket/verify${(0,a.encode)(o)}`,u=await (0,t.default)(l);return n.bitbucket={...u,connected:u.verified&&!u.disconnected},n}e.s(["withGitLabData",()=>s],2071958),e.s(["withBitbucketData",()=>n],7357255)},4586231,e=>{"use strict";var t=e.i(1176592),i=e.i(7909933),r=e.i(8042625),a=e.i(9070994),s=e.i(4244280);async function n(e){let{user:t,team:i}=e,n=i||t,o={};i&&(o.teamId=i.id);let l=`${s.API_INTEGRATION_CONTROLLER}/google/verify${(0,r.encode)(o)}`,u=await (0,a.default)(l);return n.google={...u,login:u.email,createdAt:u.createdAt},n}async function o(e){let{user:t,team:i}=e,n=i||t,o={};i&&(o.teamId=i.id);let l=`${s.API_INTEGRATION_CONTROLLER}/apple/verify${(0,r.encode)(o)}`;try{let e=await (0,a.default)(l);n.apple={...e,login:e.email,createdAt:e.createdAt}}catch{}return n}var l=e.i(1348804),u=e.i(2071958),c=e.i(7357255);async function d(e){let{account:t,customHost:i}=e;if(!i)return t;let n=await (0,a.default)(`${s.API_REGISTRATION}/github-custom-host/token${(0,r.encode)({host:i})}`,{throwOnHTTPError:!0});return n.verified?t["github-custom-host"]={...n,verified:!0}:t["github-custom-host"]={},t}async function h(e){let t=await (0,a.default)(`${s.API_REGISTRATION}/github-limited`,{throwOnHTTPError:!0});return t.verified?e["github-limited"]={...t,verified:!0}:e["github-limited"]={},e}function p(e){let{account:r,opts:a,type:s="both",customHost:p}=e,f=(0,t.useRef)(null);f.current=r;let{data:m,mutate:g,isLoading:x}=(0,i.default)(()=>`integration-data-${s}-${f.current?.uid||""}-${p??""}`,async()=>{if(void 0===f.current)return;let e=JSON.parse(JSON.stringify(f.current));switch(s){case"google":await n({user:e});break;case"apple":await o({user:e});break;case"github":await (0,l.withGitHubData)(e);break;case"github-limited":await h(e);break;case"gitlab":await (0,u.withGitLabData)({user:e});break;case"bitbucket":await (0,c.withBitbucketData)({user:e});break;case"github-custom-host":await d({account:e,customHost:p});break;case"github-gitlab-bitbucket":await Promise.all([(0,l.withGitHubData)(e),(0,c.withBitbucketData)({user:e}),(0,u.withGitLabData)({user:e})]);break;default:await Promise.all([n({user:e}),o({user:e}),(0,l.withGitHubData)(e),h(e),(0,c.withBitbucketData)({user:e}),(0,u.withGitLabData)({user:e}),d({account:e,customHost:p})])}return e},a);return{account:m,isLoading:x,mutate:g}}e.s(["default",()=>p],4586231)},5614970,e=>{"use strict";var t=e.i(8711407),i=e.i(3959677),r=e.i(5371931),a=e.i(9222994);function s(e){let{gitType:s,...n}=e;switch(s){case"github":case"github-custom-host":case"ghes":return(0,t.jsx)(i.default,{...n});case"github-limited":return(0,t.jsx)(i.default,{...n,fill:"red"});case"gitlab":return(0,t.jsx)(r.default,{...n});case"bitbucket":return(0,t.jsx)(a.default,{...n});default:throw Error(`gitType ${s} not defined in GitLogo`)}}e.s(["default",()=>s])},7628870,e=>{"use strict";function t(e){return"github"===e||"gitlab"===e||"bitbucket"===e||"github-limited"===e}e.s(["ORIGINS",0,{github:"GitHub","github-limited":"GitHub (Limited)",gitlab:"GitLab",bitbucket:"Bitbucket",saml:"SAML",google:"Google",apple:"Apple","github-custom-host":"GitHub",email:"Email",otp:"One-Time Password","otp-link":"One-Time Password",passkey:"Passkey",unknown:"Unknown",manual:"Manual"},"isGitOrigin",()=>t])},2160483,e=>{"use strict";var t=e.i(7909933),i=e.i(2111701),r=e.i(8042625),a=e.i(277234),s=e.i(4244280),n=e.i(818351),o=e.i(2686817);function l(e,i){let{provider:r,host:s}=e;return(0,t.default)(()=>r?c({provider:r,host:s}):"",e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0}),i)}function u(e,t){let{provider:i,host:r}=e;return(0,n.useIsomorphicSWR)((0,o.swrRequest)(i?c({provider:i,host:r}):""),{revalidateOnMount:!0,ssr:{timeout:1e4},...t})}function c(e){let{provider:t,host:i}=e;return`${s.API_INTEGRATION_CONTROLLER}/git-namespaces${(0,r.encode)({provider:t,host:i})}`}async function d(e,t){let r=c({provider:e,host:t});return(0,i.mutate)(r,(0,a.fetchAPI)(r,{throwOnHTTPError:!0}),!1)}e.s(["default",()=>l,"mutateGitNamespaces",()=>d,"useIsomorphicGitNamspaces",()=>u])},5591369,e=>{"use strict";var t=e.i(7909933),i=e.i(8042625),r=e.i(277234),a=e.i(4244280),s=e.i(818351),n=e.i(2686817);function o(e,i){let{requireReauth:a,...s}=e;return(0,t.default)(()=>a?null:u(s),e=>(0,r.fetchAPI)(e,{throwOnHTTPError:!1}),i)}function l(e,t){return(0,s.useIsomorphicSWR)((0,n.swrRequest)(u(e)),{revalidateOnMount:!0,ssr:{timeout:1e4},...t})}function u(e){let{provider:t,host:r,query:s,namespaceId:n,s:o}=e;return`${a.API_INTEGRATION_CONTROLLER}/search-repo${(0,i.encode)({provider:t,host:r,query:s,namespaceId:n,s:o})}`}e.s(["useIsomorphicRepoSearch",()=>l,"useRepoSearch",()=>o])},3264803,e=>{e.v({box:"saml-indication-module__Lb3mXG__box",icon:"saml-indication-module__Lb3mXG__icon",small:"saml-indication-module__Lb3mXG__small"})},1565534,e=>{"use strict";var t=e.i(8711407),i=e.i(9722978),r=e.i(4345845),a=e.i(2504781),s=e.i(9318197),n=e.i(1875382),o=e.i(6228447),l=e.i(5140444),u=e.i(5338940),c=e.i(3264803);function d(e){let{small:d}=e,{user:h}=(0,l.useUser)(),{team:p}=(0,u.useTeam)(),f=(0,n.useRouter)(),m=()=>(0,o.requireAuthentication)({slug:h?.username,push:e=>f.push(e)});return d?(0,t.jsxs)("div",{className:(0,i.clsx)("flex flex-row items-center justify-start flex-initial",c.default.box,{[c.default.small]:d}),children:[(0,t.jsx)("div",{className:`flex flex-col items-stretch justify-start ${c.default.icon}`,style:{flex:"0 0 auto"},children:(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start flex-initial",children:[(0,t.jsx)(r.GitBranch,{}),(0,t.jsx)(s.Spacer,{x:.5})]})}),(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-initial",children:(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"To access your Git Login Connections, please authenticate with your Personal Vercel Account."})}),(0,t.jsx)(s.Spacer,{x:.5}),(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start",style:{flex:"0 0 auto"},children:(0,t.jsx)(a.Button,{onClick:m,typeName:"button",children:"Authenticate"})})]}):(0,t.jsxs)("div",{className:(0,i.clsx)("flex flex-col items-center justify-center gap-7 flex-initial",c.default.box),children:[(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-initial",children:(0,t.jsx)("p",{className:"text-copy-14 text-gray-900 text-center",children:"To access your Git Login Connections, please authenticate with your Personal Vercel Account."})}),(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-initial",children:(0,t.jsxs)("p",{className:"text-copy-14 text-gray-900 text-center",children:["At the moment, your SAML session only grants you access to"," ",p?`the ${p.name||p.slug} team`:"your current team","."]})}),(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start",style:{flex:"0 0 auto"},children:(0,t.jsx)(a.Button,{onClick:m,typeName:"button",children:"Authenticate"})})]})}e.s(["default",()=>d])},1792778,e=>{"use strict";var t=e.i(8711407),i=e.i(1176592),r=e.i(3225905),a=e.i(5614970);let s={github:{normal:{foreground:"#fff",background:"#24292e",border:"#24292e"},hover:{foreground:"#fff",background:"#555",border:"#555"}},"github-limited":{normal:{foreground:"#fff",background:"#24292e",border:"#24292e"},hover:{foreground:"#fff",background:"#555",border:"#555"}},gitlab:{normal:{foreground:"#fff",background:"#6b4fbb",border:"#6b4fbb"},hover:{foreground:"#fff",background:"#8367D3",border:"#8367D3"}},bitbucket:{normal:{foreground:"#fff",background:"#0052CC",border:"#0052CC"},hover:{foreground:"#fff",background:"#1668E2",border:"#1668E2"}}},n={github:{fill:"currentColor"},"github-limited":{fill:"red"},gitlab:{monochrome:!0},bitbucket:{color:"currentColor"}};function o(e){let{gitType:o,children:l,...u}=e,c=(0,i.useMemo)(()=>s[o],[o]),d=(0,i.useMemo)(()=>n[o],[o]);return(0,t.jsx)(r.CustomButton,{...c,...u,children:(0,t.jsxs)("span",{style:{display:"flex"},children:[(0,t.jsx)(a.default,{gitType:o,height:20,style:{marginRight:"var(--geist-gap-quarter)",transform:"translateY(-1px)"},width:20,...d}),l]})})}e.s(["default",()=>o])},7249340,e=>{"use strict";var t=e.i(1176592),i=e.i(455575),r=e.i(8042625),a=e.i(4244280),s=e.i(4418317),n=e.i(7628870);function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=(0,t.useRef)(null),l=(0,i.useToasts)(),u=(0,t.useRef)(e);return u.current=e,{open:(0,t.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(o.current)return void o.current.open();let i=`${window.location.origin}/new/git/connected`,c=(0,r.encode)({mode:"connect",next:i,...t}),d="saml"===e?`${a.API_SSO}${c}`:`${a.API_REGISTRATION}${"github"===e?"/login-with-github":`/${e}/connect`}${c}`,h=u.current;o.current=new s.default({id:`connection:${e}:${Math.random().toString(36).slice(2)}`,url:d,callbacks:{onBlocked:()=>{o.current=null,l.error(`The popup to connect ${n.ORIGINS[e]} could not be opened.`),h.onBlocked?.()},onPoll:t=>{t.location.origin+t.location.pathname===i&&(o.current?.close(),h.onSuccess?.(e))},onClose:()=>{o.current=null,h.onClose?.()},onAbort:()=>{o.current=null,h.onAbort?.()},onOpen:()=>h.onOpen?.(e)}}),await o.current.open()},[l])}}e.s(["useConnectPopup",()=>o])},8210056,e=>{"use strict";var t=e.i(1176592),i=e.i(4244280),r=e.i(4418317);function a(){let{onSuccess:e,provider:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{provider:"github"},s=(0,t.useRef)(null);return{open:(0,t.useCallback)(()=>{var t;if(s.current)return void s.current.open();let n=(t=JSON.stringify({from:"/new",next:`${window.location.origin}/github/installed`}),window.btoa(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")),o="github-limited"===a?i.GITHUB_APP_LIMTED_INSTALLATION_URL:i.GITHUB_APP_INSTALLATION_URL;s.current=new r.default({id:`add-github-installation:${Math.random().toString(36).slice(2)}`,url:`${o}?state=${encodeURIComponent(n)}`,callbacks:{onBlocked:()=>{s.current=null},onPoll:t=>{let i=new URL(t.location.href);i.origin===window.location.origin&&"/github/installed"===i.pathname&&(s.current?.close(),e?.({installationId:Number(i.searchParams.get("installationId"))}))},onClose:()=>{s.current=null},onAbort:()=>{s.current=null}}}),s.current.open()},[a,e])}}e.s(["default",()=>a])},4093282,e=>{e.v({continueWithText:"index-module__gQ5Ota__continueWithText",emptyResult:"index-module__gQ5Ota__emptyResult",entityName:"index-module__gQ5Ota__entityName",entityStack:"index-module__gQ5Ota__entityStack",gitPill:"index-module__gQ5Ota__gitPill",loadingResult:"index-module__gQ5Ota__loadingResult",providerBtn:"index-module__gQ5Ota__providerBtn",providerBtnMobile:"index-module__gQ5Ota__providerBtnMobile",repoDescription:"index-module__gQ5Ota__repoDescription",repoList:"index-module__gQ5Ota__repoList",repoTitle:"index-module__gQ5Ota__repoTitle",selectProvider:"index-module__gQ5Ota__selectProvider",small:"index-module__gQ5Ota__small",suggestionBox:"index-module__gQ5Ota__suggestionBox",suggestionDescription:"index-module__gQ5Ota__suggestionDescription",suggestionHighlight:"index-module__gQ5Ota__suggestionHighlight",suggestionList:"index-module__gQ5Ota__suggestionList",suggestionListBorder:"index-module__gQ5Ota__suggestionListBorder",turborepoBadgeContainer:"index-module__gQ5Ota__turborepoBadgeContainer",turborepoLogoContainer:"index-module__gQ5Ota__turborepoLogoContainer"})},7591419,2867523,e=>{"use strict";var t,i=e.i(8711407),r=e.i(1176592),a=e.i(9722978),s=e.i(6198010),n=e.i(9550268),o=e.i(6881349),l=e.i(5255926),u=e.i(9318197),c=e.i(57106),d=e.i(4004502),h=e.i(277234),p=e.i(4244280),f=e.i(5140444),m=e.i(5338940),g=e.i(4597921),x=e.i(4450569),b=e.i(8835183),y=e.i(5614970),j=e.i(1792778),v=e.i(1565534),_=e.i(7628870),w=e.i(7249340),N=e.i(8210056),I=e.i(5591369),S=e.i(4586231),T=e.i(2160483),A=e.i(4093282),k=e.i(94257),G=e.i(5756088),C=e.i(8735244),R=e.i(3306538),L=e.i(7218483),E=e.i(5819220),O=e.i(979715),P=e.i(4712634),B=e.i(7045101),M=e.i(4147070),$=e.i(6509836);function D(e){let{framework:t}=e,r=(0,M.useFrameworkLogo)({logo:t.logo,darkModeLogo:t.darkModeLogo});return(0,i.jsx)(k.default,{alt:"Framework logo",height:20,src:r,width:20})}function H(e){let{repo:t,gitType:s,search:n,renderButton:o,repoSkeletonWidthPercentage:u=100,currentNamespace:c}=e,{data:h,error:p,isLoading:f}=(0,B.useDetectEligibleProjects)(t?.url),g=(0,L.useAgo)(t?.updatedAt),x=(0,r.useMemo)(()=>t?n?t.name.split(n).reduce((e,t,r)=>(0!==r&&e.push((0,i.jsx)("mark",{className:A.default.suggestionHighlight,children:n},e.length)),t&&e.push((0,i.jsx)("span",{children:t},e.length)),e),[]):[(0,i.jsx)("span",{children:t.name},t.id)]:null,[t,n]),b=!t||f,{team:y}=(0,m.useTeam)(),j=y?`${y.slug}/`:"",v=(0,r.useMemo)(()=>o(t,s,j,c,h?.projects[0],h?.projects.length,!y||y.billing?.plan==="hobby"),[t,s,j,h]);return(0,i.jsx)(E.Entity,{actions:(0,i.jsx)("div",{className:"flex flex-row items-stretch justify-start flex-initial",children:v}),"data-testid":(0,d.tid)("import-flow-layout","suggestion-card","suggestion"),placeholder:b,thumbnail:(0,i.jsx)(P.EntityThumbnail,{size:24,children:f?(0,i.jsx)(C.Spinner,{size:24}):(0,i.jsx)($.FrameworkIconGroup,{error:p,gitType:s,projects:h?.projects})}),children:(0,i.jsx)(O.EntityField,{children:t?(0,i.jsxs)("div",{className:(0,a.clsx)("flex flex-row items-center justify-start gap-1 flex-initial",A.default.entityStack),children:[(0,i.jsx)("div",{className:(0,a.clsx)("flex flex-col items-stretch justify-start",A.default.entityName),style:{flex:"0 1 auto"},children:(0,i.jsx)("span",{className:(0,a.clsx)(A.default.repoTitle,"geist-ellipsis"),title:t.name,children:x})}),h?.monorepoManager?.slug==="turbo"?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:A.default.turborepoBadgeContainer,children:(0,i.jsx)(R.Badge,{variant:"turbo",children:"Turbo"})}),(0,i.jsx)("div",{className:A.default.turborepoLogoContainer,children:(0,i.jsx)(D,{framework:h.monorepoManager})})]}):null,t?.private?(0,i.jsx)("span",{title:"Private Git Repository",className:"flex flex-col items-stretch justify-start",style:{flex:"0 0 auto"},children:(0,i.jsx)(G.LockClosed,{color:"gray-700"})}):null,(0,i.jsx)("div",{className:"flex flex-col items-stretch justify-start geist-hide-on-mobile",style:{flex:"0 0 auto"},children:(0,i.jsx)("span",{className:A.default.repoDescription,children:"·"})}),(0,i.jsx)("div",{className:"flex flex-col items-stretch justify-start geist-hide-on-mobile",style:{flex:"0 0 auto"},children:(0,i.jsx)("span",{className:A.default.repoDescription,children:g})})]}):(0,i.jsx)(l.Skeleton,{height:20,width:`${u}%`})})})}var U=e.i(2504781),F=e.i(4030453),q=e.i(3500331),Q=e.i(6891161);async function z(e){let t=`/v1/integrations/github-does-ghes-app-exist?host=${e}`;return(await (0,h.fetchAPI)(t,{throwOnHTTPError:!0})).exists}var V=((t=V||{}).Default="Default",t.NeedsInstallation="NeedsInstallation",t);function W(e){let{teamSlug:t,webhookUrl:a,open:s,onClose:n,onSetHostname:o,flowKind:l}=e,u=(0,r.useRef)(null),[c,d]=(0,r.useState)(""),[h,p]=(0,r.useState)(""),[f,m]=(0,r.useState)(!1),[g,x]=(0,r.useState)(""),[b,y]=(0,r.useState)("Default"),j={name:"Vercel",url:"https://vercel.com/github",redirect_url:(e=>{let{domain:t,organization:i,teamSlug:r,flowKind:a}=e;try{let e=new URL(t).host,s=new URL("https://vercel.com/api/v1/integrations/github-create-ghes-callback");return s.searchParams.set("host",e),s.searchParams.set("organization",i),s.searchParams.set("team",r),a&&s.searchParams.set("flowKind",a),s.toString()}catch{return""}})({domain:c,organization:h,teamSlug:t,flowKind:l}),callback_urls:["https://vercel.com/api/now/registration/github-custom-host/callback"],default_permissions:{actions:"write",administration:"write",checks:"write",contents:"write",deployments:"write",emails:"read",issues:"write",members:"read",metadata:"read",pull_requests:"write",repository_hooks:"write",statuses:"write"},hook_attributes:{active:!0,url:a},default_events:["branch_protection_rule","check_run","deployment","membership","pull_request","pull_request_review","push","repository","status","team"],public:!0},v=(0,r.useCallback)(()=>{d(""),p(""),y("Default"),n()},[n]),_=(0,r.useCallback)(async function(){let e;if(x(""),u.current?.reportValidity()){try{e=new URL(c).hostname}catch{x("The provided domain is not valid");return}m(!0);try{if(await z(e)){if("NeedsInstallation"===b)return void x("There is already a Spaces GitHub App installed for this GitHub Enterprise Server domain.");m(!1),o(e),v();return}if("NeedsInstallation"===b)return void u.current?.submit();y("NeedsInstallation"),m(!1)}catch{x("There was an unexpected error from the server.")}}},[c,b,v,o]);return(0,r.useEffect)(()=>{let e=e=>{s&&"Enter"===e.key&&(e.preventDefault(),_())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[_,s]),(0,i.jsx)(Q.Modal.Modal,{active:s,onClickOutside:v,children:(0,i.jsxs)("form",{action:function(e,t){try{let i=new URL(e).origin;return`${i}/organizations/${t}/settings/apps/new`}catch{return""}}(c,h),method:"post",ref:u,children:[(0,i.jsxs)(Q.Modal.Body,{children:[(0,i.jsxs)(Q.Modal.Header,{children:[(0,i.jsx)(Q.Modal.Title,{children:"GitHub Enterprise Server"}),(0,i.jsx)(Q.Modal.Subtitle,{children:"Enter your GitHub Enterprise Server domain to connect a Git Repository from your GitHub Enterprise Server."})]}),(0,i.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial",children:[(0,i.jsx)(q.Input,{id:"domain",label:"GitHub Enterprise Server Domain",name:"domain",onChange:e=>d(e.target.value),placeholder:"https://github.acme.com",required:!0,value:c}),"NeedsInstallation"===b?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(q.Input,{id:"organization",label:"GitHub Enterprise Server Organization Name",name:"organization",onChange:e=>p(e.target.value),placeholder:"organization-name",required:!0,value:h}),(0,i.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-initial geist-sr-only",children:(0,i.jsx)(q.Input,{id:"manifest",label:"Manifest",name:"manifest",readOnly:!0,value:JSON.stringify(j)})})]}):null,(0,i.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-initial",children:g?(0,i.jsx)(F.Error,{error:g}):null})]})]}),(0,i.jsxs)(Q.Modal.Actions,{children:[(0,i.jsx)(Q.Modal.Action,{onClick:v,type:"secondary",children:"Cancel"}),(0,i.jsx)(Q.Modal.Action,{buttonType:"submit",loading:f,passthroughOnClick:e=>{e.preventDefault(),s&&_()},children:"Continue"})]})]})})}function J(e){let{teamSlug:t,webhookUrl:a,dispatch:s,flowKind:n}=e,[o,l]=(0,r.useState)(!1),{user:u}=(0,f.useUser)(),[c,d]=(0,r.useState)(""),{account:h,mutate:p,isLoading:m}=(0,S.default)({account:u??null,type:"github-custom-host",customHost:c}),[g,x]=(0,r.useState)(!1),b=(0,r.useCallback)(()=>{s({type:"SET_GIT_ACCOUNT",gitAccount:{provider:"github-custom-host",host:c}})},[s,c]),j=(0,w.useConnectPopup)({onOpen:()=>{l(!0)},onAbort:()=>{l(!1),d("")},onSuccess:()=>{b(),p(),l(!1)}}),v=(0,r.useCallback)(e=>{d(e),x(!1)},[]);return(0,r.useEffect)(()=>{if(h&&c&&!m){if(!h["github-custom-host"])return void p();h["github-custom-host"].verified?b():j.open("github-custom-host",{host:c})}},[h,m,c,j,p,b]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(U.Button,{loading:o,onClick:()=>x(!0),type:"tertiary",children:(0,i.jsxs)("span",{style:{display:"flex"},children:[(0,i.jsx)(y.default,{fill:"currentColor",gitType:"github",height:20,style:{marginRight:"var(--geist-gap-quarter)",transform:"translateY(-1px)"},width:20}),(0,i.jsx)("span",{className:"text-[14px] leading-[20px] font-medium text-inherit",children:"Continue with GitHub Enterprise"})]})}),(0,i.jsx)(W,{onClose:()=>x(!1),onSetHostname:v,open:g,teamSlug:t,webhookUrl:a,flowKind:n})]})}e.s(["GithubEnterpriseButton",()=>J],2867523);var K=e.i(7722264),Y=e.i(4422059);function X(e){let{"data-testid":t,gitType:a,dispatch:s,shouldUpdatePreferredGitAccount:n,size:o,requireReauth:l,namespaceId:u}=e,[c,d]=(0,r.useState)(!1),[h,p]=(0,r.useState)(!1),{user:m}=(0,f.useUser)(),{account:g,mutate:x}=(0,S.default)({account:m??null});(0,r.useEffect)(()=>{g&&h&&(p(!1),v())},[g]);let b=(0,r.useCallback)(async()=>{d(!0);let e=await (0,T.mutateGitNamespaces)(a);d(!1);let t=e?.find(e=>String(e.id)===String(u))??e?.[0];s({type:"SET_GIT_ACCOUNT",gitAccount:{provider:a,namespaceId:t?.id,requireReauth:t?.requireReauth}}),n&&en({provider:a,namespaceId:t?.id})},[s,a,u,n]),y=(0,w.useConnectPopup)({onOpen:()=>{d(!0)},onAbort:()=>{d(!1)},onSuccess:()=>{b(),x(),d(!1)}}),v=(0,r.useCallback)(()=>{if(!g){p(!0),d(!0);return}!l&&g[a]?.verified?b():y.open(a)},[g,l,a,b,y]);return(0,i.jsxs)(j.default,{align:"grow","data-testid":t,gitType:a,loading:c,onClick:v,size:o,width:"100%",children:[(0,i.jsx)("span",{className:A.default.continueWithText,children:"Continue with "}),_.ORIGINS[a]]})}function Z(e){let{search:t,gitAccount:s,configureGithubInstallation:n}=e,o=s?.provider,{data:l}=(0,T.default)({provider:o}),c=(0,r.useMemo)(()=>s&&l?l.find(e=>e.id===s?.namespaceId)?.name:null,[l,s]);return(0,i.jsx)(x.default,{center:!0,className:(0,a.clsx)(A.default.selectProvider,A.default.emptyResult),children:(0,i.jsxs)(x.default,{flex:"0 0 auto",gap:0,children:[(0,i.jsxs)("p",{className:"text-copy-14 font-medium m-0 text-center","data-testid":(0,d.tid)("import-flow-layout","no-results-found-text"),children:["No ",t?"Results":"Git Repositories"," Found"]}),(0,i.jsx)(u.Spacer,{y:.25}),t?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{className:"text-copy-14 m-0 text-center",style:{color:"var(--accents-6)",wordBreak:"break-word"},children:(0,i.jsxs)(x.default,{center:!0,row:!0,children:["Your search ",t?`for "${t}"`:null," ",s&&c?(0,i.jsxs)(i.Fragment,{children:["in"," ",(0,i.jsxs)(x.default,{center:!0,flex:"0 0 auto",noWrap:!0,row:!0,children:[(0,i.jsx)(u.Spacer,{x:.2}),(0,i.jsx)(x.default,{flex:"0 0 auto",children:(0,i.jsx)(y.default,{gitType:s.provider})}),(0,i.jsx)(u.Spacer,{x:.2}),(0,i.jsx)("span",{className:"text-copy-16 font-medium geist-ellipsis",children:c}),(0,i.jsx)(u.Spacer,{x:.2})]})]}):null," ","did not return any results."]})}),(0,i.jsx)(u.Spacer,{y:.25})]}):null,n?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{className:"text-copy-14 m-0 text-center",style:{color:"var(--accents-6)"},children:"Make sure to grant Vercel access to the Git repositories you’d like to import."}),(0,i.jsx)(u.Spacer,{y:1}),(0,i.jsx)(j.default,{"data-testid":(0,d.tid)("import-flow-layout","configure-github-app-button"),gitType:"github",loading:!1,onClick:n,children:"Configure GitHub App"})]}):(0,i.jsx)("p",{className:"text-copy-14 m-0 text-center",style:{color:"var(--accents-6)"},children:"Try selecting a different Git account or organization on the top left."})]})})}function ee(e){let{gitAccount:t,dispatch:r}=e;return(0,i.jsx)(x.default,{center:!0,className:(0,a.clsx)(A.default.selectProvider,A.default.emptyResult),children:(0,i.jsxs)(x.default,{flex:"0 0 auto",gap:0,children:[(0,i.jsx)("p",{className:"text-copy-14 font-medium m-0 text-center","data-testid":(0,d.tid)("import-flow-layout","no-results-found-text"),children:"No Git Repositories Found"}),(0,i.jsx)(u.Spacer,{y:.25}),(0,i.jsxs)("p",{className:"text-copy-14 m-0 text-center","data-testid":(0,d.tid)("import-flow-layout","no-results-found-text"),style:{color:"var(--accents-6)"},children:["Your ",_.ORIGINS[t.provider]," account requires re-authentication to see your repositories."]}),(0,i.jsx)(u.Spacer,{y:1}),(0,i.jsx)(X,{dispatch:r,gitType:t.provider,namespaceId:t.namespaceId,requireReauth:!0})]})})}function et(e){let{openGithubInstallation:t}=e;return(0,i.jsx)(x.default,{center:!0,className:(0,a.clsx)(A.default.selectProvider,A.default.emptyResult),children:(0,i.jsxs)("div",{className:"flex flex-col items-center justify-start flex-initial",children:[(0,i.jsx)("p",{className:"text-copy-14 font-medium m-0 text-center","data-testid":(0,d.tid)("import-flow-layout","almost-done"),children:"Install the GitHub application for the accounts you wish to Import from to continue"}),(0,i.jsx)(u.Spacer,{y:1.3}),(0,i.jsx)("div",{className:"flex flex-col items-center justify-center gap-2 flex-1",children:(0,i.jsx)(j.default,{gitType:"github",onClick:t,children:"Install"})})]})})}function ei(e){let{renderButton:t}=e;return(0,i.jsx)(i.Fragment,{children:[84,30,75,68,32].map((e,r)=>(0,i.jsx)(H,{renderButton:t,repoSkeletonWidthPercentage:e},`${r}_${e}`))})}function er(e){let{repos:t,repoSearchIsLoading:h,search:p,debouncedSearch:f,gitAccount:g,dispatch:j,renderButton:v,shouldUpdatePreferredGitAccount:_,small:w,onChangeGitSelector:I,isInstallationNotFound:S}=e,k=g?.provider,G=g?.host,{isLoading:C,data:R,mutate:L}=(0,T.useIsomorphicGitNamspaces)({provider:k,host:G}),[E,O]=(0,r.useState)(!1),{team:P}=(0,m.useTeam)(),[B,M]=(0,r.useState)(!1);(0,r.useEffect)(()=>{E&&!h&&O(!1)},[E,h]);let $=(0,r.useCallback)(async e=>{let{installationId:t}=e,i=await L(),r=Array.isArray(i)&&i.length>0&&(i.find(e=>e.installationId===t)?.id||i[0].id)||null;j({type:"SET_GIT_NAMESPACE",namespaceId:r}),_&&en({provider:"github",namespaceId:r}),O(!0),j({type:"REVALIDATE_REPOS"})},[j,L,_]),{open:D}=(0,N.default)({onSuccess:$,provider:"github-limited"===k?"github-limited":"github"}),U=(0,r.useMemo)(()=>{if(("github"===k||"github-limited"===k)&&R?.length){let e=R.find(e=>Number(e.id)===Number(g?.namespaceId));if(e?.isAccessRestricted)return D}},[k,D,R,g]),F=(0,r.useMemo)(()=>!C&&!!B&&(!g||"github"===g.provider&&(!g.namespaceId||!R?.length)),[g,R,C,B]),q=(0,r.useMemo)(()=>{if(g?.requireReauth||S&&g&&!F)return{ui:(0,i.jsx)(ee,{dispatch:j,gitAccount:g}),suggestionListBorder:!1};if(F)return{ui:(0,i.jsx)(et,{openGithubInstallation:D}),suggestionListBorder:!1};if(!t||!R||E||!B)return{ui:(0,i.jsx)(ei,{renderButton:v}),suggestionListBorder:!1};if(0===t.length)return p!==f||f&&h?{ui:(0,i.jsx)(ei,{renderButton:v}),suggestionListBorder:!1}:null===p?{ui:(0,i.jsx)(Z,{configureGithubInstallation:U,gitAccount:g}),suggestionListBorder:!1}:{ui:(0,i.jsx)(Z,{configureGithubInstallation:U,gitAccount:g,search:f}),suggestionListBorder:!1};let e=!1;g?.provider==="github"||g?.provider==="github-limited"?e=t.length<5&&!!U:(g?.provider==="gitlab"||g?.provider==="bitbucket")&&(e=t.length<5);let r=R.find(e=>String(e.id)===String(g?.namespaceId));return{ui:(0,i.jsxs)(i.Fragment,{children:[t.slice(0,5).map(e=>(0,i.jsx)(H,{currentNamespace:r,gitType:g?.provider,renderButton:v,repo:e,search:f},e.id)),e?(0,i.jsxs)("p",{className:"text-copy-14",style:{color:"var(--accents-6)",textAlign:"left"},children:["Missing Git repository?"," ",g?.provider==="github"?(0,i.jsx)(c.Link,{href:"",onClick:U,variant:"highlight",children:"Adjust GitHub App Permissions →"}):(0,i.jsx)(c.Link,{external:!0,href:`/docs/git/vercel-for-${g?.provider}#missing-git-repository`,variant:"highlight",children:"Learn More"})]}):null]}),suggestionListBorder:t.length<5}},[j,p,f,t,R,B,E,F,g,D,U,v,S,h]),Q=(0,r.useCallback)(e=>{if("select-different-git-provider"===e)j({type:"SET_GIT_ACCOUNT",gitAccount:null}),_&&en({provider:null,namespaceId:null});else if("install-github"===e)D();else{let t=R?.find(t=>String(t.id)===String(e));j({type:"SET_GIT_NAMESPACE",namespaceId:t?.id??null,requireReauth:t?.requireReauth}),_&&en({namespaceId:e})}I?.()},[j,R,D,_,I]),z=R&&[...R.map(e=>({"data-testid":(0,d.tid)("git-scope-combobox",`namespace-${e.provider}`),value:String(e.id),label:e.name||"",prefix:(0,i.jsx)(y.default,{gitType:e.provider}),isMenu:!1})),..."github"===k||"github-limited"===k?[{"data-testid":(0,d.tid)("import-flow-layout","git-scope-combobox","add-github-account"),value:"install-github",label:"Add GitHub Account",prefix:(0,i.jsx)(s.Plus,{size:14}),isMenu:!0}]:[],{"data-testid":(0,d.tid)("import-flow-layout","git-scope-combobox","switch-git-provider"),value:"select-different-git-provider",label:"Switch Git Provider",prefix:(0,i.jsx)(n.ListUnordered,{size:14}),isMenu:!0}],V=R?.find(e=>String(e.id)===String(g?.namespaceId)),W=V?.id||R?.[0]?.id||null;return(0,r.useEffect)(()=>{if(g&&Array.isArray(R)){if(!R.find(e=>String(e.id)===String(g.namespaceId))){let e=R[0],t=e?.id??null;(t||W)&&(g.namespaceId?Q(t?String(t):null):j({type:"SET_GIT_NAMESPACE",namespaceId:t,requireReauth:e?.requireReauth}))}M(!0)}},[j,Q,g,R,W]),(0,i.jsxs)(x.default,{className:(0,a.clsx)(A.default.suggestionList,{[A.default.suggestionListBorder]:!w&&q.suggestionListBorder}),gap:!1,children:[(0,i.jsx)(x.default,{flex:"0 0 auto",children:(0,i.jsxs)(x.default,{className:A.default.suggestionDescription,direction:["column","row","row"],gap:!1,noWrap:!0,children:[(0,i.jsx)(x.default,{flex:"50%",children:(0,i.jsx)(l.Skeleton,{show:void 0===g||!B||!Array.isArray(R),children:(0,i.jsxs)(o.Combobox,{clearable:!1,"data-git-namespace-combobox":!0,"data-testid":(0,d.tid)("import-flow-layout","git-scope-combobox"),noRawSelectedValue:!0,onChange:Q,placeholder:"Select a Git Namespace",value:W?String(W):null,children:[(0,i.jsx)(o.Combobox.Input,{"data-git-namespace-combobox-input":!0,"data-testid":(0,d.tid)("import-flow-layout","git-scope-combobox","input"),loading:"github"===k&&!B}),(0,i.jsx)(o.Combobox.List,{children:z?.map(e=>(0,i.jsx)(o.Combobox.Option,{"data-testid":e["data-testid"],isMenu:e.isMenu,prefix:e.prefix,value:e.value,children:e.label},e.value))})]})})}),(0,i.jsx)(u.Spacer,{x:1/3,y:1/3}),(0,i.jsx)(x.default,{flex:"50%",children:(0,i.jsx)(l.Skeleton,{show:!S&&!(V?.ownerType==="team"&&!P)&&(!!(!t&&null===p&&!F)||!B||!Array.isArray(R)||E),children:(0,i.jsx)(b.SearchInput,{"data-testid":(0,d.tid)("import-flow-layout","search-input"),disabled:t?.length===0&&null===p,onChange:e=>j({type:"SET_SEARCH",search:e.target.value}),placeholder:"Search…",value:p??"",width:"100%",loading:p!==f||!!(f&&h)})})})]})}),(0,i.jsx)(u.Spacer,{y:2/3}),(0,i.jsx)(x.default,{flex:"1 0 auto",children:(0,i.jsx)(x.default,{className:A.default.repoList,"data-testid":(0,d.tid)("import-flow-layout","repository-list"),gap:!1,children:q.ui})})]})}function ea(e){let{dispatch:t,small:s,shouldUpdatePreferredGitAccount:n}=e,{teamSlug:o}=(0,m.useTeam)(),l=(0,g.useServerFlag)("enable-github-onprem-project-creation-flow",!1),h=(0,g.useServerFlag)("enable-github-limited",!1)?["github","github-limited","gitlab","bitbucket"]:["github","gitlab","bitbucket"];return s?(0,i.jsxs)("div",{className:(0,a.clsx)(A.default.selectProvider,A.default.small),children:[h.map(e=>(0,i.jsxs)(r.default.Fragment,{children:[(0,i.jsx)("span",{className:A.default.providerBtn,children:(0,i.jsx)(X,{"data-testid":(0,d.tid)("select-git-repository","choose-provider",e),dispatch:t,gitType:e,shouldUpdatePreferredGitAccount:n})}),(0,i.jsx)("span",{className:(0,a.clsx)(A.default.providerBtn,A.default.providerBtnMobile),children:(0,i.jsx)(X,{"data-testid":(0,d.tid)("select-git-repository","choose-provider",e),dispatch:t,gitType:e,shouldUpdatePreferredGitAccount:n,size:"small"})}),(0,i.jsx)(u.Spacer,{x:.5,y:.25})]},e)),(0,i.jsx)(u.Spacer,{expand:!0,y:.5}),(0,i.jsx)("span",{className:"text-copy-16 font-medium",children:(0,i.jsx)(c.Link,{external:!0,href:"/account/authentication",variant:"highlight",children:"Manage Login Connections"})})]}):(0,i.jsx)(x.default,{center:!0,className:A.default.selectProvider,children:(0,i.jsxs)(x.default,{center:!0,flex:"0 0 auto",children:[(0,i.jsx)("p",{className:"text-copy-14 text-center",style:{color:"var(--accents-6)"},children:"Select a Git provider to import an existing project from a Git Repository."}),(0,i.jsx)(u.Spacer,{}),(0,i.jsxs)(x.default,{direction:"column",gap:1/3,style:{width:320},children:[o&&l?(0,i.jsx)(x.default,{children:(0,i.jsx)(J,{dispatch:t,teamSlug:o,webhookUrl:"https://api.vercel.com/v1/incoming/github",flowKind:"new-project"})}):null,h.map(e=>(0,i.jsx)(x.default,{children:(0,i.jsx)(X,{"data-testid":(0,d.tid)("select-git-repository","choose-provider",e),dispatch:t,gitType:e,shouldUpdatePreferredGitAccount:n})},e))]}),(0,i.jsx)(u.Spacer,{}),(0,i.jsx)("p",{className:"text-copy-14 font-medium text-center",children:(0,i.jsx)(c.Link,{external:!0,href:"/account/authentication",children:"Manage Login Connections"})})]})})}function es(e,t){switch(t.type){case"INIT_GIT_ACCOUNT":return{...e,preferredGitAccount:t.preferredGitAccount};case"SET_SEARCH":return{...e,search:t.search};case"SET_DEBOUNCED_SEARCH":return{...e,debouncedSearch:t.debouncedSearch,ts:e.debouncedSearch!==e.search?Date.now():e.ts};case"SET_GIT_ACCOUNT":return{...e,search:null,localGitAccount:t.gitAccount};case"SET_GIT_NAMESPACE":{let i=e.localGitAccount??e.preferredGitAccount;return i?{...e,localGitAccount:{...i,namespaceId:t.namespaceId,requireReauth:t.requireReauth??!1}}:e}case"REVALIDATE_REPOS":return{...e,ts:Date.now()};default:return e}}let en=async e=>{let{namespaceId:t,provider:i}=e;await (0,h.fetchAPI)(p.API_USER,{method:"PATCH",body:JSON.stringify({importFlowGitNamespaceId:t,importFlowGitProvider:i})})};function eo(e){let{renderButton:t,renderConnections:s,small:n,shouldUpdatePreferredGitAccount:o,onChangeGitSelector:l}=e,{user:u,isLoading:c}=(0,f.useUser)(),[{search:d,debouncedSearch:h,localGitAccount:p,preferredGitAccount:m},g]=(0,r.useReducer)(es,{search:null,debouncedSearch:null,ts:Date.now()}),x=m||(u?.importFlowGitProvider&&u.importFlowGitNamespaceId?{provider:u.importFlowGitProvider,namespaceId:u.importFlowGitNamespaceId}:null),b=void 0!==p?p:x,{account:y,isLoading:j}=(0,S.default)({account:u,customHost:p?.provider==="github-custom-host"?p.host:void 0});(0,r.useEffect)(()=>{let e=setTimeout(()=>g({type:"SET_DEBOUNCED_SEARCH",debouncedSearch:d}),300);return()=>clearTimeout(e)},[d]);let _=(0,Y.usePrevious)(h),{data:w,isLoading:N,error:T}=(0,I.useIsomorphicRepoSearch)({query:h,provider:b?.provider||void 0,host:b?.host,namespaceId:b?.namespaceId,requireReauth:b?.requireReauth},{keepPreviousData:_!==h}),k=(0,K.isError)(T),G=k&&"code"in T&&"installation_not_found"===T.code;(0,r.useEffect)(()=>{(w||!N)&&o&&g({type:"INIT_GIT_ACCOUNT",preferredGitAccount:!w||"error"in w?null:w.gitAccount})},[w,p,o,N]);let C=(0,r.useMemo)(()=>{let e=o&&void 0===m,r=y?.github?.verified??!1,a=y?.gitlab?.verified??!1,p=y?.bitbucket?.verified??!1,f=y?.["github-custom-host"]?.verified??!1;return(!k||G)&&(e||j||c||(r||f||a||p)&&b)?(0,i.jsx)(er,{debouncedSearch:h,dispatch:g,gitAccount:b,isInstallationNotFound:G,onChangeGitSelector:l,renderButton:t,repoSearchIsLoading:N,repos:w&&"repos"in w?w.repos:void 0,search:d,shouldUpdatePreferredGitAccount:o,small:n}):u?.limited?(0,i.jsx)(v.default,{small:n}):s?s({dispatch:g}):(0,i.jsx)(ea,{dispatch:g,shouldUpdatePreferredGitAccount:!0,small:n})},[m,o,y,j,u?.limited,s,n,h,l,t,N,w,d,c,b,k,G]);return(0,i.jsx)("div",{className:(0,a.clsx)(A.default.suggestionBox,{[A.default.small]:n}),children:C})}e.s(["ConnectGitButton",()=>X,"SelectGitRepository",()=>eo,"reducer",()=>es,"updatePreferredGitAccount",0,en],7591419)}]);

//# debugId=66caaf9b-1ccd-e541-5757-6ff2e6cd5e2f
//# sourceMappingURL=88d043831e4dbe65.js.map