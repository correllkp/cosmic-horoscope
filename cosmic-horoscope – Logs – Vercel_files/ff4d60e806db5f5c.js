;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="410bd569-70b2-7b6c-04e9-29ab4ba42d3d")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,1246255,7239573,e=>{"use strict";var a=e.i(1511518),t=e.i(516467);function r(e,r,n){let i=(0,t.toDate)(e,n?.in);return i.setTime(i.getTime()+r*a.millisecondsInMinute),i}function n(e,a,t){return r(e,-a,t)}e.s(["addMinutes",()=>r],7239573),e.s(["subMinutes",()=>n],1246255)},5481907,e=>{"use strict";var a=e.i(1176592),t=e.i(7909933),r=e.i(277234),n=e.i(4244280),i=e.i(1233856),o=e.i(3737038),s=e.i(1511518),u=e.i(1667062),l=e.i(7239573),d=e.i(6092370),m=e.i(268049),c=e.i(1246255),g=e.i(818351),p=e.i(9667097),T=e.i(2749380),S=e.i(5297450),C=e.i(8151845),y=e.i(4337458),h=e.i(1875382),M=e.i(9486194),f=e.i(8690335),I=e.i(1813317),A=e.i(5269510);let R=e=>(t,r,n)=>{let i=(0,a.useRef)(void 0),o=e(t,r,n);(0,a.useEffect)(()=>{void 0!==o.data&&Array.isArray(t)&&t[1]&&(i.current=o.data)},[o.data,t]);let s=(0,a.useCallback)(()=>{i.current=void 0},[]);Array.isArray(t)&&!t[1]&&(i.current=void 0);let u=void 0===o.data?i.current:o.data,l=void 0===o.data&&void 0!==i.current;return Object.assign(o,{currentData:u,isLagging:l,resetLaggy:s})};function b(e,t){let r,n=(0,a.useMemo)(()=>{if(e)return{...e}},[e]),c=(r=(0,h.useSearchParams)(),(0,a.useCallback)(e=>{let{rollups:a,by:t,event:n,filter:i}=e;if(!a||!n||!M.queryBuilderEvents.includes(n))return;let o=(0,I.getGroupableDimensions)(n);if(i&&(0,f.parseFilters)(i).some(e=>!o.includes(e.dimension)))return;t=t?.filter(e=>o.includes(e));let s=r?.get("period"),u=r?.get("from"),l=r?.get("to"),d=u&&l?{from:new Date(1e3*Number(u)),to:new Date(1e3*Number(l))}:s;return Object.entries(a).reduce((e,a)=>{let[r,o]=a,{measure:s,aggregation:u}=o;return e[r]={metric:`${n}.${s}`,by:t||[],filter:i||"",aggregation:u,time:d||""},e},{})},[r])),{start:A,end:R,isRelativeTime:b}=(0,C.useRangeFromQueryState)(),[{environment:v}]=(0,C.useSonarQueryState)(),G=(0,y.useSonarQueryScopeWithSlug)(),N=(0,y.useSonarQueryScope)(),B=(0,S.useShouldShowDemoData)();if(n&&!n.scope&&(n.scope=G),n){let e=n.startTime||A,a=n.endTime||R;n.granularity=n.granularity||(0,T.getGranularityFromDuration)(Math.round(a.getTime()-e.getTime()),n.lowGranularity),n.startTime=(0,i.startOfDuration)(n.startTime||e,n.granularity),n.endTime=(0,i.endOfDuration)(n.endTime||a,n.granularity)}n&&!n.reason&&(n.reason="observability_chart");let D=t?.noEnvironmentFilter===!0,k=t?.builderQueryFilter||n?.filter;if(n&&"all"!==v&&!D&&(n.filter=(0,d.andFilterStrings)(`environment eq '${v}'`,n.filter),k=(0,d.andFilterStrings)(`environment eq '${v}'`,k)),n&&(n.filter=(0,d.andFilterStrings)(n.filter,(0,d.serializeObjectFilter)(n.contextFilter)),k=(0,d.andFilterStrings)(k,(0,d.serializeObjectFilter)(n.contextFilter)),N?.type==="project"&&(k=(0,d.andFilterStrings)(`projectId eq '${N.projectIds[0]}'`,k)),t?.useQueryCache))try{{let e=new URLSearchParams(window.location.search).get("queryId");e&&(n.queryId=e)}}catch{}let O=c({event:n?.event,rollups:n?.rollups,by:n?.groupBy?.filter(e=>"projectName"!==e),filter:k}),L=n?.granularity&&b?(0,m.milliseconds)(n.granularity):0,F=!!((t?.showDemoData||B)&&t?.demoConfig),P=(0,a.useMemo)(()=>!n||F?null:JSON.stringify(n),[n,F]),{isLoading:w,...E}=(0,g.useIsomorphicSWR)(P,async()=>{if(n?.scope)return(0,p.getSonarData)(n)},{refreshInterval:t?.disableRefetch===!0?0:L,revalidateOnFocus:!1,revalidateOnReconnect:!1,revalidateIfStale:!1,keepPreviousData:!1,errorRetryCount:0,ssr:{timeout:4e3}}),U=(t?.showDemoData||B)&&t?.demoConfig&&n?JSON.stringify({event:n.event,by:n.groupBy,rollups:n.rollups,durationMs:n.endTime&&n.startTime?n.endTime.getTime()-n.startTime.getTime():0,granularity:n.granularity}):null,K=(0,a.useMemo)(()=>{if(U&&t?.demoConfig)return function(e,a){let t,{startTime:r,endTime:n,granularity:i,groupBy:d=[]}=e,m=(t=(0,u.differenceInMilliseconds)(n,r)/s.millisecondsInMinute,(0,o.getRoundingMethod)(void 0)(t)),c=i.minutes||15,g=Math.ceil(m/c/("lowGranularity"in e?4:1)),p=[],T=[],S=Object.keys(a.rollups),C=0,y=e=>!!e&&"object"==typeof e&&"base"in e&&"variation"in e&&"number"==typeof e.base&&"number"==typeof e.variation,h=(e=>{if(0===e.length)return[{}];let t=[{}];for(let r of e){let e=[];if(a.groupValues?.[r])e=a.groupValues[r];else{let t=new Set;for(let e of Object.values(a.rollups))if(!y(e)&&e.groupConfigs){let a=e.groupConfigs;a[r]&&Object.keys(a[r]).forEach(e=>{t.add(e)})}e=Array.from(t)}if(0===e.length)throw Error(`No values found for group field "${r}". Please provide groupValues or groupConfigs for this field.`);let n=[];for(let a of t)for(let t of e)n.push({...a,[r]:t});t=n}return t})(d),M=e.rollups;for(let e of h){let t={...e},n={};for(let t=0;t<g;t++){let i=(0,l.addMinutes)(r,t*c),o={timestamp:i,...e};for(let t of S){let r,s=a.rollups[t],u=M[t];if(void 0===s)continue;if(y(s))r=s;else for(let[a,t]of(r=s.defaultConfig,Object.entries(e)))if(s.groupConfigs?.[a]?.[t]){r=s.groupConfigs[a][t];break}let{base:l=0,variation:d=0,diurnalPattern:m=!1}=r,c=l+(Math.random()-.5)*d;m&&(c*=1+.3*Math.sin(i.getHours()/24*Math.PI*2)),r.allowNegative||(c=Math.max(0,c));let g=u?.aggregation;"sum"===g?c=Math.round(c):"avg"===g||("p75"===g?c+=Math.random()*d*.5:c=Math.round(c)),o[t]=c,n[t]||(n[t]=[]),n[t].push(c),C+=c}p.push(o)}for(let e of S){let a=n[e],r=M[e],i=r?.aggregation,o=null;if(a&&0!==a.length)switch(i){case"avg":o=a.reduce((e,a)=>e+a,0)/a.length;break;case"p75":{a.sort((e,a)=>e-a);let e=Math.floor(.75*(a.length-1));o=a[e]||0;break}default:o=a.reduce((e,a)=>e+a,0)}else o=null;t[e]=o||0}T.push(t)}return{data:e.summaryOnly?void 0:p,query:e,summary:T,statistics:{rowsRead:C,bytesRead:46*C,dbTimeSeconds:.1+.1*Math.random(),engineTimeSeconds:.1+.1*Math.random(),queryTable:"demo"}}}(n,t.demoConfig)},[U]);return K?{...E,isRelativeTime:!0,data:K,isLoading:!1}:{...E,builderQuery:O,isRelativeTime:b,isLoading:w||E.isValidating||!n?.scope}}function v(e,r){let n=(0,y.useSonarQueryScope)(),o=(0,a.useMemo)(()=>{if(!e)return null;let a={...e};return a.scope||(a.scope=n),JSON.stringify(a)+(r?"-live":"-static")},[e,n,r]);return(0,t.default)(o,async()=>{if(!e)return;let a={...e};if(a.scope||(a.scope=n),r){let e=new Date,t=(0,i.endOfDuration)((0,c.subMinutes)(e,1),{seconds:10});a.startTime=(0,i.startOfDuration)(new Date(e.getTime()-6e5),{seconds:10}),a.endTime=t}if(a.scope)return(0,p.getSonarData)(a)},{refreshInterval:e?.granularity&&r?(0,m.milliseconds)({seconds:8}):0,revalidateOnFocus:!1,revalidateOnReconnect:!1,use:[R],onErrorRetry:(e,a,t,r,n)=>{let{retryCount:i}=n;401===e.status||403===e.status||i>=3||setTimeout(()=>void r({retryCount:i}),2500)}})}function G(){let e=(0,C.useRangeFromQueryState)(),a=(0,y.useSonarQueryScope)(),[{environment:o}]=(0,C.useSonarQueryState)(),s={minutes:15},u={from:(0,i.startOfDuration)(e.start,s),to:(0,i.endOfDuration)(e.end,s),scope:a,environment:o};return{isRelativeTime:e.isRelativeTime,...(0,t.default)(u,async e=>{if(e.scope)return await (0,r.fetchAPI)(`${n.API_OBSERVABILITY_BUILD_DIAGNOSTICS}?${(0,A.stringify)((0,p.getSonarTeamParam)(e.scope))}`,{method:"POST",body:JSON.stringify(e),throwOnHTTPError:!0})},{refreshInterval:0,revalidateOnFocus:!1,revalidateOnReconnect:!1})}}e.s(["useBuildDiagnostics",()=>G,"useSonarLiveQuery",()=>v,"useSonarQuery",()=>b],5481907)},9961052,e=>{"use strict";let a=[["AF","Afghanistan"],["AL","Albania"],["DZ","Algeria"],["AS","American Samoa"],["AD","Andorra"],["AO","Angola"],["AI","Anguilla"],["AQ","Antarctica"],["AG","Antigua and Barbuda"],["AR","Argentina"],["AM","Armenia"],["AW","Aruba"],["AU","Australia"],["AT","Austria"],["AZ","Azerbaijan"],["BS","Bahamas"],["BH","Bahrain"],["BD","Bangladesh"],["BB","Barbados"],["BY","Belarus"],["BE","Belgium"],["BZ","Belize"],["BJ","Benin"],["BM","Bermuda"],["BT","Bhutan"],["BO","Bolivia"],["BA","Bosnia and Herzegovina"],["BW","Botswana"],["BV","Bouvet Island"],["BR","Brazil"],["IO","British Indian Ocean Territory"],["BN","Brunei Darussalam"],["BG","Bulgaria"],["BF","Burkina Faso"],["BI","Burundi"],["KH","Cambodia"],["CM","Cameroon"],["CA","Canada"],["CV","Cape Verde"],["KY","Cayman Islands"],["CF","Central African Republic"],["TD","Chad"],["CL","Chile"],["CN",["People's Republic of China","China"]],["CX","Christmas Island"],["CC","Cocos (Keeling) Islands"],["CO","Colombia"],["KM","Comoros"],["CG",["Republic of the Congo","Congo"]],["CD",["Democratic Republic of the Congo","Congo"]],["CK","Cook Islands"],["CR","Costa Rica"],["CI",["Cote D'Ivoire","Ivory Coast"]],["HR","Croatia"],["CU","Cuba"],["CY","Cyprus"],["CZ",["Czech Republic","Czechia"]],["DK","Denmark"],["DJ","Djibouti"],["DM","Dominica"],["DO","Dominican Republic"],["EC","Ecuador"],["EG","Egypt"],["SV","El Salvador"],["GQ","Equatorial Guinea"],["ER","Eritrea"],["EE","Estonia"],["ET","Ethiopia"],["FK","Falkland Islands (Malvinas)"],["FO","Faroe Islands"],["FJ","Fiji"],["FI","Finland"],["FR","France"],["GF","French Guiana"],["PF","French Polynesia"],["TF","French Southern Territories"],["GA","Gabon"],["GM",["Republic of The Gambia","The Gambia","Gambia"]],["GE","Georgia"],["DE","Germany"],["GH","Ghana"],["GI","Gibraltar"],["GR","Greece"],["GL","Greenland"],["GD","Grenada"],["GP","Guadeloupe"],["GU","Guam"],["GT","Guatemala"],["GN","Guinea"],["GW","Guinea-Bissau"],["GY","Guyana"],["HT","Haiti"],["HM","Heard Island and McDonald Islands"],["VA","Holy See (Vatican City State)"],["HN","Honduras"],["HK","Hong Kong"],["HU","Hungary"],["IS","Iceland"],["IN","India"],["ID","Indonesia"],["IR",["Islamic Republic of Iran","Iran"]],["IQ","Iraq"],["IE","Ireland"],["IL","Israel"],["IT","Italy"],["JM","Jamaica"],["JP","Japan"],["JO","Jordan"],["KZ","Kazakhstan"],["KE","Kenya"],["KI","Kiribati"],["KP","North Korea"],["KR","South Korea"],["KW","Kuwait"],["KG","Kyrgyzstan"],["LA","Lao People's Democratic Republic"],["LV","Latvia"],["LB","Lebanon"],["LS","Lesotho"],["LR","Liberia"],["LY","Libya"],["LI","Liechtenstein"],["LT","Lithuania"],["LU","Luxembourg"],["MO","Macao"],["MG","Madagascar"],["MW","Malawi"],["MY","Malaysia"],["MV","Maldives"],["ML","Mali"],["MT","Malta"],["MH","Marshall Islands"],["MQ","Martinique"],["MR","Mauritania"],["MU","Mauritius"],["YT","Mayotte"],["MX","Mexico"],["FM","Micronesia, Federated States of"],["MD","Moldova, Republic of"],["MC","Monaco"],["MN","Mongolia"],["MS","Montserrat"],["MA","Morocco"],["MZ","Mozambique"],["MM","Myanmar"],["NA","Namibia"],["NR","Nauru"],["NP","Nepal"],["NL","Netherlands"],["NC","New Caledonia"],["NZ","New Zealand"],["NI","Nicaragua"],["NE","Niger"],["NG","Nigeria"],["NU","Niue"],["NF","Norfolk Island"],["MK",["The Republic of North Macedonia","North Macedonia"]],["MP","Northern Mariana Islands"],["NO","Norway"],["OM","Oman"],["PK","Pakistan"],["PW","Palau"],["PS",["State of Palestine","Palestine"]],["PA","Panama"],["PG","Papua New Guinea"],["PY","Paraguay"],["PE","Peru"],["PH","Philippines"],["PN","Pitcairn"],["PL","Poland"],["PT","Portugal"],["PR","Puerto Rico"],["QA","Qatar"],["RE","Reunion"],["RO","Romania"],["RU",["Russian Federation","Russia"]],["RW","Rwanda"],["SH","Saint Helena"],["KN","Saint Kitts and Nevis"],["LC","Saint Lucia"],["PM","Saint Pierre and Miquelon"],["VC","Saint Vincent and the Grenadines"],["WS","Samoa"],["SM","San Marino"],["ST","Sao Tome and Principe"],["SA","Saudi Arabia"],["SN","Senegal"],["SC","Seychelles"],["SL","Sierra Leone"],["SG","Singapore"],["SK","Slovakia"],["SI","Slovenia"],["SB","Solomon Islands"],["SO","Somalia"],["ZA","South Africa"],["GS","South Georgia and the South Sandwich Islands"],["ES","Spain"],["LK","Sri Lanka"],["SD","Sudan"],["SR","Suriname"],["SJ","Svalbard and Jan Mayen"],["SZ","Eswatini"],["SE","Sweden"],["CH","Switzerland"],["SY","Syrian Arab Republic"],["TW","Taiwan"],["TJ","Tajikistan"],["TZ",["United Republic of Tanzania","Tanzania"]],["TH","Thailand"],["TL","Timor-Leste"],["TG","Togo"],["TK","Tokelau"],["TO","Tonga"],["TT","Trinidad and Tobago"],["TN","Tunisia"],["TR","TÃ¼rkiye"],["TM","Turkmenistan"],["TC","Turks and Caicos Islands"],["TV","Tuvalu"],["UG","Uganda"],["UA","Ukraine"],["AE","United Arab Emirates"],["GB",["United Kingdom","UK","Great Britain"]],["US",["United States of America","United States","USA"]],["UM","United States Minor Outlying Islands"],["UY","Uruguay"],["UZ","Uzbekistan"],["VU","Vanuatu"],["VE","Venezuela"],["VN","Vietnam"],["VG","Virgin Islands, British"],["VI","Virgin Islands, U.S."],["WF","Wallis and Futuna"],["EH","Western Sahara"],["YE","Yemen"],["ZM","Zambia"],["ZW","Zimbabwe"],["AX","Ã…land Islands"],["BQ","Bonaire, Sint Eustatius and Saba"],["CW","CuraÃ§ao"],["GG","Guernsey"],["IM","Isle of Man"],["JE","Jersey"],["ME","Montenegro"],["BL","Saint BarthÃ©lemy"],["MF","Saint Martin (French part)"],["RS","Serbia"],["SX","Sint Maarten (Dutch part)"],["SS","South Sudan"],["XK","Kosovo"]],t=Object.fromEntries(a),r=Object.fromEntries([["AD","ðŸ‡¦ðŸ‡©"],["AE","ðŸ‡¦ðŸ‡ª"],["AF","ðŸ‡¦ðŸ‡«"],["AG","ðŸ‡¦ðŸ‡¬"],["AI","ðŸ‡¦ðŸ‡®"],["AL","ðŸ‡¦ðŸ‡±"],["AM","ðŸ‡¦ðŸ‡²"],["AO","ðŸ‡¦ðŸ‡´"],["AQ","ðŸ‡¦ðŸ‡¶"],["AR","ðŸ‡¦ðŸ‡·"],["AS","ðŸ‡¦ðŸ‡¸"],["AT","ðŸ‡¦ðŸ‡¹"],["AU","ðŸ‡¦ðŸ‡º"],["AW","ðŸ‡¦ðŸ‡¼"],["AX","ðŸ‡¦ðŸ‡½"],["AZ","ðŸ‡¦ðŸ‡¿"],["BA","ðŸ‡§ðŸ‡¦"],["BB","ðŸ‡§ðŸ‡§"],["BD","ðŸ‡§ðŸ‡©"],["BE","ðŸ‡§ðŸ‡ª"],["BF","ðŸ‡§ðŸ‡«"],["BG","ðŸ‡§ðŸ‡¬"],["BH","ðŸ‡§ðŸ‡­"],["BI","ðŸ‡§ðŸ‡®"],["BJ","ðŸ‡§ðŸ‡¯"],["BL","ðŸ‡§ðŸ‡±"],["BM","ðŸ‡§ðŸ‡²"],["BN","ðŸ‡§ðŸ‡³"],["BO","ðŸ‡§ðŸ‡´"],["BQ","ðŸ‡§ðŸ‡¶"],["BR","ðŸ‡§ðŸ‡·"],["BS","ðŸ‡§ðŸ‡¸"],["BT","ðŸ‡§ðŸ‡¹"],["BV","ðŸ‡§ðŸ‡»"],["BW","ðŸ‡§ðŸ‡¼"],["BY","ðŸ‡§ðŸ‡¾"],["BZ","ðŸ‡§ðŸ‡¿"],["CA","ðŸ‡¨ðŸ‡¦"],["CC","ðŸ‡¨ðŸ‡¨"],["CD","ðŸ‡¨ðŸ‡©"],["CF","ðŸ‡¨ðŸ‡«"],["CG","ðŸ‡¨ðŸ‡¬"],["CH","ðŸ‡¨ðŸ‡­"],["CI","ðŸ‡¨ðŸ‡®"],["CK","ðŸ‡¨ðŸ‡°"],["CL","ðŸ‡¨ðŸ‡±"],["CM","ðŸ‡¨ðŸ‡²"],["CN","ðŸ‡¨ðŸ‡³"],["CO","ðŸ‡¨ðŸ‡´"],["CR","ðŸ‡¨ðŸ‡·"],["CU","ðŸ‡¨ðŸ‡º"],["CV","ðŸ‡¨ðŸ‡»"],["CW","ðŸ‡¨ðŸ‡¼"],["CX","ðŸ‡¨ðŸ‡½"],["CY","ðŸ‡¨ðŸ‡¾"],["CZ","ðŸ‡¨ðŸ‡¿"],["DE","ðŸ‡©ðŸ‡ª"],["DJ","ðŸ‡©ðŸ‡¯"],["DK","ðŸ‡©ðŸ‡°"],["DM","ðŸ‡©ðŸ‡²"],["DO","ðŸ‡©ðŸ‡´"],["DZ","ðŸ‡©ðŸ‡¿"],["EC","ðŸ‡ªðŸ‡¨"],["EE","ðŸ‡ªðŸ‡ª"],["EG","ðŸ‡ªðŸ‡¬"],["EH","ðŸ‡ªðŸ‡­"],["ER","ðŸ‡ªðŸ‡·"],["ES","ðŸ‡ªðŸ‡¸"],["ET","ðŸ‡ªðŸ‡¹"],["FI","ðŸ‡«ðŸ‡®"],["FJ","ðŸ‡«ðŸ‡¯"],["FK","ðŸ‡«ðŸ‡°"],["FM","ðŸ‡«ðŸ‡²"],["FO","ðŸ‡«ðŸ‡´"],["FR","ðŸ‡«ðŸ‡·"],["GA","ðŸ‡¬ðŸ‡¦"],["GB","ðŸ‡¬ðŸ‡§"],["GD","ðŸ‡¬ðŸ‡©"],["GE","ðŸ‡¬ðŸ‡ª"],["GF","ðŸ‡¬ðŸ‡«"],["GG","ðŸ‡¬ðŸ‡¬"],["GH","ðŸ‡¬ðŸ‡­"],["GI","ðŸ‡¬ðŸ‡®"],["GL","ðŸ‡¬ðŸ‡±"],["GM","ðŸ‡¬ðŸ‡²"],["GN","ðŸ‡¬ðŸ‡³"],["GP","ðŸ‡¬ðŸ‡µ"],["GQ","ðŸ‡¬ðŸ‡¶"],["GR","ðŸ‡¬ðŸ‡·"],["GS","ðŸ‡¬ðŸ‡¸"],["GT","ðŸ‡¬ðŸ‡¹"],["GU","ðŸ‡¬ðŸ‡º"],["GW","ðŸ‡¬ðŸ‡¼"],["GY","ðŸ‡¬ðŸ‡¾"],["HK","ðŸ‡­ðŸ‡°"],["HM","ðŸ‡­ðŸ‡²"],["HN","ðŸ‡­ðŸ‡³"],["HR","ðŸ‡­ðŸ‡·"],["HT","ðŸ‡­ðŸ‡¹"],["HU","ðŸ‡­ðŸ‡º"],["ID","ðŸ‡®ðŸ‡©"],["IE","ðŸ‡®ðŸ‡ª"],["IL","ðŸ‡®ðŸ‡±"],["IM","ðŸ‡®ðŸ‡²"],["IN","ðŸ‡®ðŸ‡³"],["IO","ðŸ‡®ðŸ‡´"],["IQ","ðŸ‡®ðŸ‡¶"],["IR","ðŸ‡®ðŸ‡·"],["IS","ðŸ‡®ðŸ‡¸"],["IT","ðŸ‡®ðŸ‡¹"],["JE","ðŸ‡¯ðŸ‡ª"],["JM","ðŸ‡¯ðŸ‡²"],["JO","ðŸ‡¯ðŸ‡´"],["JP","ðŸ‡¯ðŸ‡µ"],["KE","ðŸ‡°ðŸ‡ª"],["KG","ðŸ‡°ðŸ‡¬"],["KH","ðŸ‡°ðŸ‡­"],["KI","ðŸ‡°ðŸ‡®"],["KM","ðŸ‡°ðŸ‡²"],["KN","ðŸ‡°ðŸ‡³"],["KP","ðŸ‡°ðŸ‡µ"],["KR","ðŸ‡°ðŸ‡·"],["KW","ðŸ‡°ðŸ‡¼"],["KY","ðŸ‡°ðŸ‡¾"],["KZ","ðŸ‡°ðŸ‡¿"],["LA","ðŸ‡±ðŸ‡¦"],["LB","ðŸ‡±ðŸ‡§"],["LC","ðŸ‡±ðŸ‡¨"],["LI","ðŸ‡±ðŸ‡®"],["LK","ðŸ‡±ðŸ‡°"],["LR","ðŸ‡±ðŸ‡·"],["LS","ðŸ‡±ðŸ‡¸"],["LT","ðŸ‡±ðŸ‡¹"],["LU","ðŸ‡±ðŸ‡º"],["LV","ðŸ‡±ðŸ‡»"],["LY","ðŸ‡±ðŸ‡¾"],["MA","ðŸ‡²ðŸ‡¦"],["MC","ðŸ‡²ðŸ‡¨"],["MD","ðŸ‡²ðŸ‡©"],["ME","ðŸ‡²ðŸ‡ª"],["MF","ðŸ‡²ðŸ‡«"],["MG","ðŸ‡²ðŸ‡¬"],["MH","ðŸ‡²ðŸ‡­"],["MK","ðŸ‡²ðŸ‡°"],["ML","ðŸ‡²ðŸ‡±"],["MM","ðŸ‡²ðŸ‡²"],["MN","ðŸ‡²ðŸ‡³"],["MO","ðŸ‡²ðŸ‡´"],["MP","ðŸ‡²ðŸ‡µ"],["MQ","ðŸ‡²ðŸ‡¶"],["MR","ðŸ‡²ðŸ‡·"],["MS","ðŸ‡²ðŸ‡¸"],["MT","ðŸ‡²ðŸ‡¹"],["MU","ðŸ‡²ðŸ‡º"],["MV","ðŸ‡²ðŸ‡»"],["MW","ðŸ‡²ðŸ‡¼"],["MX","ðŸ‡²ðŸ‡½"],["MY","ðŸ‡²ðŸ‡¾"],["MZ","ðŸ‡²ðŸ‡¿"],["NA","ðŸ‡³ðŸ‡¦"],["NC","ðŸ‡³ðŸ‡¨"],["NE","ðŸ‡³ðŸ‡ª"],["NF","ðŸ‡³ðŸ‡«"],["NG","ðŸ‡³ðŸ‡¬"],["NI","ðŸ‡³ðŸ‡®"],["NL","ðŸ‡³ðŸ‡±"],["NO","ðŸ‡³ðŸ‡´"],["NP","ðŸ‡³ðŸ‡µ"],["NR","ðŸ‡³ðŸ‡·"],["NU","ðŸ‡³ðŸ‡º"],["NZ","ðŸ‡³ðŸ‡¿"],["OM","ðŸ‡´ðŸ‡²"],["PA","ðŸ‡µðŸ‡¦"],["PE","ðŸ‡µðŸ‡ª"],["PF","ðŸ‡µðŸ‡«"],["PG","ðŸ‡µðŸ‡¬"],["PH","ðŸ‡µðŸ‡­"],["PK","ðŸ‡µðŸ‡°"],["PL","ðŸ‡µðŸ‡±"],["PM","ðŸ‡µðŸ‡²"],["PN","ðŸ‡µðŸ‡³"],["PR","ðŸ‡µðŸ‡·"],["PS","ðŸ‡µðŸ‡¸"],["PT","ðŸ‡µðŸ‡¹"],["PW","ðŸ‡µðŸ‡¼"],["PY","ðŸ‡µðŸ‡¾"],["QA","ðŸ‡¶ðŸ‡¦"],["RE","ðŸ‡·ðŸ‡ª"],["RO","ðŸ‡·ðŸ‡´"],["RS","ðŸ‡·ðŸ‡¸"],["RU","ðŸ‡·ðŸ‡º"],["RW","ðŸ‡·ðŸ‡¼"],["SA","ðŸ‡¸ðŸ‡¦"],["SB","ðŸ‡¸ðŸ‡§"],["SC","ðŸ‡¸ðŸ‡¨"],["SD","ðŸ‡¸ðŸ‡©"],["SE","ðŸ‡¸ðŸ‡ª"],["SG","ðŸ‡¸ðŸ‡¬"],["SH","ðŸ‡¸ðŸ‡­"],["SI","ðŸ‡¸ðŸ‡®"],["SJ","ðŸ‡¸ðŸ‡¯"],["SK","ðŸ‡¸ðŸ‡°"],["SL","ðŸ‡¸ðŸ‡±"],["SM","ðŸ‡¸ðŸ‡²"],["SN","ðŸ‡¸ðŸ‡³"],["SO","ðŸ‡¸ðŸ‡´"],["SR","ðŸ‡¸ðŸ‡·"],["SS","ðŸ‡¸ðŸ‡¸"],["ST","ðŸ‡¸ðŸ‡¹"],["SV","ðŸ‡¸ðŸ‡»"],["SX","ðŸ‡¸ðŸ‡½"],["SY","ðŸ‡¸ðŸ‡¾"],["SZ","ðŸ‡¸ðŸ‡¿"],["TC","ðŸ‡¹ðŸ‡¨"],["TD","ðŸ‡¹ðŸ‡©"],["TF","ðŸ‡¹ðŸ‡«"],["TG","ðŸ‡¹ðŸ‡¬"],["TH","ðŸ‡¹ðŸ‡­"],["TJ","ðŸ‡¹ðŸ‡¯"],["TK","ðŸ‡¹ðŸ‡°"],["TL","ðŸ‡¹ðŸ‡±"],["TM","ðŸ‡¹ðŸ‡²"],["TN","ðŸ‡¹ðŸ‡³"],["TO","ðŸ‡¹ðŸ‡´"],["TR","ðŸ‡¹ðŸ‡·"],["TT","ðŸ‡¹ðŸ‡¹"],["TV","ðŸ‡¹ðŸ‡»"],["TW","ðŸ‡¹ðŸ‡¼"],["TZ","ðŸ‡¹ðŸ‡¿"],["UA","ðŸ‡ºðŸ‡¦"],["UG","ðŸ‡ºðŸ‡¬"],["UM","ðŸ‡ºðŸ‡²"],["US","ðŸ‡ºðŸ‡¸"],["UY","ðŸ‡ºðŸ‡¾"],["UZ","ðŸ‡ºðŸ‡¿"],["VA","ðŸ‡»ðŸ‡¦"],["VC","ðŸ‡»ðŸ‡¨"],["VE","ðŸ‡»ðŸ‡ª"],["VG","ðŸ‡»ðŸ‡¬"],["VI","ðŸ‡»ðŸ‡®"],["VN","ðŸ‡»ðŸ‡³"],["VU","ðŸ‡»ðŸ‡º"],["WF","ðŸ‡¼ðŸ‡«"],["WS","ðŸ‡¼ðŸ‡¸"],["XK","ðŸ‡½ðŸ‡°"],["YE","ðŸ‡¾ðŸ‡ª"],["YT","ðŸ‡¾ðŸ‡¹"],["ZA","ðŸ‡¿ðŸ‡¦"],["ZM","ðŸ‡¿ðŸ‡²"]]),n=new Map([["US","United States"]]),i=new Set(["KP","CU","IR","SY","RU","CN","AF"]),o=a.filter(e=>{let[a]=e;return!i.has(a)}).map(e=>{let[a,t]=e,r=Array.isArray(t)?t[0]:t;if(!r)throw Error(`Country name is undefined for code: ${a}`);let i=n.get(a);return i?[a,i]:[a,r]});o.map(e=>{let[a,t]=e;return[t,a]}),o.map(e=>{let[a,t]=e;return[a,t]}),o.map(e=>{let[a,t]=e;return t}),o.map(e=>{let[a]=e;return a}),e.s(["countries",0,a,"countriesByAlpha2",0,t,"flagsByAlpha2",0,r])},7946377,4394132,e=>{"use strict";var a,t=e.i(7534323),r=e.i(9961052),n=((a={}).Visitors="devices",a.TotalCount="total",a.BounceRate="bounceRate",a);e.s(["AnalyticsType",()=>n],4394132);let i=Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short"});function o(e){return i.format(e)}let s=new Map(r.countries);e.s(["createPercentages",0,(e,a)=>{let t=e.map(a),r=Math.max(...t),n=t.reduce((e,a)=>e+a,0);return e=>{let t=a(e);return{relativeToMax:t/r,relativeToTotal:t/n}}},"formatDate",0,e=>e.toLocaleDateString("en-US",{month:"short",day:"numeric"}),"formatNumber",0,e=>e.toLocaleString("en-US"),"formatNumberCompact",()=>o,"getClientTimezone",0,()=>{try{let e=Intl.DateTimeFormat().resolvedOptions().timeZone;if(e)return Intl.DateTimeFormat("en-US",{timeZone:e}),e}catch{}return"UTC"},"getCountryName",0,e=>{let a=s.get(e);return a?Array.isArray(a)?a[0]:a:"Unknown"},"getReferrerTitle",0,(e,a)=>{if(""===e||"unknown"===e)return"Direct";let r=(0,t.default)(e,{require_tld:!1,require_protocol:!1})?new URL(e.startsWith("http")?e:`https://${e}`):null;return a?e:r?r.hostname:e},"labelFromType",0,e=>{switch(e){case n.Visitors:return"Visitors";case n.TotalCount:return"Page Views";case n.BounceRate:return"Bounce Rate";default:return""}},"removeKeysFromObject",0,(e,a)=>Object.keys(e).reduce((t,r)=>(a.includes(r)||(t[r]=e[r]),t),{})],7946377)},7697370,3138089,5593201,3584125,e=>{"use strict";var a=e.i(8711407),t=e.i(5182595),r=e.i(3351543),n=e.i(5481907),i=e.i(9179929),o=e.i(7946377);let s="aiModel";function u(e){let{emptyState:u,hideXAxis:l=!1,projectDataOnly:d=!1}=e,{data:m,isLoading:c,isRelativeTime:g,builderQuery:p}=(0,n.useSonarQuery)({event:"aiGatewayRequest",rollups:{value:{measure:"count",aggregation:"sum"}},filter:d?"keyId eq null or keyId eq ''":void 0,groupBy:[s,"costCurrency"],limitRanking:"top_by_summary",limit:5,tailRollup:"others",summaryOnly:!1}),T=(0,i.useTimeseriesData)(m,{category:s}),S=(0,i.useSum)(m);return(0,a.jsx)(t.LineChart,{builderQuery:p?.value,data:T??[],getColor:s,sonarQueryResults:m,disableLegend:!0,emptyState:u||"No requests in this time range",hideXAxis:l,isLoading:c,isRelativeTime:g,lineType:"linear",renderCustomLegend:()=>(0,a.jsx)(r.LargeLegendValue,{isLoading:c,title:"Requests by Model",valueString:(0,o.formatNumberCompact)(S??0)}),title:(0,a.jsx)(r.LegendTitle,{title:"Requests"})})}e.s(["AiRequestByModel",()=>u],7697370);var l=e.i(1176592);function d(){let{projectDataOnly:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{data:r,isLoading:i,isRelativeTime:o}=(0,n.useSonarQuery)({event:"aiGatewayRequest",rollups:{inputTokens:{measure:"inputTokens",aggregation:"sum"},cachedInputTokens:{measure:"cachedInputTokens",aggregation:"sum"},cacheCreationInputTokens:{measure:"cacheCreationInputTokens",aggregation:"sum"},outputTokens:{measure:"outputTokens",aggregation:"sum"},reasoningTokens:{measure:"reasoningTokens",aggregation:"sum"}},filter:e?"keyId eq null or keyId eq ''":void 0,summaryOnly:!1}),s=(0,l.useMemo)(()=>r?.data?r.data.map(e=>({name:e.timestamp.toISOString(),"Input Tokens":Number(e.inputTokens)+Number(e.cachedInputTokens)+Number(e.cacheCreationInputTokens),"Output Tokens":Number(e.outputTokens)+Number(e.reasoningTokens)})):[],[r?.data]);return(0,a.jsx)(t.LineChart,{categories:["Input Tokens","Output Tokens"],data:s,sonarQueryResults:r,getColor:e=>"Input Tokens"===e?"var(--ds-amber-700)":"var(--ds-blue-700)",isLoading:i,isRelativeTime:o,lineType:"step",rollupConfig:{method:"sum",showTrend:!1},showRollup:!0,title:"Tokens",yAxisDomain:[0,500]})}function m(){let{projectDataOnly:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{data:r,isLoading:i,isRelativeTime:o}=(0,n.useSonarQuery)({event:"aiGatewayRequest",rollups:{inputTokens:{measure:"inputTokens",aggregation:"sum"},cachedInputTokens:{measure:"cachedInputTokens",aggregation:"sum"},cacheCreationInputTokens:{measure:"cacheCreationInputTokens",aggregation:"sum"}},filter:e?"keyId eq null or keyId eq ''":void 0,summaryOnly:!1}),s=(0,l.useMemo)(()=>r?.data?r.data.map(e=>({name:e.timestamp.toISOString(),Input:e.inputTokens,"Cached Input":e.cachedInputTokens,"Cache Creation":e.cacheCreationInputTokens})):[],[r?.data]);return(0,a.jsx)(t.LineChart,{categories:["Input","Cached Input","Cache Creation"],data:s,sonarQueryResults:r,getColor:e=>"Input"===e?"var(--ds-amber-700)":"Cached Input"===e?"var(--ds-green-700)":"var(--ds-purple-700)",isLoading:i,isRelativeTime:o,lineType:"step",rollupConfig:{method:"sum",showTrend:!1},showRollup:!0,title:"Input Tokens",yAxisDomain:[0,500]})}function c(){let{projectDataOnly:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{data:r,isLoading:i,isRelativeTime:o}=(0,n.useSonarQuery)({event:"aiGatewayRequest",rollups:{outputTokens:{measure:"outputTokens",aggregation:"sum"},reasoningTokens:{measure:"reasoningTokens",aggregation:"sum"}},filter:e?"keyId eq null or keyId eq ''":void 0,summaryOnly:!1}),s=(0,l.useMemo)(()=>r?.data?r.data.map(e=>({name:e.timestamp.toISOString(),Text:e.outputTokens,Reasoning:e.reasoningTokens})):[],[r?.data]);return(0,a.jsx)(t.LineChart,{categories:["Text","Reasoning"],data:s,sonarQueryResults:r,getColor:e=>"Text"===e?"var(--ds-blue-700)":"Reasoning"===e?"var(--ds-pink-700)":"var(--ds-purple-700)",isLoading:i,isRelativeTime:o,lineType:"step",rollupConfig:{method:"sum",showTrend:!1},showRollup:!0,title:"Output Tokens",yAxisDomain:[0,500]})}e.s(["AiTokens",()=>d],3138089),e.s(["AiInputTokens",()=>m],5593201),e.s(["AiOutputTokens",()=>c],3584125)},7302654,e=>{"use strict";var a=e.i(8711407),t=e.i(3351543),r=e.i(7697370),n=e.i(3138089),i=e.i(5481907),o=e.i(3646124),s=e.i(9179929),u=e.i(1176592),l=e.i(7797615),d=e.i(5441366),m=e.i(2936702),c=e.i(9031477),g=e.i(5593201),p=e.i(3584125);let T="aiModel";function S(){let{data:e,isLoading:S}=(0,i.useSonarQuery)({event:"aiGatewayRequest",rollups:{count:{measure:"count",aggregation:"sum"},p75DurationMS:{measure:"aiRequestDurationMs",aggregation:"p75"},tokensPerSecond:{measure:"tokensPerSecond",aggregation:"avg"},p75timeToFirstToken:{measure:"timeToFirstTokenMs",aggregation:"p75"},cost:{measure:"cost",aggregation:"sum"}},filter:"keyId eq null or keyId eq ''",groupBy:[T],limit:100,tailRollup:"truncate",summaryOnly:!1,lowGranularity:!0}),C=(0,s.useTableData)(e,{meta:{timeseries:{by:[T]}}}),y=(0,u.useMemo)(()=>[{Header:"AI Model",accessor:T,colorCategory:T,columnClassName:"pr-0",sortDescFirst:!1,Cell:o.ColoredDotCell},{Header:"Requests",accessor:"count",columnClassName:"w-28 max-w-36 min-w-28",columnAlignment:"right",Cell:o.NumericCell,cellFormatter:l.formatNumberCompact},{Header:"Avg Tokens/s",accessor:"tokensPerSecond",columnClassName:"w-28 max-w-36 min-w-28",columnAlignment:"right",Cell:o.NumericCell,cellFormatter:l.formatNumberCompact},{Header:"P75 Duration",accessor:"p75DurationMS",columnClassName:"w-36 max-w-36 min-w-36",Cell:o.BarTimeseriesCell,cellFormatter:l.formatDuration},{Header:"P75 TTFT",accessor:"p75timeToFirstToken",columnClassName:"w-28 max-w-32 min-w-28",Cell:o.BarTimeseriesCell,cellFormatter:l.formatDuration},{Header:"Cost",accessor:"cost",columnAlignment:"right",columnClassName:"w-28 max-w-32 min-w-28",Cell:o.NumericCell,cellFormatter:l.formatNumberUsd}],[]);return(0,a.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,a.jsxs)(t.CardsWrapper,{children:[(0,a.jsx)(c.ShareDomCopy,{title:"AI Requests by Model",children:(0,a.jsx)(t.ChartCard,{children:(0,a.jsx)(r.AiRequestByModel,{projectDataOnly:!0})})}),(0,a.jsx)(c.ShareDomCopy,{title:"AI Tokens",children:(0,a.jsx)(t.ChartCard,{children:(0,a.jsx)(n.AiTokens,{projectDataOnly:!0})})}),(0,a.jsx)(c.ShareDomCopy,{title:"AI Input Tokens",children:(0,a.jsx)(t.ChartCard,{children:(0,a.jsx)(g.AiInputTokens,{projectDataOnly:!0})})}),(0,a.jsx)(c.ShareDomCopy,{title:"AI Output Tokens",children:(0,a.jsx)(t.ChartCard,{children:(0,a.jsx)(p.AiOutputTokens,{projectDataOnly:!0})})})]}),(0,a.jsx)(c.ShareDomCopy,{title:"AI Usage",children:(0,a.jsx)(m.SonarTable,{columns:y,data:C??[],defaultSort:[{id:"p75DurationMS",desc:!0}],getHoveredValue:e=>e?.aiModel,isLoading:S,plugins:[d.useGlobalFilter,d.useSortBy,d.usePagination]})})]})}e.s(["SonarDashboard",()=>S])}]);

//# debugId=410bd569-70b2-7b6c-04e9-29ab4ba42d3d
//# sourceMappingURL=1f6c549a06b3651a.js.map