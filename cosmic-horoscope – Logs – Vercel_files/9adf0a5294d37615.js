;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="aef12ac3-ff53-3e91-2b31-52c8b2150217")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,6806493,e=>{"use strict";var s=e.i(8711407),l=e.i(1176592),a=e.i(8522580),i=e.i(5255926),n=e.i(57106),t=e.i(5601342),r=e.i(4670733),c=e.i(1717203),o=e.i(2006191),d=e.i(4597921),u=e.i(3306538),x=e.i(2504781),h=e.i(1906681),m=e.i(9523111),f=e.i(7825701),p=e.i(9138164);let j=(0,e.i(9334638).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M14.5 3C14.5 3.82843 13.8284 4.5 13 4.5C12.1716 4.5 11.5 3.82843 11.5 3C11.5 2.17157 12.1716 1.5 13 1.5C13.8284 1.5 14.5 2.17157 14.5 3ZM13.5 5.95852C13.3374 5.9858 13.1704 6 13 6C11.3431 6 10 4.65685 10 3C10 2.82964 10.0142 2.6626 10.0415 2.5H4.75C3.50736 2.5 2.5 3.50736 2.5 4.75V11.25C2.5 12.4926 3.50736 13.5 4.75 13.5H11.25C12.4926 13.5 13.5 12.4926 13.5 11.25V5.95852ZM15 5.23611V11.25C15 13.3211 13.3211 15 11.25 15H4.75C2.67893 15 1 13.3211 1 11.25V4.75C1 2.67893 2.67893 1 4.75 1H10.7639C11.3132 0.386251 12.1115 0 13 0C14.6569 0 16 1.34315 16 3C16 3.8885 15.6137 4.68679 15 5.23611Z" fill="currentColor"/>');var b=e.i(386648),g=e.i(7171047),N=e.i(7917902),v=e.i(8248823),y=e.i(8674454),C=e.i(6694387),w=e.i(4991687),k=e.i(8459493),T=e.i(8735244),S=e.i(455575),M=e.i(6318858),I=e.i(2560270),E=e.i(277234),P=e.i(4244280),_=e.i(5140444),O=e.i(9095583),A=e.i(6143247),H=e.i(9722978);function D(e){let{teamId:a,className:n}=e,[t,r]=(0,l.useState)(!1),[c,o]=(0,l.useState)("primary"),{user:d,isLoading:u}=(0,_.useUser)(),{data:x,isLoading:h}=(0,O.useEmailNotifications)();(0,l.useEffect)(()=>{a&&x&&d&&o(x.rules[a]?.email??"primary")},[a,x,d]);let m=async(e,s)=>{o(e),r(!0);try{let s=await (0,E.fetchAPI)(P.API_NOTIFICATION_RULES,{method:"PATCH",body:JSON.stringify({teamId:a,email:e})});if(s.error)throw Error((0,v.normalizeError)(s.error).message);o(e),S.toasts.success({text:"Notification email updated successfully."})}catch(l){o(s);let e=(0,v.normalizeError)(l);S.toasts.error({text:`Failed to update notification email. Error: ${e.message}`})}finally{r(!1)}},f=async e=>{o("primary"),r(!0);try{let e=await (0,E.fetchAPI)(P.API_NOTIFICATION_RULES,{method:"DELETE",body:JSON.stringify({teamId:a})});if(e.error)throw Error((0,v.normalizeError)(e.error).message);S.toasts.success({text:"Notification email updated successfully."})}catch(l){o(e);let s=(0,v.normalizeError)(l);S.toasts.error({text:`Failed to update notification email. Error: ${s.message}`})}finally{r(!1)}},p=d?[d.email,...d.secondaryEmails?.filter(e=>{let{verified:s}=e;return s}).map(e=>{let{email:s}=e;return s})??[]]:[];return(0,s.jsx)(i.Skeleton,{show:!a||u||h,children:(0,s.jsxs)(w.MenuContainer,{children:[(0,s.jsx)(C.MenuButton,{align:"start","aria-label":"Select notification email",className:(0,A.cn)("w-full",n),disabled:t,size:"small",suffix:(0,s.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-initial pr-1",children:t?(0,s.jsx)(T.Spinner,{}):(0,s.jsx)(I.ChevronDown,{})}),svgOnly:!0,type:"tertiary",typeName:"button",children:(0,s.jsx)("p",{className:(0,H.default)("text-copy-14 overflow-hidden text-ellipsis",t?"text-gray-600":void 0),title:d?.email,children:"primary"===c?`Primary Email (${d?.email})`:c})}),(0,s.jsxs)(y.Menu,{style:{minWidth:"320px"},children:[(0,s.jsx)(k.MenuItem,{onClick:()=>void f(c),suffix:"primary"===c?(0,s.jsx)(M.Check,{}):null,children:(0,s.jsxs)("p",{className:"text-copy-14 overflow-hidden text-ellipsis text-nowrap",title:d?.email,children:["Primary Email (",d?.email,")"]})},"primary"),p.map(e=>(0,s.jsx)(k.MenuItem,{onClick:()=>void m(e,c),suffix:c===e?(0,s.jsx)(M.Check,{}):null,children:(0,s.jsx)("p",{className:"text-copy-14 overflow-hidden text-ellipsis text-nowrap",title:e,children:e})},e))]})]})})}var $=e.i(1229489),R=e.i(1138726),G=e.i(119294),z=e.i(6352514),B=e.i(6933680);let L=[{name:"Web",channel:"in_app_feed"},{name:"Email",channel:"email"},{name:"SMS",channel:"sms"},{name:"Push",channel:"push"}],V=L.map(e=>e.channel);function F(e,s,l,a,i,n){i.setGroup({uri:a,channels:[s],enabled:!l}).then(()=>{S.toasts.success("Change saved")}).catch(()=>{S.toasts.error("Error saving change")}),G.analytics.track(z.AnalyticsEvent.NOTIFICATIONS_PREF_CHANGED,{channel:s,action:l?"disable":"enable",uri:a,category:e,teamId:n??"none"})}function W(e,s){let l=new Set;for(let a of V.filter(e=>"sms"!==e||(0,B.hasGroupChannel)(s,"sms"))){let i=function(e,s){let{group:l,channel:a}=s;return e[`${l.uri}_${a}`]}(e,{group:s,channel:a});if(i)for(let e of i)l.add(e)}return Array.from(l)}function U(e){let{setting:s,channel:l}=e;return!!s&&"boolean"!=typeof s&&(s.channel_types[l]??!1)}function q(e){let{channel:l,teamId:a,userId:i,onChange:n,checked:r,...c}=e,o=(0,t.usePreferences)();async function d(e){try{await o.setChannel({channels:[l],enabled:e}),n?.(e);let s=L.find(e=>e.channel===l)?.name,t=`${s} notifications ${e?"enabled":"disabled"}`;o.preferenceSet&&(t=`${t} for you on this team`),S.toasts.success(t),G.analytics.track(z.AnalyticsEvent.NOTIFICATIONS_PREF_CHANGED,{channel:l,action:e?"enable":"disable",teamId:a,uri:"NONE",category:"NONE",user:i??"none"})}catch{S.toasts.error("Error saving change")}}return(0,s.jsx)(h.Toggle,{checked:r??o.isChannelEnabled(l),onChange:d,...c})}var K=e.i(4005781),Z=e.i(8042625);function J(e){return U({setting:e?.workflows?.["daily-usage-overage-summary"],channel:"email"})?"daily":"weekly"}function Y(e){let{team:s}=e;return(0,K.default)("/v1/notifications/preferences",async(e,l)=>{let{arg:a}=l;return await (0,E.fetchAPI)(`${e}${(0,Z.encode)({teamId:s.id})}`,{method:"PUT",body:{cadence:a.cadence},throwOnHTTPError:!0})})}var Q=e.i(3500331),X=e.i(5326905),ee=e.i(3869281),es=e.i(1918911),el=e.i(2573136);function ea(){let e=(0,l.useRef)(null),[a,i]=(0,l.useState)(""),n=(0,l.useDeferredValue)(a),{projects:r=[],loadMore:c,isLoadingMore:o,isLoading:d,isValidating:u,hasMore:x}=(0,el.useDashboardProjects)({limit:50,sort:"updatedAt",search:n,options:{keepPreviousData:!0}}),{mutedProjectIds:h,setMuteProject:m}=(0,t.usePreferences)();async function f(e,s){try{await m(e.id,s),S.toasts.success(`Notifications ${s?"disabled":"enabled"} for ${e.name}`)}catch{S.toasts.error("Error saving change")}}(0,l.useEffect)(()=>{let s=e.current;if(!s)return;let l=new IntersectionObserver(e=>{let[s=null]=e;s&&!o&&x&&s.isIntersecting&&c()});return l.observe(s),()=>l.disconnect()},[e.current,c,o,x]);let p=h.length;return(0,s.jsxs)(w.MenuContainer,{closeOnSelect:!1,children:[(0,s.jsx)(C.MenuButton,{"aria-label":"Push notification preferences",type:"tertiary",shape:"square",suffix:(0,s.jsx)(es.ChevronUpDown,{}),className:"!w-fit",size:"small",disabled:d,children:d?"Loading":p>0?`${p} ${1===p?"project":"projects"}`:"No projects"}),(0,s.jsxs)(y.Menu,{className:"min-w-[275px] max-h-[300px] overflow-y-auto relative scrollbar-thin",portalClassName:"overflow-hidden shadow-sm rounded-lg",children:[(0,s.jsxs)(k.MenuItem,{innerMenuItemClassName:"h-9 data-[selected]:bg-transparent sticky top-0 isolate z-10 after:content-[''] after:absolute after:inset-0 after:-m-2.5 after:bg-background-100",children:[(0,s.jsx)(Q.Input,{innerWrapperClassName:"w-full z-10 shadow-none hover:!shadow-none [&&]:focus-within:!shadow-none","aria-labelledby":"search",typeName:"search",size:"small",value:a,placeholder:"Search projects…",onChange:e=>i(e.target.value)}),u&&!o?(0,s.jsx)(T.Spinner,{wrapperClassName:"absolute z-20 top-2.5 right-3"}):null]}),(0,s.jsx)(X.MenuDivider,{className:"sticky top-[46px]"}),r.map(e=>{let l=h.includes(e.id);return(0,s.jsx)(k.MenuItem,{onClick:()=>{f(e,!l)},innerMenuItemClassName:"h-8",children:(0,s.jsxs)("div",{className:"flex w-full items-center justify-between gap-3",children:[(0,s.jsx)(ee.Checkbox,{checked:l,className:"pointer-events-none",readOnly:!0}),(0,s.jsx)("div",{className:"text-label-13 flex-1 truncate",title:e.name,children:e.name})]})},e.id)}),(0,s.jsx)("li",{ref:e,className:(0,A.cn)("flex items-center justify-center",{hidden:!x}),children:(0,s.jsx)(T.Spinner,{})})]})]})}var ei=e.i(3063078),en=e.i(6891161),et=e.i(5883567),er=e.i(3353711),ec=e.i(6857421),eo=e.i(923772),ed=e.i(2781254),eu=e.i(1230902);function ex(){let{subscriptions:e,deleteSubscription:l}=(0,ei.usePushNotifications)(),a=(0,ed.useIsVercelian)(),i=e.length>0;return(0,s.jsxs)("div",{className:"flex flex-col gap-2 overflow-hidden",children:[i?null:"No active subscriptions",i?(0,s.jsxs)(ec.TableRoot,{className:"w-full table-fixed",children:[(0,s.jsxs)(ec.TableColgroup,{children:[(0,s.jsx)(ec.TableCol,{className:"w-[80%]"}),(0,s.jsx)(ec.TableCol,{className:"w-[20%]"}),(0,s.jsx)(ec.TableCol,{className:"w-[60px] text-right"})]}),(0,s.jsx)(ec.TableHeader,{children:(0,s.jsxs)(ec.TableRow,{children:[(0,s.jsx)(ec.TableHead,{children:"Device"}),(0,s.jsx)(ec.TableHead,{children:"Created At"}),(0,s.jsx)(ec.TableHead,{children:"Action"})]})}),(0,s.jsx)(ec.TableBody,{bordered:!0,children:e.map(e=>(0,s.jsxs)(ec.TableRow,{children:[(0,s.jsx)(ec.TableCell,{className:"truncate",children:(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)("div",{className:"font-mono",children:function(e){let{browser:s,device:l,os:a}=e;return s&&l&&a?`${s} (${l} ${a})`:"Unknown"}(e)}),a?(0,s.jsx)("div",{className:"text-sm text-gray-700",children:e.origin}):null]})}),(0,s.jsx)(ec.TableCell,{children:(0,eu.format)(new Date(Number.parseInt(e.createdAt,10)),"MMM d HH:mm")}),(0,s.jsx)(ec.TableCell,{align:"right",children:(0,s.jsx)(x.Button,{className:"inline-block","aria-label":"Remove push notification subscription",type:"tertiary",shape:"square",size:"tiny",svgOnly:!0,onClick:()=>{l(e)},children:(0,s.jsx)(eo.Trash,{color:"red-900"})})})]},e.endpoint))})]}):null]})}var eh=e.i(5468328),em=e.i(3069824),ef=e.i(261950),ep=e.i(6401841),ej=e.i(9871283),eb=e.i(3348003),eg=e.i(8479701);function eN(){let{isSubscribed:e}=(0,ei.usePushNotifications)(),l=(0,eb.useNotificationPermission)(),a=(0,eg.isNotificationDisabled)(l);return(0,s.jsxs)("span",{className:"relative",children:[(0,s.jsx)("div",{className:(0,H.default)("absolute top-0 right-0 min-w-fit rounded-full size-1.5 border border-white opacity-0 transition-opacity duration-1000",{"bg-red-700":a,"bg-amber-700":!a,"opacity-100":a||!e})}),(0,s.jsx)(p.SettingsGear,{})]})}function ev(e){let{setShowSubscriptionsModal:l,setShowHomeScreenModal:a}=e,{isSubscribed:i,subscribeUser:n}=(0,ei.usePushNotifications)(),t=(0,eb.useNotificationPermission)(),r=(0,eg.isNotificationDisabled)(t),c=(0,ej.useIOSPushDisabled)();return(0,s.jsxs)(w.MenuContainer,{children:[(0,s.jsx)(C.MenuButton,{className:"relative","aria-label":"Push notification settings",type:"tertiary",shape:"square",svgOnly:!0,size:"small",children:(0,s.jsx)(eN,{})}),(0,s.jsxs)(y.Menu,{className:"min-w-[200px]",children:[c?(0,s.jsx)(k.MenuItem,{onClick:()=>{a(!0),l(!1)},innerMenuItemClassName:"data-[selected]:bg-transparent",children:(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,s.jsx)(er.Share,{}),"Install App"]})}):null,r?(0,s.jsx)(k.MenuItem,{onClick:n,children:(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,s.jsx)(ep.Stop,{color:"red-900"}),(0,s.jsx)("span",{className:"text-red-900",children:"Notifications Blocked"})]})}):null,i||r||c?null:(0,s.jsx)(k.MenuItem,{onClick:n,children:(0,s.jsx)(eh.Tooltip,{desktopOnly:!0,text:"Click to subscribe to notifications for this browser.",children:(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,s.jsx)(ef.ToggleOff,{}),"Subscribe"]})})}),i?(0,s.jsx)(k.MenuItem,{innerMenuItemClassName:"data-[selected]:bg-transparent cursor-default",children:(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,s.jsx)(M.Check,{}),"Subscribed"]})}):null,(0,s.jsx)(X.MenuDivider,{className:"sticky top-[50px]"}),(0,s.jsx)(k.MenuItem,{onClick:()=>{l(!0)},children:(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,s.jsx)(em.UserSettings,{}),"Manage Subscriptions"]})})]})]})}function ey(e){let{teamId:a,userId:i}=e,[n,t]=(0,l.useState)(!1),[r,c]=(0,l.useState)(!1),{isSubscribed:o,subscribeUser:d,unsubscribeUser:u,isMutating:x,subscriptions:h}=(0,ei.usePushNotifications)(),m=(0,ej.useIOSPushDisabled)(),f=h.length>0;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,s.jsx)(ev,{setShowHomeScreenModal:c,setShowSubscriptionsModal:t}),(0,s.jsx)(q,{className:"p-0 [&_*]:!cursor-pointer",channel:"push",teamId:a,userId:i,checked:!!f&&void 0,size:"large",disabled:m||!f,onMouseDown:()=>{m?c(!0):f||d()}})]}),(0,s.jsxs)(en.Modal.Modal,{active:n,onClickOutside:()=>{t(!1)},sticky:!0,children:[(0,s.jsxs)(en.Modal.Body,{children:[(0,s.jsx)(en.Modal.Header,{children:(0,s.jsx)(en.Modal.Title,{children:"Push Subscriptions"})}),(0,s.jsx)(ex,{})]}),(0,s.jsxs)(en.Modal.Actions,{children:[(0,s.jsx)(en.Modal.Action,{onClick:()=>t(!1),type:"secondary",children:"Cancel"}),o?(0,s.jsx)(en.Modal.Action,{onClick:u,disabled:x,children:"Unsubscribe"}):(0,s.jsx)(en.Modal.Action,{onClick:d,disabled:x||m,children:"Subscribe"})]})]}),(0,s.jsxs)(en.Modal.Modal,{active:r,onClickOutside:()=>{c(!1)},sticky:!0,children:[(0,s.jsxs)(en.Modal.Body,{children:[(0,s.jsx)(en.Modal.Header,{children:(0,s.jsx)(en.Modal.Title,{children:"Install Vercel App"})}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("p",{className:"text-copy-14",children:"To receive push notifications on your iOS device:"}),(0,s.jsxs)("ul",{className:"text-copy-14 list-disc ml-4 [&_li]:py-1",children:[(0,s.jsx)("li",{children:(0,s.jsxs)("div",{className:"inline-flex gap-1 items-center",children:["Tap the ",(0,s.jsx)(er.Share,{className:"inline-flex align-middle"})," share button"]})}),(0,s.jsx)("li",{children:(0,s.jsxs)("div",{className:"inline-flex gap-1 items-center",children:["Select ",(0,s.jsx)(et.PlusCircle,{className:"inline-flex  align-middle"})," ","Add to Home Screen"]})}),(0,s.jsx)("li",{children:"Open the app, navigate back to this page to continue"})]})]})]}),(0,s.jsx)(en.Modal.Actions,{className:"justify-center",children:(0,s.jsx)(en.Modal.Action,{className:"w-full",onClick:()=>c(!1),type:"secondary",children:"Close"})})]})]})}function eC(){let{isSubscribed:e}=(0,ei.usePushNotifications)(),l=(0,eb.useNotificationPermission)(),a=(0,eg.isNotificationDisabled)(l);return"unsupported"===l?(0,s.jsx)(u.Badge,{variant:"amber-subtle",size:"sm",children:"Install App"}):a?(0,s.jsx)(u.Badge,{variant:"red-subtle",size:"sm",children:"Notifications Blocked"}):e?null:(0,s.jsx)(u.Badge,{variant:"amber-subtle",size:"sm",children:"Subscribe Device"})}function ew(e){let{team:a,isNotificationRulesFlagEnabled:i,isWebPushNotificationsEnabled:r}=e,c=(0,t.usePreferences)(),o=(0,N.useAccount)(),[d,u]=(0,l.useState)(!1),h=c.userPreferences.phone_number,{trigger:v}=Y({team:a});return(0,s.jsxs)("div",{className:"material-base flex flex-col gap-4 px-5 py-4",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex flex-1 items-center gap-3",children:[(0,s.jsx)(eS,{children:(0,s.jsx)(g.Bell,{})}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("p",{className:"text-label-14 m-0 p-0 font-medium",children:"Web"}),(0,s.jsx)("p",{className:"text-copy-14 m-0 p-0",children:"Receive notifications in the Vercel dashboard."})]})]}),(0,s.jsx)("div",{className:"ml-auto flex items-center gap-2",children:(0,s.jsx)(q,{className:"p-0",channel:"in_app_feed",teamId:a.id,userId:o.user?.uid,size:"large"})})]}),(0,s.jsx)("hr",{className:"m-0 h-0 border-b border-t-0 border-gray-200 p-0"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex min-w-0 items-center gap-3",children:[(0,s.jsx)(eS,{children:(0,s.jsx)(m.Email,{})}),(0,s.jsxs)("div",{className:"flex min-w-0 flex-col",children:[(0,s.jsx)("p",{className:"text-label-14 m-0 p-0 font-medium",children:"Email"}),i?(0,s.jsx)("div",{className:"relative -left-1",children:(0,s.jsx)(D,{teamId:a.id,className:"!h-[20px] !px-0 [&>span]:pl-1 [&>span]:pr-0"})}):o.user?.email]})]}),(0,s.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[(0,s.jsx)(n.ButtonLink,{"aria-label":"Edit email",href:"/account/settings#email",type:"tertiary",shape:"square",svgOnly:!0,size:"small",className:"shrink-0",children:(0,s.jsx)(p.SettingsGear,{})}),(0,s.jsx)(q,{className:"p-0",channel:"email",teamId:a.id,userId:o.user?.uid,size:"large",onChange:e=>{let s=null;e&&(s=J(c.preferences)),v({cadence:s})}})]})]}),r?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("hr",{className:"m-0 h-0 border-b border-t-0 border-gray-200 p-0"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex min-w-0 items-center gap-3",children:[(0,s.jsx)(eS,{children:(0,s.jsx)(j,{})}),(0,s.jsxs)("div",{className:"flex min-w-0 flex-col",children:[(0,s.jsxs)("p",{className:"text-label-14 m-0 p-0 font-medium flex gap-1",children:["Push",(0,s.jsx)(eC,{})]}),(0,s.jsx)("p",{className:"text-copy-14 m-0 p-0",children:"Receive notifications on desktop or mobile."})]})]}),(0,s.jsx)("div",{className:"ml-auto flex items-center gap-2",children:(0,s.jsx)(ey,{teamId:a.id,userId:o.user?.uid})})]})]}):null,(0,s.jsx)("hr",{className:"m-0 h-0 border-b border-t-0 border-gray-200 p-0"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(eS,{children:(0,s.jsx)(f.Phone,{})}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("p",{className:"text-label-14 m-0 p-0 font-medium",children:"SMS"}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:h?(0,s.jsx)($.default,{autoHideDialCode:!0,allowDropdown:!1,format:!0,formatOnInit:!0,nationalMode:!1,onPhoneNumberChange:()=>{},onSelectFlag:()=>{},useMobileFullscreenDropdown:!0,placeholder:"No phone number set",value:h,flagClassName:"!w-[20px]",inputWrapperClassName:"!shadow-none",inputClassName:"!text-gray-1000 ![-webkit-text-fill-color:unset] !bg-transparent !h-[20px] !pl-[28px]"}):(0,s.jsx)("p",{className:"text-copy-14 m-0 p-0 text-gray-700",children:"No phone number."})})]})]}),(0,s.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[(0,s.jsx)(x.Button,{"aria-label":"Edit phone",onClick:()=>u(!0),type:"tertiary",shape:"square",svgOnly:!0,size:"small",className:"shrink-0",children:(0,s.jsx)(p.SettingsGear,{})}),(0,s.jsx)(q,{className:"ml-auto p-0",channel:"sms",teamId:a.id,userId:o.user?.uid,onMouseDown:e=>{h||(e.preventDefault(),u(!0))},size:"large"})]})]}),d?(0,s.jsx)(R.default,{onClose:()=>{u(!1)},onVerified:()=>{c.mutateUserPreferences(),u(!1)}}):null]}),r?(0,s.jsx)("div",{className:"-mx-5 -mb-4 px-5 bg-background-200 py-4 rounded-b border-t",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex min-w-0 items-center gap-3",children:[(0,s.jsx)(eS,{children:(0,s.jsx)(b.BellOff,{})}),(0,s.jsxs)("div",{className:"flex min-w-0 flex-col",children:[(0,s.jsx)("p",{className:"text-label-14 m-0 p-0 font-medium",children:"Mute"}),(0,s.jsx)("p",{className:"text-copy-14 m-0 p-0",children:"Select projects to mute notifications for."})]})]}),(0,s.jsx)("div",{className:"ml-auto flex items-center gap-2",children:(0,s.jsx)(ea,{})})]})}):null]})}function ek(e){let{isWebPushNotificationsEnabled:l}=e;return(0,s.jsxs)("div",{className:"material-base flex flex-col gap-4 px-5 py-4",children:[(0,s.jsx)(eT,{}),(0,s.jsx)("hr",{className:"m-0 h-0 border-b border-t-0 border-gray-200 p-0"}),(0,s.jsx)(eT,{}),l?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("hr",{className:"m-0 h-0 border-b border-t-0 border-gray-200 p-0"}),(0,s.jsx)(eT,{})]}):null,(0,s.jsx)("hr",{className:"m-0 h-0 border-b border-t-0 border-gray-200 p-0"}),(0,s.jsx)(eT,{}),l?(0,s.jsx)("div",{className:"-mx-5 -mb-4 px-5 bg-background-200 py-4 rounded-b border-t",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(i.Skeleton,{width:32,height:32,className:"shrink-0",rounded:!0}),(0,s.jsxs)("div",{className:"flex flex-1 flex-col",children:[(0,s.jsx)(i.Skeleton,{width:60,height:18,boxHeight:20,vcenter:!0}),(0,s.jsx)(i.Skeleton,{width:"80%",className:"md:max-w-[300px]",height:18,boxHeight:20,vcenter:!0})]}),(0,s.jsx)("div",{className:"ml-auto flex items-center gap-2",children:(0,s.jsx)(i.Skeleton,{width:120,height:32,boxHeight:32,vcenter:!0})})]})}):null]})}function eT(){return(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex flex-1 items-center gap-3",children:[(0,s.jsx)(i.Skeleton,{width:32,height:32,className:"shrink-0",rounded:!0}),(0,s.jsxs)("div",{className:"flex flex-1 flex-col",children:[(0,s.jsx)(i.Skeleton,{width:60,height:18,boxHeight:20,vcenter:!0}),(0,s.jsx)(i.Skeleton,{width:"80%",className:"md:max-w-[300px]",height:18,boxHeight:20,vcenter:!0})]})]}),(0,s.jsx)("div",{className:"ml-auto flex items-center gap-2",children:(0,s.jsx)(h.Toggle,{checked:!1,className:"ml-auto p-0",disabled:!0,size:"large"})})]})}function eS(e){let{children:l}=e;return(0,s.jsx)("span",{className:"hidden size-[32px] items-center justify-center rounded-full border border-solid border-gray-alpha-400 bg-gray-100 p-1 md:flex",children:l})}function eM(e){let{group:s,channels:a}=e,i=(0,t.usePreferences)();return(0,l.useCallback)(async e=>{try{await i.mutateOveragePreferences({percentages:e,uri:s.uri,channels:a,workflowId:B.UNBUNDLED_WORKFLOW_IDS[s.uri]});let l=a.some(e=>i.isGroupEnabled(s.uri,e));0===e.length?await i.setGroup({uri:s.uri,channels:a,enabled:!1}):l||await i.setGroup({uri:s.uri,channels:a.filter(e=>"sms"!==e||!!i.userPreferences.phone_number),enabled:!0}),S.toasts.success({text:"Change saved",preserve:!1})}catch(e){S.toasts.error(`Error saving change: ${e.message}`)}},[i,s,a])}function eI(e){let l,{group:a,channels:i,value:n,invoiceItem:t}=e,r=(l=B.OVERAGE_DEFAULTS[a.uri])?{label:"Notify at",options:l.map(e=>({name:`${e}%`,value:e})),multiSelect:!0}:null,c=eM({group:a,channels:i});return r?(0,s.jsxs)(w.MenuContainer,{closeOnSelect:!1,children:[(0,s.jsx)(C.MenuButton,{"aria-label":"Preferences",type:"tertiary",shape:"square",svgOnly:!0,size:"tiny",children:(0,s.jsx)(p.SettingsGear,{})}),(0,s.jsxs)(y.Menu,{className:"min-w-[200px]",children:[r.label?(0,s.jsx)(k.MenuItem,{className:"text-gray-900",disabled:!0,children:r.label}):null,r.options.map(e=>{let l=function(e){let{invoiceItem:s,percent:l}=e;return s?Math.abs(Math.ceil((l<100?0:l/100*s.threshold-s.threshold)/s.batch)*s.price/100):null}({invoiceItem:t,percent:e.value});return(0,s.jsx)(k.MenuItem,{onClick:()=>{n.includes(e.value)?c(n.filter(s=>s!==e.value)):c([...n,e.value])},children:(0,s.jsxs)("div",{className:"flex w-full items-center justify-between gap-3",children:[(0,s.jsx)("div",{className:"text-label-13 flex-1",children:e.name}),l?(0,s.jsxs)("div",{className:"text-label-13 text-gray-700",children:["$",l]}):null,n.includes(e.value)?(0,s.jsx)(M.Check,{}):null]})},e.value)})]})]}):null}function eE(e){let{group:l,channels:a,defaultValue:i,onChange:n}=e,r=(0,t.usePreferences)(),{workflowIds:c=[]}=l,o=i;for(let e of c)if(a.some(s=>U({setting:r.preferences?.workflows?.[e],channel:s}))){o=e;break}async function d(e){try{let s={};for(let l of c)for(let i of a)s[l]={channel_types:{[i]:e===l}};if(!r.preferences)return;let{preferences:i}=r;await r.setPreferences({preferences:{...i,categories:{...i.categories,[l.uri]:{channel_types:{email:!0}}},workflows:{...i.workflows,...s}}}),n?.(e),S.toasts.success({text:"Change saved",preserve:!1})}catch(e){S.toasts.error(`Error saving change: ${e.message}`)}}return(0,s.jsxs)(w.MenuContainer,{closeOnSelect:!0,children:[(0,s.jsx)(C.MenuButton,{"aria-label":"Preferences",type:"tertiary",shape:"square",svgOnly:!0,size:"tiny",children:(0,s.jsx)(p.SettingsGear,{})}),(0,s.jsx)(y.Menu,{children:c.map(e=>(0,s.jsx)(k.MenuItem,{onClick:()=>{d(e)},children:(0,s.jsxs)("div",{className:"text-label-13 flex w-full items-center justify-between gap-3",children:[(0,B.getWorkflowIdDisplayName)(e),o===e?(0,s.jsx)(M.Check,{}):null]})},e))})]})}function eP(e){let{uri:l,channel:a,category:i,teamId:n,onChange:r,preferenceNotificationId:c,...o}=e,d=(0,t.usePreferences)(),u=d.isGroupEnabled(l,a),x=!d.isChannelEnabled(a)||"spendManagement"===l&&!d.activeBudget;return(0,s.jsx)(ee.Checkbox,{checked:u,disabled:x,onChange:function(e){F(i,a,u,l,d,n),r?.(e)},...o})}var e_=e.i(6753472),eO=e.i(6159310);let eA=[50,75,100];function eH(e){let{group:l,channels:a,value:i}=e,r=(0,t.usePreferences)(),c=(0,eO.useLink)(),o=eM({group:l,channels:a});return(0,s.jsxs)(w.MenuContainer,{closeOnSelect:!1,children:[(0,s.jsx)(C.MenuButton,{"aria-label":"Preferences",type:"tertiary",shape:"square",svgOnly:!0,size:"tiny",children:(0,s.jsx)(p.SettingsGear,{})}),(0,s.jsxs)(y.Menu,{className:"min-w-[275px] [&>li:first-child]:h-[60px]",children:[(0,s.jsx)(k.MenuItem,{children:(0,s.jsxs)(n.Link,{className:"flex flex-col gap-1",href:c("/[teamSlug]/~/settings/billing#spend-management"),children:[(0,s.jsxs)("div",{className:"text-label-14 font-medium",children:["Spend Management is"," ",r.activeBudget?"enabled":"disabled"]}),(0,s.jsx)("div",{className:"text-label-13 text-gray-900",children:"Manage it in the team's billing settings"})]})}),(0,s.jsx)(X.MenuDivider,{}),(0,s.jsx)(k.MenuItem,{className:"text-gray-900",disabled:!0,children:"Notify at"}),eA.map(e=>(0,s.jsx)(k.MenuItem,{onClick:()=>{o(i.includes(e)?i.filter(s=>s!==e):[...i,e])},children:(0,s.jsxs)("div",{className:"flex w-full items-center justify-between gap-3",children:[(0,s.jsxs)("div",{className:"text-label-13 flex-1",children:[e,"%"]}),i.includes(e)?(0,s.jsx)(M.Check,{}):null]})},e))]})]})}var eD=e.i(8264347);function e$(e){let{team:a,isWebPushNotificationsEnabled:i}=e,n=(0,t.usePreferences)(),[r,c]=(0,l.useState)(!1),o=!!n.userPreferences.phone_number,{isLoading:d,preferenceItems:u}=(0,e_.usePreferenceItems)({team:a}),{trigger:x}=Y({team:a}),h=d||n.isLoading;(0,l.useEffect)(()=>{h||n.setPrefsLoaded()},[n,h]);let{overagePreferences:m}=(0,l.useMemo)(()=>{let e=u.filter(e=>["Usage","Team"].includes(e.name)).flatMap(e=>e.groups.filter(e=>e.configurable));return function(e){let{userData:s,categories:l,team:a}=e,i=!1,n={};return l.forEach(e=>{L.forEach(l=>{let t=a?function(e,s){let{group:l,channel:a,tenant:i}=s;return e[`overage_${l.uri}_${a}_${i}`]}(s,{group:e,channel:l.channel,tenant:a.id}):void 0;if(t)n[`${e.uri}_${l.channel}`]=t;else{if(a?.billing?.invoiceItems&&e.uri in B.OVERAGE_TIER_DEFAULTS){n[`${e.uri}_${l.channel}`]=B.OVERAGE_TIER_DEFAULTS[e.uri][(0,B.getTierForOverageItem)(a,e.uri)],i=!0;return}n[`${e.uri}_${l.channel}`]=B.OVERAGE_DEFAULTS[e.uri],i=!0}})}),{overagePreferences:n,requiresUpdate:i}}({userData:n.userPreferences,categories:e,team:a})},[u,n,a]);return(0,s.jsx)("div",{className:"flex flex-col gap-6",children:u.map(e=>{if("Alerts"===e.name)return(0,s.jsx)(eD.AlertNotifications,{team:a},e.name);let l=(0,B.hasViewChannel)(e,"email"),t=(0,B.hasViewChannel)(e,"in_app_feed"),d=(0,B.hasViewChannel)(e,"sms"),u=(0,B.hasViewChannel)(e,"push")&&i;return l||t||d||u?(0,s.jsxs)(ec.TableRoot,{className:"text-foreground [&_tbody[aria-hidden]]:hidden first:[&_td]:pl-0 first:[&_th]:pl-0",children:[(0,s.jsxs)(ec.TableColgroup,{children:[(0,s.jsx)(ec.TableCol,{className:"flex-1"}),d?(0,s.jsx)(ec.TableCol,{className:"w-[50px]"}):null,u?(0,s.jsx)(ec.TableCol,{className:"w-[50px]"}):null,t?(0,s.jsx)(ec.TableCol,{className:"w-[50px]"}):null,l?(0,s.jsx)(ec.TableCol,{className:"w-[50px]"}):null]}),(0,s.jsx)(ec.TableHeader,{children:(0,s.jsxs)(ec.TableRow,{children:[(0,s.jsx)(ec.TableHead,{children:e.name}),d?(0,s.jsx)(ec.TableHead,{children:"SMS"}):null,u?(0,s.jsx)(ec.TableHead,{children:"Push"}):null,l?(0,s.jsx)(ec.TableHead,{children:"Email"}):null,t?(0,s.jsx)(ec.TableHead,{className:"whitespace-nowrap px-0",children:"Web"}):null]})}),(0,s.jsx)(ec.TableBody,{bordered:!0,children:e.groups.map(l=>{let t=(0,B.hasGroupChannel)(l,"email"),d=(0,B.hasGroupChannel)(l,"in_app_feed"),u=(0,B.hasGroupChannel)(l,"sms"),h=(0,B.hasGroupChannel)(l,"push")&&i;return t||d||u||h?(0,s.jsxs)(ec.TableRow,{className:"",children:[(0,s.jsx)(ec.TableCell,{children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[l.name,"spendManagement"!==l.uri||n.activeBudget?null:" (Disabled)",l.description?(0,s.jsx)("div",{className:"text-copy-13 text-gray-900",children:l.description}):null]}),l.configurable?"usage-overage-summary"===l.uri?(0,s.jsx)(eE,{group:l,channels:["email"],defaultValue:"weekly-usage-overage-summary",onChange:e=>{x({cadence:"daily-usage-overage-summary"===e?"daily":"weekly"})}}):"spendManagement"===l.uri?(0,s.jsx)(eH,{group:l,channels:V,value:W(m,l)}):(0,s.jsx)(eI,{group:l,channels:l.notificationChannels,value:W(m,l),invoiceItem:a.billing?.invoiceItems?.[l.uri]}):null]})}),function(e){let{view:l,group:i}=e,t=(0,B.hasViewChannel)(l,"sms"),d=(0,B.hasGroupChannel)(i,"sms");return t?d&&o?(0,s.jsx)(ec.TableCell,{className:"text-center",children:(0,s.jsx)(eP,{className:"flex items-center justify-center p-0",category:l.name,channel:"sms",teamId:a.id,uri:i.uri})}):d&&!o?(0,s.jsxs)(ec.TableCell,{className:"text-center",children:[(0,s.jsx)(ee.Checkbox,{checked:!1,readOnly:!0,onClick:()=>{c(!0)}}),r?(0,s.jsx)(R.default,{onClose:()=>{c(!1)},onVerified:()=>{F(l.name,"sms",!1,i.uri,n,a.id),n.mutateUserPreferences(),c(!r)}}):null]}):(0,s.jsx)(ec.TableCell,{}):null}({view:e,group:l}),i?(0,s.jsx)(eB,{view:e,group:l,team:a}):null,(0,B.hasGroupChannel)(l,"email")?(0,s.jsx)(ec.TableCell,{className:"!text-center",children:(0,s.jsx)(eP,{className:"flex items-center justify-center p-0",category:e.name,channel:"email",teamId:a.id,uri:l.uri,onChange:e=>{if("usage-overage-summary"===l.uri){let s=null;e.target.checked&&(s=J(n.preferences)),x({cadence:s})}},preferenceNotificationId:l.preferenceNotificationId})}):(0,B.hasViewChannel)(e,"email")?(0,s.jsx)(ec.TableCell,{className:"!text-center",children:(0,s.jsx)(ee.Checkbox,{className:"flex items-center justify-center p-0",disabled:!0})}):null,(0,B.hasGroupChannel)(l,"in_app_feed")?(0,s.jsx)(ec.TableCell,{className:"text-center",children:"usage-overage-summary"!==l.uri?(0,s.jsx)(eP,{className:"flex items-center justify-center p-0",category:e.name,channel:"in_app_feed",teamId:a.id,uri:l.uri,preferenceNotificationId:l.preferenceNotificationId}):(0,s.jsx)(ee.Checkbox,{className:"flex items-center justify-center p-0",disabled:!0})}):(0,B.hasViewChannel)(e,"in_app_feed")?(0,s.jsx)(ec.TableCell,{className:"!text-center",children:(0,s.jsx)(ee.Checkbox,{className:"flex items-center justify-center p-0",disabled:!0})}):null]},l.name):null})})]},e.name):null})})}function eR(e){let{isWebPushNotificationsEnabled:l}=e;return(0,s.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,s.jsx)(eG,{items:2,isWebPushNotificationsEnabled:l}),(0,s.jsx)(eG,{items:2,isWebPushNotificationsEnabled:l}),(0,s.jsx)(eG,{items:3,isWebPushNotificationsEnabled:l})]})}function eG(e){let{items:l,isWebPushNotificationsEnabled:a}=e;return(0,s.jsxs)(ec.TableRoot,{className:"text-foreground [&_tbody[aria-hidden]]:hidden",children:[(0,s.jsxs)(ec.TableColgroup,{children:[(0,s.jsx)(ec.TableCol,{className:"flex-1"}),a?(0,s.jsx)(ec.TableCol,{className:"w-[50px]"}):null,(0,s.jsx)(ec.TableCol,{className:"w-[50px]"}),(0,s.jsx)(ec.TableCol,{className:"w-[50px]"})]}),(0,s.jsx)(ec.TableHeader,{children:(0,s.jsxs)(ec.TableRow,{children:[(0,s.jsx)(ec.TableHead,{children:(0,s.jsx)(i.Skeleton,{width:80,height:16,boxHeight:20,vcenter:!0})}),a?(0,s.jsx)(ec.TableHead,{children:"Push"}):null,(0,s.jsx)(ec.TableHead,{children:"Email"}),(0,s.jsx)(ec.TableHead,{children:"Web"})]})}),(0,s.jsx)(ec.TableBody,{bordered:!0,children:Array(l).fill(null).map((e,l)=>(0,s.jsx)(ez,{isWebPushNotificationsEnabled:a},l))})]})}function ez(e){let{isWebPushNotificationsEnabled:l}=e;return(0,s.jsxs)(ec.TableRow,{children:[(0,s.jsx)(ec.TableCell,{children:(0,s.jsx)(i.Skeleton,{width:120,height:16,boxHeight:20,vcenter:!0})}),l?(0,s.jsx)(ec.TableCell,{className:"text-center",children:(0,s.jsx)(i.Skeleton,{width:20,height:20,vcenter:!0,className:"mx-auto"})}):null,(0,s.jsx)(ec.TableCell,{className:"text-center",children:(0,s.jsx)(i.Skeleton,{width:20,height:20,vcenter:!0,className:"mx-auto"})}),(0,s.jsx)(ec.TableCell,{className:"text-center",children:(0,s.jsx)(i.Skeleton,{width:20,height:20,vcenter:!0,className:"mx-auto"})})]})}function eB(e){let{view:l,group:a,team:i}=e,n=(0,B.hasViewChannel)(l,"push"),t=(0,B.hasGroupChannel)(a,"push");return n?t?(0,s.jsx)(ec.TableCell,{className:"text-center",children:(0,s.jsx)(eP,{className:"flex items-center justify-center p-0",category:l.name,channel:"push",teamId:i.id,uri:a.uri,preferenceNotificationId:a.preferenceNotificationId})}):(0,s.jsx)(ec.TableCell,{className:"!text-center",children:(0,s.jsx)(ee.Checkbox,{className:"flex items-center justify-center p-0",disabled:!0})}):null}var eL=e.i(3089600),eV=e.i(9668517);function eF(){let e=(0,d.useServerFlag)("enable-web-push-notifications",!1);return(0,s.jsx)(t.PreferencesProvider,{defaultLoaded:!1,fallback:(0,s.jsx)(eU,{isWebPushNotificationsEnabled:e}),children:(0,s.jsx)(eW,{isWebPushNotificationsEnabled:e})})}function eW(e){let{isWebPushNotificationsEnabled:i}=e,d=(0,eV.useTeamSlug)(),{data:u}=(0,o.useTeam)(d??""),x=(0,t.usePreferences)();!function(e){let{team:s}=e,a=(0,t.usePreferences)(),i=(0,l.useRef)(null),{preferenceItems:n}=(0,e_.usePreferenceItems)({team:s});(0,eL.default)("unsubscribe",async e=>{i.current=e}),(0,l.useEffect)(()=>{!async function(){let e=i.current;if(e&&!a.isLoading&&(i.current=null,a.isGroupEnabled(e,"email"))){let s=n.flatMap(e=>e.groups).find(s=>s.uri===e),l=s?.name??e;try{await a.setGroup({uri:e,channels:["email"],enabled:!1}),S.toasts.success(`You have been unsubscribed from ${l}.`)}catch(e){S.toasts.error(`Error unsubscribing from ${l}.`)}}}()},[a,s,n])}({team:u});let{value:h,isReady:m}=(0,r.useEmailNotificationRulesFlag)(),{isLoading:f}=(0,c.default)({teamId:u.id}),p=x.isLoading||f||!m;return(0,l.useEffect)(()=>{p||x.setPrefsLoaded()},[x,p]),(0,s.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("h3",{className:"text-heading-24 m-0 p-0",children:"Notifications"}),(0,s.jsxs)("p",{className:"text-label-14 m-0 p-0",children:["Manage your personal notification settings for the ",u.name," team."]})]}),(0,s.jsx)(l.Suspense,{fallback:(0,s.jsx)(ek,{isWebPushNotificationsEnabled:i}),children:(0,s.jsx)(ew,{team:u,isNotificationRulesFlagEnabled:h,isWebPushNotificationsEnabled:i})}),(0,s.jsx)(e$,{team:u,isWebPushNotificationsEnabled:i}),(0,s.jsxs)(a.Note,{fill:!0,type:"secondary",children:["Comment notifications are managed per deployment, change your preference via the toolbar menu."," ",(0,s.jsx)(n.Link,{external:!0,icon:!1,href:"https://vercel.com/docs/workflow-collaboration/comments/using-comments#manage-notifications",children:"Learn More →"})]})]})}function eU(e){let{isWebPushNotificationsEnabled:l}=e;return(0,s.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("h3",{className:"text-heading-24 m-0 p-0",children:"Notifications"}),(0,s.jsx)(i.Skeleton,{width:250,height:16,boxHeight:20,vcenter:!0})]}),(0,s.jsx)(ek,{isWebPushNotificationsEnabled:l}),(0,s.jsx)(eR,{isWebPushNotificationsEnabled:l})]})}e.s(["NotificationSettings",()=>eF,"NotificationSettingsSkeleton",()=>eU],6806493)}]);

//# debugId=aef12ac3-ff53-3e91-2b31-52c8b2150217
//# sourceMappingURL=d614958dcfa25507.js.map