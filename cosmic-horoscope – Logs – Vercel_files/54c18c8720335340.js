;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="0d7b9c26-4284-2ee3-8d8f-bdab145ca766")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,8180805,e=>{e.v({entity:"access-entity-module__XKufeG__entity",footer:"access-entity-module__XKufeG__footer"})},1568341,e=>{e.v({calendar:"access-filters-module__NOPx6G__calendar",menu:"access-filters-module__NOPx6G__menu"})},4151772,e=>{e.v({searchContainer:"filter-menu-module__fI7zva__searchContainer",stickySearch:"filter-menu-module__fI7zva__stickySearch"})},1027821,e=>{"use strict";var t=e.i(8711407),s=e.i(4237893),i=e.i(1176592),l=e.i(1875382),n=e.i(3924999),a=e.i(8042625),r=e.i(7917902);let c=function(){let{limit:e=10,scope:t,access:s,projectIds:l,projectNames:c,aliases:o,userIds:d,includeRequestCount:u,until:x,since:p}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{team:m,isTeam:h,user:j}=(0,r.useAccount)(),f=h?m?.id:j?.uid,g=(0,n.default)((i,n)=>f?`/api/deployments/protection-bypasses${(0,a.encode)({teamId:m?.id,limit:e,scope:t,access:s,until:n?.pagination.next||x,since:p,projectIds:l&&l.length>0?l:void 0,projectNames:c&&c.length>0?c:void 0,aliases:o&&o.length>0?o:void 0,userIds:d&&d.length>0?d:void 0,includeRequestCount:u})}`:null,async e=>{let t=await fetch(e);if(!t.ok)throw Error(t.statusText);return t.json()}),y=!!g.data,v=!!(g.data&&g.data[g.data.length-1]?.protectionBypasses?.length<e),b=(0,i.useMemo)(()=>g.data?g.data.flatMap(e=>e.protectionBypasses):[],[g.data]),w=(0,i.useMemo)(()=>g.data?g.data[0].requestCount:void 0,[g.data]),k=y&&0===b.length,N=!!(g.data&&g.size>g.data.length);return[g,{isEmpty:k,protectionBypasses:b,requestCount:w,initialDataLoaded:y,isReachingEnd:v,loadMore:()=>g.setSize(e=>e+1),isLoadingMore:N,isValidating:g.isValidating}]},o="view",d="since",u="until",x=e=>{switch(e?.get(o)){case"access":return"access";case"projects":return"projects";case"requests":return"requests";default:return null}},p=(e,t)=>{let{tab:s,projectNames:i,userIds:l,scope:n,aliases:a,since:r,until:c}=t,x=new URLSearchParams,p=s||e.get(o);p&&x.set(o,p);let m=i?i.join():e.get("p");m&&x.set("p",m);let h=a?a.join():e.get("a");h&&x.set("a",h);let j=l?l.join():e.get("u");j&&x.set("u",j);let f=n||e.get("s");null!==n&&f&&x.set("s",f);let g=r?.toString()||e.get(d);null!==r&&g&&x.set(d,g);let y=c?.toString()||e.get(u);return null!==c&&y&&x.set(u,y),x};var m=e.i(8923565),h=e.i(2064047),j=e.i(762945),f=e.i(8761240),g=e.i(2107254),y=e.i(4173901),v=e.i(8735244),b=e.i(162825);function w(e){let{swr:s,infinite:i,search:l,Skeleton:n,emptyDescription:a,emptyLabel:r}=e,{isLoadingMore:c,isReachingEnd:o,loadMore:d,initialDataLoaded:u,isEmpty:x}=i,{error:p}=s,m=!!p&&!u,j=!p&&!u,f=(0,b.useIntersectionObserverRef)(()=>{c||d()},{rootMargin:"200px 0px"});return(0,t.jsxs)(t.Fragment,{children:[m?(0,t.jsx)("div",{className:"flex flex-col items-center justify-center flex-initial m-12",children:(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"An error occurred"})}):null,x&&!(j||c)?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center gap-10 flex-initial m-12 self-center",children:[(0,t.jsx)("p",{className:"text-copy-14 text-gray-900 text-center",children:r}),(0,t.jsx)("p",{className:"text-copy-14 text-gray-900 text-center",children:a})]}):null,j?(0,t.jsx)(h.Entity.List,{children:Array(10).fill("").map((e,s)=>(0,t.jsx)(n,{},`skeleton-${s}`))}):null,(0,t.jsx)("div",{ref:m||x||o||j||c?void 0:f,className:"flex flex-col items-center justify-center flex-initial",style:{height:20,margin:"var(--geist-gap)"},children:l||m||!c?null:(0,t.jsx)(v.Spinner,{})})]})}var k=e.i(779588),N=e.i(8459493),C=e.i(5468328),S=e.i(57106),I=e.i(9386557),F=e.i(6982071),A=e.i(8896705);let P=e=>{let t=!!e.ssoProtection?.deploymentType,s=!!e.passwordProtection?.deploymentType,i=!!e.trustedIps?.deploymentType;return{vercelAuthEnabled:t,passwordProtectionEnabled:s,trustedIpsEnabled:i,isProtectionEnabled:t||s||i}};function M(e){let{project:s,filterProject:i}=e,{team:l,user:n}=(0,r.useAccount)(),a=l?.slug||n?.username||"",c=P(s),o=`/${a}/${encodeURIComponent(s.name)}/settings/deployment-protection`;return(0,t.jsx)(h.Entity,{left:(0,t.jsx)(S.Link,{href:o,children:(0,t.jsx)(A.FaviconOrFramework,{icon:O(c),project:s,right:-5})}),right:(0,t.jsxs)(k.DotsMenu,{children:[(0,t.jsx)(N.MenuItem,{href:o,isLink:!0,children:"View project settings"}),(0,t.jsx)(N.MenuItem,{onClick:()=>i("access"),children:"View project access"}),(0,t.jsx)(N.MenuItem,{onClick:()=>i("requests"),children:"View project requests"})]}),children:(0,t.jsx)(h.Entity.Content,{description:(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-3 flex-initial",children:[(0,t.jsx)("p",{className:"text-copy-14 text-gray-1000",children:(0,t.jsx)(S.Link,{href:o,variant:"underline",children:s.name})}),(0,t.jsx)(T,{...c})]})})},s.id)}function T(e){let{vercelAuthEnabled:s,passwordProtectionEnabled:i,trustedIpsEnabled:l,isProtectionEnabled:n}=e,a=[s?"Vercel Authentication":void 0,i?"Password Protection":void 0,l?"Trusted IPs":void 0].filter(Boolean);return n?(0,t.jsxs)("p",{className:"text-copy-14 text-gray-600",children:["Protected with"," ",a.join(", ").replace(/,(?=[^,]+$)/,a.length>2?", and":" and")]}):(0,t.jsx)(C.Tooltip,{forceHide:n,text:(0,t.jsxs)("p",{className:"text-label-12",children:["Protecting deployments in your project with"," ",(0,t.jsx)(S.Link,{external:!0,href:"/docs/security/deployment-protection",variant:"highlight",children:"Deployment Protection"})," ","is recommended."]}),children:(0,t.jsx)("p",{className:"text-copy-14 text-gray-600",children:(0,t.jsx)("u",{style:{cursor:"help",textDecorationStyle:"dotted",textUnderlineOffset:2},children:"Unprotected"})})})}let O=e=>{let{vercelAuthEnabled:s,passwordProtectionEnabled:i,trustedIpsEnabled:l}=e;return s?(0,t.jsx)(f.CheckCircleFill,{color:"blue-900"}):i||l?(0,t.jsx)("div",{className:"flex flex-col items-center justify-center flex-initial",style:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"var(--ds-gray-700)"},children:(0,t.jsx)(F.LockClosedSmall,{color:"background-100",size:14})}):(0,t.jsx)(I.WarningFill,{color:"amber-900"})};var U=e.i(5255926);function $(){return(0,t.jsx)(h.Entity,{left:(0,t.jsx)(A.FaviconOrFramework,{}),right:(0,t.jsx)(U.Skeleton,{show:!0,style:{width:"32px",height:"14px",marginBottom:"4px",marginTop:"4px",marginLeft:"auto"},children:(0,t.jsx)("span",{})}),children:(0,t.jsx)(h.Entity.Content,{className:"geist-hide-on-mobile",description:(0,t.jsx)(U.Skeleton,{show:!0,style:{width:"180px",height:"14px",marginBottom:"4px",marginTop:"4px"},children:(0,t.jsx)("span",{})}),style:{minWidth:0}})})}var _=e.i(9722978),q=e.i(8180805),B=e.i(2504781),E=e.i(455575),L=e.i(6942035),D=e.i(6318858),z=e.i(1717203),R=e.i(7557283),V=e.i(3408876),W=e.i(4595422),H=e.i(1681029),K=e.i(2882012),G=e.i(7901966);e.i(6483798);var X=e.i(8287059);function Q(e){let{pb:s,toggleUsersFilter:l,toggleProjectFilter:n,toggleAliasFilter:a,revalidateAliasProtectionBypasses:c,teamId:o}=e,{account:d}=(0,r.useAccount)(),u=d?.billing?.plan==="hobby",[x,p]=(0,i.useState)(!1),[m,h]=(0,i.useState)(null),j=(0,X.useOpenUpgradeModal)(),{can:f}=(0,z.default)(),g=f(R.Action.Update,"production"===s.aliasTarget?R.Resource.ProductionAliasProtectionBypass:R.Resource.AliasProtectionBypass),y=(0,i.useCallback)(async e=>{let{userId:t,aliasId:i,access:l,hobbyConfirmed:n}=e;if("granted"===l&&u&&!n)return void h(i);p(!0);try{await (0,K.updateAliasProtectionBypass)({aliasId:i,teamId:o,body:{scope:{userId:t,access:l}}}),await c(),E.toasts.success(`Access ${"access"in s&&"granted"===s.access?"revoked":l}.`)}catch(e){E.toasts.error(`Unable to update access${Z(e)}`)}p(!1)},[s,o,c,u]),b=(0,i.useCallback)(async(e,t,s)=>{p(!0);try{await (0,K.updateAliasProtectionBypass)({teamId:o,aliasId:e,body:{revoke:{secret:t,regenerate:s}}}),await c(),E.toasts.success(s?"Shareable link regenerated.":"Shareable link deleted.")}catch(e){E.toasts.error(`Unable to ${s?"revoke":"delete"} shareable link${Z(e)}`)}p(!1)},[o,c]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-4 flex-initial ml-auto",children:["user"!==s.scope||"requested"!==s.access||x?void 0:(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-3 flex-initial",children:[(0,t.jsx)(C.Tooltip,{desktopOnly:!0,text:g?"Decline request":"Missing permissions",children:(0,t.jsx)(B.Button,{"aria-label":"Decline request",disabled:!g,onClick:()=>void y({userId:s.id,aliasId:s.aliasId,access:"denied"}),shape:"square",size:"small",svgOnly:!0,type:"secondary",children:(0,t.jsx)(L.Cross,{})})}),(0,t.jsx)(C.Tooltip,{desktopOnly:!0,text:g?"Approve request":"Missing permissions",children:(0,t.jsx)(B.Button,{"aria-label":"Approve request",disabled:!g,onClick:()=>void y({userId:s.id,aliasId:s.aliasId,access:"granted"}),shape:"square",size:"small",svgOnly:!0,type:"secondary",children:(0,t.jsx)(D.Check,{size:16})})})]}),"shareable-link"!==s.scope||x?null:(0,t.jsx)(C.Tooltip,{desktopOnly:!0,text:"Copy shareable link",children:(0,t.jsx)(V.default,{iconSize:16,label:"Copy",size:"small",textToCopy:(0,W.createShareableLink)((0,H.domainToUrl)(s.alias),s.id),type:"secondary"})}),x?(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-initial px-2",children:(0,t.jsx)(v.Spinner,{size:16})}):null,(0,t.jsxs)(k.DotsMenu,{children:["shareable-link"===s.scope?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N.MenuItem,{disabled:!g,onClick:()=>void b(s.aliasId,s.id,!0),type:"error",children:"Regenerate shareable link"}),(0,t.jsx)(N.MenuItem,{disabled:!g,onClick:()=>void b(s.aliasId,s.id,!1),type:"error",children:"Revoke shareable link"})]}):null,"user"===s.scope&&"granted"===s.access?(0,t.jsx)(N.MenuItem,{disabled:!g,onClick:()=>void y({userId:s.id,aliasId:s.aliasId,access:"denied"}),type:"error",children:"Revoke user access"}):null,"user"===s.scope?(0,t.jsx)(N.MenuItem,{onClick:l(s.id),children:"Filter by user"}):null,"email_invite"===s.scope?(0,t.jsx)(N.MenuItem,{onClick:l(s.id),children:"Filter by email"}):null,(0,t.jsx)(N.MenuItem,{onClick:a(s.alias),children:"Filter by domain"}),(0,t.jsx)(N.MenuItem,{disabled:!s.projectName,onClick:s.projectName?n(s.projectName):void 0,children:"Filter by project"})]})]}),(0,t.jsx)(G.HobbyLimitAction,{onUpgradeClick:()=>{j({source:"Hobby account approve request limit call to upgrade from team settings",forceCreateTeam:!0,trialBehavior:"choose"})},setShowHobbyLimitAction:()=>h(null),showHobbyLimitAction:!!m,updateAccess:()=>y({userId:s.id,aliasId:m||"",access:"granted",hobbyConfirmed:!0})})]})}function Z(e){return e&&"object"==typeof e&&"message"in e&&"string"==typeof e.message?`: ${e.message}`:null}var J=e.i(4585051),Y=e.i(7218483),ee=e.i(8651268);function et(e){let{pb:s,className:i}=e;return"access"in s&&"requested"===s.access?(0,t.jsx)(h.Entity.Content,{className:i,description:(0,t.jsx)(ei,{pb:s}),style:{minWidth:0},title:(0,t.jsx)(es,{pb:s,tooltip:"User has requested access to this domain."})}):(0,t.jsx)(h.Entity.Content,{className:i,description:(0,t.jsx)(el,{pb:s}),style:{minWidth:0},title:(0,t.jsx)(en,{pb:s})})}function es(e){let{pb:s,children:i,tooltip:l}=e;return(0,t.jsx)(C.Tooltip,{as:"div",cursor:"pointer",desktopOnly:!0,style:{alignSelf:"flex-start",minWidth:0,width:"100%"},text:s.username||s.email?l:"User no longer exists.",children:(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-1 flex-initial min-w-0",children:[(0,t.jsx)(J.Avatar,{size:16,uid:s.id}),(0,t.jsxs)("span",{className:"text-copy-14 truncate",children:[s.username||s.email||"unknown"," ",i]})]})})}function ei(e){let{pb:s}=e;return(0,t.jsx)("p",{className:"text-copy-14 text-gray-900 truncate",children:s.updatedAt>s.createdAt?(0,t.jsxs)(t.Fragment,{children:["last updated ",(0,t.jsx)(er,{date:s.updatedAt})]}):(0,t.jsxs)(t.Fragment,{children:["requested access ",(0,t.jsx)(er,{date:s.createdAt})]})})}function el(e){let{pb:s}=e,i=s.blameUsername;return(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-1 flex-initial",children:[(0,t.jsxs)("p",{className:"text-copy-14 text-gray-900",children:[(0,t.jsx)(er,{date:s.updatedAt})," by ",i]}),(0,t.jsx)(ee.PrincipalAvatar,{size:16,title:s.blameUsername,principalId:s.blameUserId,principal:{type:"user",uid:s.blameUserId,username:s.blameUsername}})]})}function en(e){let{pb:s}=e;switch(s.scope){case"user":return(0,t.jsx)(es,{pb:s,tooltip:"User has access to this domain.",children:"granted access"});case"shareable-link":return(0,t.jsx)(C.Tooltip,{cursor:"pointer",desktopOnly:!0,text:"Anyone with the shareable link has access to this domain",children:(0,t.jsx)("p",{className:"text-copy-14 truncate",children:"Shareable link generated"})});case"alias-protection-override":return(0,t.jsx)(C.Tooltip,{cursor:"pointer",desktopOnly:!0,text:"Anyone can access this domain.",children:(0,t.jsx)("p",{className:"text-copy-14 truncate",children:"Deployment protection exception created"})});case"email_invite":return(0,t.jsx)(C.Tooltip,{cursor:"pointer",desktopOnly:!0,text:"The Vercel account linked to this email can access this domain. Access will be granted when the user visits the domain, and the username populated here.",children:(0,t.jsxs)("p",{className:"text-copy-14 truncate",children:[s.id," invited to access"]})})}}let ea=new Intl.DateTimeFormat(void 0,{hour:"numeric",minute:"2-digit",second:"2-digit",year:"numeric",month:"short",day:"numeric",timeZoneName:"short"});function er(e){let{date:s}=e;return(0,t.jsx)(C.Tooltip,{cursor:"pointer",style:{textTransform:"lowercase"},text:ea.format(new Date(s)),children:(0,Y.useAgo)(s)})}function ec(e){let{pb:s,slug:i}=e,l=s.projectName?`/${i}/${encodeURIComponent(s.projectName)}`:null;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(A.FaviconOrFramework,{project:s.projectId?{id:s.projectId,framework:s.projectFramework,targets:s.projectTargets}:void 0}),(0,t.jsx)(h.Entity.Content,{description:(0,t.jsx)("p",{className:"text-copy-14 text-gray-900 truncate",children:(0,t.jsx)(S.Link,{href:l&&s.deploymentId?`${l}/${s.deploymentId.replace("dpl_","")}`:`https://${s.alias}`,variant:"underline",children:s.alias})}),title:s.projectName?(0,t.jsx)("p",{className:"text-heading-14 truncate",children:(0,t.jsx)(S.Link,{href:`${l}/settings/deployment-protection`,variant:"underline",children:s.projectName})}):void 0})]})}function eo(e){let{pb:s,...i}=e,{team:l,user:n}=(0,r.useAccount)(),a=l?.slug||n?.username||"";return(0,t.jsx)(h.Entity,{className:q.default.entity,footer:(0,t.jsx)(et,{className:(0,_.clsx)(q.default.footer,"geist-show-on-mobile"),pb:s}),left:(0,t.jsx)(ec,{pb:s,slug:a}),right:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(et,{className:"geist-hide-on-mobile",pb:s}),(0,t.jsx)(Q,{...i,pb:s,teamId:l?.id})]})})}function ed(){return(0,t.jsx)(h.Entity,{className:q.default.entity,footer:(0,t.jsx)(h.Entity.Content,{className:(0,_.clsx)(q.default.footer,"geist-show-on-mobile"),description:(0,t.jsx)(U.Skeleton,{show:!0,style:{width:"180px",height:"14px",marginBottom:"4px",marginTop:"4px"},children:(0,t.jsx)("span",{})}),style:{minWidth:0},title:(0,t.jsx)(U.Skeleton,{show:!0,style:{width:"180px",height:"14px",marginBottom:"4px",marginTop:"4px"},children:(0,t.jsx)("span",{})})}),left:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(A.FaviconOrFramework,{}),(0,t.jsx)(h.Entity.Content,{description:(0,t.jsx)(U.Skeleton,{show:!0,style:{width:"180px",height:"14px",marginBottom:"4px",marginTop:"4px"},children:(0,t.jsx)("span",{})}),style:{minWidth:0},title:(0,t.jsx)(U.Skeleton,{show:!0,style:{width:"100px",height:"14px",marginBottom:"4px",marginTop:"4px"},children:(0,t.jsx)("span",{})})})]}),right:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.Entity.Content,{className:"geist-hide-on-mobile",description:(0,t.jsx)(U.Skeleton,{show:!0,style:{width:"180px",height:"14px",marginBottom:"4px",marginTop:"4px"},children:(0,t.jsx)("span",{})}),style:{minWidth:0},title:(0,t.jsx)(U.Skeleton,{show:!0,style:{width:"180px",height:"14px",marginBottom:"4px",marginTop:"4px"},children:(0,t.jsx)("span",{})})}),(0,t.jsx)(U.Skeleton,{show:!0,style:{width:"32px",height:"14px",marginBottom:"4px",marginTop:"4px",marginLeft:"auto"},children:(0,t.jsx)("span",{})})]})})}var eu=e.i(1794286),ex=e.i(6060673);let ep=function(){let{limit:e=10,scope:t,search:s,userIds:l}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{team:c,isTeam:o,user:d}=(0,r.useAccount)(),u=o?c?.id:d?.uid,x=(0,n.default)((i,n)=>{if(!u)return null;let r=n?.pagination.next;return`/api/deployments/protection-bypasses-external-user-access${(0,a.encode)({teamId:c?.id,limit:e,scope:t,until:r,search:s,userIds:l})}`},async e=>{let t=await fetch(e);if(!t.ok)throw Error(t.statusText);return t.json()}),p=!!x.data,m=!!(x.data&&x.data[x.data.length-1]?.externalUsers?.length<e),h=(0,i.useMemo)(()=>x.data?x.data.flatMap(e=>e.externalUsers):[],[x.data]),j=p&&0===h.length,f=!!(x.data&&x.size>x.data.length);return[x,{isEmpty:j,externalUsers:h,initialDataLoaded:p,isReachingEnd:m,loadMore:()=>x.setSize(e=>e+1),isLoadingMore:f,isValidating:x.isValidating}]};var em=e.i(640716),eh=e.i(1568341),ej=e.i(6694387),ef=e.i(8674454),eg=e.i(4991687),ey=e.i(6198010),ev=e.i(6357175),eb=e.i(5232300),ew=e.i(8835183),ek=e.i(9689002),eN=e.i(4151772);function eC(e){let{swr:s,placeholder:l,items:n,search:a,setSearch:r}=e,{loadMore:c,isLoadingMore:o,initialDataLoaded:d,isEmpty:u,isReachingEnd:x}=s,{state:{listRef:p}}=(0,eb.useMenu)();(0,i.useEffect)(()=>{"object"==typeof p&&null!==p&&p.current?.focus()},[p]);let m=(0,b.useIntersectionObserverRef)(()=>{o||c()},{rootMargin:"200px 0px"});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("li",{className:(0,_.default)("flex flex-col items-stretch justify-start flex-initial",eN.default.stickySearch),children:(0,t.jsx)(ew.SearchInput,{clearable:!1,innerWrapperClassName:eN.default.searchContainer,onChange:e=>r(e.target.value),placeholder:l,suffix:(0,t.jsx)(ek.Kbd,{children:"Esc"}),suffixStyling:!1})}),d&&0===n.length?(0,t.jsx)("div",{className:"flex flex-col items-center justify-center flex-initial",style:{margin:"var(--geist-gap-double)"},children:(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"No results"})}):null,n,(0,t.jsx)("div",{ref:!(n.length>0)||u||x?void 0:m}),(a||!o)&&d?null:(0,t.jsx)("li",{className:"flex flex-col items-center justify-center flex-initial px-2 py-2.5",children:(0,t.jsx)(v.Spinner,{size:20})})]})}function eS(e){let{selected:s,toggleUsersFilter:l,scope:n}=e,[a,r]=(0,i.useState)(""),[c,o]=ep({search:(0,ev.useDebouncedValue)(a,300),scope:n}),{externalUsers:d}=o;return(0,t.jsx)(eC,{items:d.map(e=>(0,t.jsx)(N.MenuItem,{onClick:l(e.id),children:(0,t.jsxs)("div",{className:"flex flex-row items-center justify-between gap-1.5 flex-initial w-full",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-3 flex-initial",style:{minWidth:0},children:[(0,t.jsx)(J.Avatar,{size:20,uid:e.id}),(0,t.jsx)("span",{className:"text-copy-14 truncate",title:e.username||e.email||e.id,children:e.username||e.email||e.id})]}),(0,t.jsx)("div",{className:"flex flex-row items-center justify-start gap-1.5 flex-initial",style:{maxWidth:"25%"},children:s.includes(e.id)?(0,t.jsx)(D.Check,{}):null})]})},e.id)),placeholder:"username or email",search:a,setSearch:r,swr:o})}var eI=e.i(5229375),eF=e.i(4896636);function eA(e){let{selected:s,toggleAliasFilter:l}=e,[n,a]=(0,i.useState)(""),r=(0,ev.useDebouncedValue)(n,300),[c,o]=(0,eI.useAliasesInfinite)({limit:10}),{aliases:d}=o,u=(0,eF.default)({domain:r,filterDeleted:!0},{}),x=u.data?[u.data]:[];return(0,t.jsx)(eC,{items:(n?x:d).map(e=>(0,t.jsx)(N.MenuItem,{onClick:l(e.alias),children:(0,t.jsxs)("div",{className:"flex flex-row items-center justify-between gap-1.5 flex-initial w-full",children:[(0,t.jsx)("div",{className:"flex flex-row items-center justify-start gap-3 flex-initial min-w-0",children:(0,t.jsx)("span",{className:"text-copy-14 truncate",title:e.alias,children:e.alias})}),(0,t.jsx)("div",{className:"flex flex-row items-center justify-start gap-1.5 flex-initial max-w-[25%]",children:s.includes(e.alias)?(0,t.jsx)(D.Check,{}):null})]})},e.alias)),placeholder:"domain (exact)",search:n,setSearch:a,swr:n?{initialDataLoaded:!u.isLoading,isEmpty:!u.data,loadMore:()=>Promise.resolve(void 0),isLoadingMore:!1,isReachingEnd:!0}:o})}function eP(e){let{selected:s,toggleProjectFilter:l}=e,[n,a]=(0,i.useState)(""),r=(0,ev.useDebouncedValue)(n,300),[c,o]=(0,g.useProjectListInfinite)({search:r}),{projects:d}=o;return(0,t.jsx)(eC,{items:d.map(e=>(0,t.jsx)(N.MenuItem,{onClick:l(e.name),children:(0,t.jsxs)("div",{className:"flex flex-row items-center justify-between gap-1.5 flex-initial w-full",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-3 flex-initial min-w-0",children:[(0,t.jsx)(em.FaviconOrFramework,{hideSkeleton:!0,project:e,size:20}),(0,t.jsx)("span",{className:"text-copy-14 truncate",title:e.name,children:e.name})]}),(0,t.jsx)("div",{className:"flex flex-row items-center justify-start gap-1.5 flex-initial max-w-[25%]",children:s.includes(e.name)?(0,t.jsx)(D.Check,{}):null})]})},e.id)),placeholder:"project name",search:n,setSearch:a,swr:o})}function eM(e){let{filteredUsers:s,toggleUsersFilter:l,filteredAliases:n,toggleAliasFilter:a,filteredProjects:r,toggleProjectFilter:c}=e,[o,d]=(0,i.useState)(null),u=(0,i.useMemo)(()=>"user"===o?(0,t.jsx)(eS,{selected:s,toggleUsersFilter:l}):"domain"===o?(0,t.jsx)(eA,{selected:n,toggleAliasFilter:a}):"project"===o?(0,t.jsx)(eP,{selected:r,toggleProjectFilter:c}):null,[o,n,s,r,l,a,c]),x=(e,t)=>{e.preventDefault(),d(t)};return(0,t.jsxs)(eg.MenuContainer,{onClose:()=>{d(null)},onEscapePressed:(e,t)=>{e.stopPropagation(),null!==o&&(e.preventDefault(),d(null),setTimeout(()=>{t.current?.focus()},0))},children:[(0,t.jsx)(ej.MenuButton,{prefix:(0,t.jsx)(ey.Plus,{}),type:"secondary",children:"Filter"}),(0,t.jsx)(ef.Menu,{className:(0,_.clsx)({[eh.default.menu]:!!o}),width:o?300:240,children:o?u:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N.MenuItem,{onClick:e=>{x(e,"user")},children:"User"}),(0,t.jsx)(N.MenuItem,{onClick:e=>{x(e,"domain")},children:"Domain"}),(0,t.jsx)(N.MenuItem,{onClick:e=>{x(e,"project")},children:"Project"})]})})]})}let eT=[{value:"user",display:"User Access"},{value:"email_invite",display:"Invited Emails"},{value:"shareable-link",display:"Shareable Links"},{value:"alias-protection-override",display:"Unprotected Previews"}].reduce((e,t)=>(e[t.value]=t.display,e),{});function eO(e){let{onClick:s}=e;return(0,t.jsx)(B.Button,{"aria-label":"Clear",onClick:s,shape:"square",size:"tiny",svgOnly:!0,type:"tertiary",typeName:"button",children:(0,t.jsx)(L.Cross,{color:"gray-1000"})})}function eU(e){let{filteredScope:s,setScopeFilter:i}=e;return(0,t.jsxs)(eg.MenuContainer,{children:[(0,t.jsx)(ej.MenuButton,{align:"flex-grow",suffix:s?(0,t.jsx)(eO,{onClick:i()}):void 0,type:"secondary",children:(0,t.jsx)("p",{className:"text-copy-14",children:s?eT[s]:"All Access"})}),(0,t.jsxs)(ef.Menu,{width:200,children:[(0,t.jsxs)(N.MenuItem,{onClick:i(),children:[(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-1",children:(0,t.jsx)("p",{className:"text-copy-14",children:"All Access"})}),(0,t.jsx)("div",{className:"flex flex-col items-end justify-start flex-none",children:s?null:(0,t.jsx)(D.Check,{})})]}),Object.entries(eT).map(e=>{let[l,n]=e,a=s===l;return(0,t.jsxs)(N.MenuItem,{onClick:i(l),children:[(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-1",children:(0,t.jsx)("p",{className:"text-copy-14",children:n})}),(0,t.jsx)("div",{className:"flex flex-col items-end justify-start flex-none",children:a?(0,t.jsx)(D.Check,{}):null})]},l)})]})]})}e.i(7964715);var e$=e.i(8387260);function e_(e){var s;let{value:i,tooltip:l,onClearFilter:n,prefix:a}=e;return(0,t.jsx)(C.Tooltip,{as:"div",text:l,children:(0,t.jsx)(e$.FilterMenuButton,{onClearFilter:n,prefix:a,style:{paddingInline:"10px"},children:i?(s=i).length>20?`${s.slice(0,19)}…`:s:null})})}function eq(e){let{scope:s,filteredUsers:l,toggleUsersFilter:n,filteredAliases:a,toggleAliasFilter:r,filteredProjects:c,toggleProjectFilter:o,filteredDate:d,setDateFilter:u,filteredScope:x,setScopeFilter:p,clearFilters:m}=e,{data:h}=(0,ex.useProjects)(c),[j,f]=(0,i.useState)({});(0,i.useEffect)(()=>{let e=h?.reduce((e,t)=>(j[t.name]||(e[t.name]=t),e),{});e&&Object.keys(e).length>0&&f({...j,...e})},[h]);let[g,{externalUsers:y}]=ep({userIds:l}),[v,b]=(0,i.useState)({});return(0,i.useEffect)(()=>{let e=y.reduce((e,t)=>(v[t.id]||(e[t.id]=t),e),{});Object.keys(e).length>0&&b({...v,...e})},[y]),(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-2 flex-initial flex-wrap",children:[(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-2 flex-initial",children:[(0,t.jsx)(eM,{filteredAliases:a,filteredProjects:c,filteredUsers:l,toggleAliasFilter:r,toggleProjectFilter:o,toggleUsersFilter:n}),(0,t.jsx)(eu.Calendar,{buttonClassName:eh.default.calendar,buttonSuffix:d?(0,t.jsx)(eO,{onClick:()=>u()}):void 0,maxValue:Date.now(),onChange:u,value:d,width:"auto"})]}),s?null:(0,t.jsx)(eU,{filteredScope:x,setScopeFilter:p}),a.map(e=>(0,t.jsx)(e_,{onClearFilter:r(e),tooltip:e,value:e},`filter-${e}`)),c.map(e=>{let s=j[e];return(0,t.jsx)(e_,{onClearFilter:o(e),prefix:(0,t.jsx)(em.FaviconOrFramework,{hideSkeleton:!0,project:s,size:24}),value:e},`filter-${e}`)}),l.map(e=>{let s=v[e];return(0,t.jsx)(e_,{onClearFilter:n(e),prefix:(0,t.jsx)(J.Avatar,{size:24,uid:e}),tooltip:s?void 0:e,value:s?.username||s?.email},`filter-${e}`)}),l.length>0||a.length>0||c.length>0||x&&d?(0,t.jsx)(B.Button,{onClick:m,style:{color:"var(--accents-5)"},type:"tertiary",children:"Clear Filters"}):null]})}function eB(e){let{setQuery:s,access:n,scope:a,revalidateByPassCount:r}=e,o=(0,l.useSearchParams)(),[x,p]=(0,i.useState)([]),[m,j]=(0,i.useState)(),[f,g]=(0,i.useState)([]),[y,v]=(0,i.useState)([]),[b,k]=(0,i.useState)(),[N,C]=c({projectNames:f,scope:a||m,aliases:x,userIds:y,access:n,until:b?.end.valueOf(),since:b?.start.valueOf()}),{mutate:I}=N,{protectionBypasses:F}=C;(0,i.useEffect)(()=>{let e,t,s,i,l,n,a;if(!o)return;let{projectNames:r,aliases:c,userIds:h,scope:w,since:N,until:C}=(e=o.get("p"),t=e?.split(","),s=o.get("a"),i=s?.split(","),l=o.get("u"),n=l?.split(","),a=o.get("s"),{projectNames:t,aliases:i,userIds:n,scope:"shareable-link"===a||"user"===a||"alias-protection-override"===a||"email_invite"===a?a:void 0,since:Number(o.get(d))||void 0,until:Number(o.get(u))||void 0});(!r&&f.length>0||r&&r.toString()!==f.toString())&&g(r||[]),(!c&&x.length>0||c&&c.toString()!==x.toString())&&p(c||[]),(!h&&y.length>0||h&&h.toString()!==y.toString())&&v(h||[]),(!w&&m||w&&w!==m)&&j(w||void 0);let S=N&&C?{start:N,end:C}:null;(!S&&b||S&&(S.end!==b?.end||S.start!==b.start))&&k(S||void 0)},[o,f,x,y,m,b,p,g,v,j,k]);let A=(0,i.useCallback)(e=>()=>{s({projectNames:f.includes(e)?f.filter(t=>t!==e):[...f,e]})},[f,s]),P=(0,i.useCallback)(e=>()=>{s({aliases:x.includes(e)?x.filter(t=>t!==e):[...x,e]})},[x,s]),M=(0,i.useCallback)(e=>()=>{s({userIds:y.includes(e)?y.filter(t=>t!==e):[...y,e]})},[y,s]),T=(0,i.useCallback)(e=>()=>{s({scope:e||null})},[s]),O=(0,i.useCallback)(e=>{s({until:e?.end.valueOf()||null,since:e?.start.valueOf()||null})},[s]),U=x.length>0||f.length>0||y.length>0||m||b,$="requested"===n?(0,t.jsxs)(t.Fragment,{children:["Pending requests will appear here when someone requests access to a preview protected with Vercel Authentication."," ",(0,t.jsx)(S.Link,{external:!0,href:"/docs/security/deployment-protection/methods-to-protect-deployments/vercel-authentication#access-requests",variant:"highlight",children:"Learn more"})]}):(0,t.jsx)(t.Fragment,{children:"Any external access granted, shareable links created, or protection disabled for domains in projects protected with Deployment Protection will appear here."});return(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial",children:[(0,t.jsx)(eq,{clearFilters:()=>{s({userIds:[],projectNames:[],aliases:[],scope:null,since:null,until:null})},filteredAliases:x,filteredDate:b,filteredProjects:f,filteredScope:m,filteredUsers:y,scope:a,setDateFilter:O,setScopeFilter:T,toggleAliasFilter:P,toggleProjectFilter:A,toggleUsersFilter:M}),F.length>0?(0,t.jsx)(h.Entity.List,{children:F.map(e=>(0,t.jsx)(eo,{pb:e,revalidateAliasProtectionBypasses:async()=>{await Promise.all([I(),r()])},toggleAliasFilter:P,toggleProjectFilter:A,toggleUsersFilter:M},`${e.alias}-${e.id}`))}):null,(0,t.jsx)(w,{Skeleton:ed,emptyDescription:U?void 0:$,emptyLabel:U?"No results":`No ${"requested"===n?"pending requests":"external access"}`,infinite:C,swr:N})]})}let eE=[{name:"projects",title:()=>"Projects",Component:function(e){let{setQuery:s}=e,[l,n]=(0,i.useState)(void 0),[a,r]=(0,g.useProjectListInfinite)({search:l,limit:10,revalidateFirstPage:!1},{revalidateOnFocus:!1},!1,!0),{projects:c,isReachingEnd:o}=r,[d,u]=(0,i.useState)(null),x=(0,i.useMemo)(()=>c.map(e=>({...e,...P(e)})).filter(e=>!d||"protected"===d===e.isProtectionEnabled),[c,d]),p=x.filter(e=>{let{isProtectionEnabled:t}=e;return t}).length,v=x.length-p,b=!!(l||d);return(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-4 flex-initial flex-wrap",children:[(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-initial grow",children:(0,t.jsx)(y.DebouncedSearchInput,{placeholder:"Search projects…",setSearch:n})}),(0,t.jsxs)(m.Switch,{name:"filter",style:{alignSelf:"flex-start"},children:[(0,t.jsx)(m.Switch.Control,{defaultChecked:!0,label:"All",onClick:()=>u(null),value:"all"}),(0,t.jsx)(m.Switch.Control,{label:(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-1 flex-initial",children:[(0,t.jsx)(f.CheckCircleFill,{}),(0,t.jsxs)("p",{className:"text-copy-14 truncate",children:["Protected"," ",o?`(${p})`:null]})]}),onClick:()=>u("protected"),value:"protected"}),(0,t.jsx)(m.Switch.Control,{label:(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-1 flex-initial",children:[(0,t.jsx)(j.Warning,{}),(0,t.jsxs)("p",{className:"text-copy-14 truncate",children:["Unprotected"," ",o?`(${v})`:null]})]}),onClick:()=>u("unprotected"),value:"unprotected"})]})]}),x.length>0?(0,t.jsx)(h.Entity.List,{children:x.map(e=>{let i;return(0,t.jsx)(M,{filterProject:(i=e.name,e=>{s({tab:e,projectNames:[i]})}),project:e},e.id)})}):null,(0,t.jsx)(w,{Skeleton:$,emptyLabel:b?"No results":"No projects",infinite:r,search:l,swr:a})]})},props:{}},{name:"access",title:()=>"Access",Component:eB,props:{access:"granted"}},{name:"requests",title:e=>e&&e>0?`Requests (${e})`:"Requests",Component:eB,props:{access:"requested",scope:"user"}}];function eL(){let e=(0,l.useRouter)(),n=(0,l.usePathname)(),a=(0,l.useSearchParams)(),[r,o]=(0,i.useState)(x(a)||"projects"),[{mutate:d},{requestCount:u}]=c({limit:1,includeRequestCount:!0}),m=x(a);m&&m!==r&&o(m);let h=t=>{if(!n||!a)return;let s=p(a,t);e.replace(`${n}?${s.toString()}`)};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.Tabs,{selected:r,setSelected:t=>{if(!n||!a)return;let s=p(a,{tab:t});e.push(`${n}?${s.toString()}`)},tabs:eE.map(e=>{let{title:t,name:s}=e;return{title:t(u),value:s}})}),eE.map(e=>{let{name:s,Component:i,props:l}=e;return r===s?(0,t.jsx)(i,{setQuery:h,...l,revalidateByPassCount:d},s):null})]})}function eD(){return(0,t.jsx)(i.Suspense,{children:(0,t.jsx)(eL,{})})}e.s(["OverviewTabs",()=>eD],1027821)}]);

//# debugId=0d7b9c26-4284-2ee3-8d8f-bdab145ca766
//# sourceMappingURL=167bb38f350b5433.js.map