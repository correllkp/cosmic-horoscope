;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="7262c21a-d115-f632-3bad-d0a38d400f60")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,6857421,e=>{"use strict";var t=e.i(8711407),r=e.i(1176592),a=e.i(2962582),l=e.i(6195642),n=e.i(6143247);let i=(0,r.forwardRef)((e,r)=>{let{className:a,overflow:l=!0,containerClassName:i,...s}=e;return(0,t.jsx)("div",{className:"tailwind-preflight",children:(0,t.jsx)("div",{className:(0,n.cn)("relative w-full",{"overflow-auto":l},i),children:(0,t.jsx)("table",{className:(0,n.cn)("w-full caption-bottom text-sm text-gray-900",a),ref:r,...s})})})});i.displayName="Table";let s=(0,r.forwardRef)((e,r)=>{let{className:a,removeSpacing:l=!1,...i}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("thead",{className:(0,n.cn)("[&_th]:border-b",a),ref:r,...i}),l?null:(0,t.jsx)("tbody",{"aria-hidden":!0,className:"table-row h-3"})]})});s.displayName="TableHeader";let o=(0,r.forwardRef)((e,l)=>{let{className:i,striped:s,interactive:o,bordered:c,virtualize:u=!1,children:d,...m}=e,g=(0,r.useMemo)(()=>Array.isArray(d)&&u?d.filter(Boolean):d,[d,u]),h=Array.isArray(g)?g.length:0,p=(0,r.useRef)(null),[f,x]=(0,r.useState)({}),b=(0,r.useRef)(!1),y=(0,r.useMemo)(()=>{if(!u)return{start:0,end:0};let e=p.current,t=e?.getBoundingClientRect().top??0,r=b.current?window.innerHeight:2e3,a=Math.max(0,Math.min(Math.floor((-150-t)/40),h-1)),l=Math.max(a,Math.min(Math.ceil(Math.min(r+150-t)/40),h-1));return{start:a,end:l}},[f,h]);return(0,r.useLayoutEffect)(()=>{if(b.current=!0,!u)return;let e=0,t=()=>{x({})};t();let r=()=>{cancelAnimationFrame(e),e=requestAnimationFrame(t)};window.addEventListener("scroll",r),window.addEventListener("resize",r);let a=new MutationObserver(e=>{for(let t of e)if(!p.current?.contains(t.target)){r();break}});return p.current?.parentElement&&a.observe(document.body,{childList:!0,subtree:!0}),()=>{cancelAnimationFrame(e),window.removeEventListener("scroll",r),window.removeEventListener("resize",r),a.disconnect()}},[u]),(0,t.jsx)("tbody",{className:(0,n.cn)(s?"[&_tr:where(:nth-child(odd))]:bg-background-200":void 0,"[&_td:first-child]:rounded-l-sm [&_td:last-child]:rounded-r-sm",o?"[&_tr:hover]:bg-gray-100":void 0,c?"[&_tr:not(:last-child)]:border-b":void 0,i),ref:(0,a.mergeRefs)([p,l]),style:u?{height:40*h}:void 0,...m,children:u&&Array.isArray(g)?(0,t.jsxs)(t.Fragment,{children:[y.start%2?(0,t.jsx)("tr",{"aria-hidden":!0,style:{height:0}}):null,(0,t.jsx)("tr",{"aria-hidden":!0,style:{height:40*y.start}}),g.slice(y.start,y.end+1),(0,t.jsx)("tr",{"aria-hidden":!0,style:{height:(h-y.end-1)*40}})]}):g})});o.displayName="TableBody";let c=(0,r.forwardRef)((e,r)=>{let{className:a,...l}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("tbody",{"aria-hidden":!0,className:"table-row h-3"}),(0,t.jsx)("tfoot",{className:(0,n.cn)("font-medium [&_td]:border-t",a),ref:r,...l})]})});c.displayName="TableFooter";let u=(0,r.forwardRef)((e,r)=>{let{className:a,...l}=e;return(0,t.jsx)("tr",{className:(0,n.cn)("transition-colors",a),ref:r,...l})});u.displayName="TableRow";let d=(0,r.forwardRef)((e,r)=>{let{className:a,...l}=e;return(0,t.jsx)("th",{className:(0,n.cn)("text-muted-foreground h-10 px-2 text-left align-middle font-medium last:text-right [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px] border-gray-400",a),ref:r,...l})});d.displayName="TableHead";let m=(0,r.forwardRef)((e,r)=>{let{className:a,...l}=e;return(0,t.jsx)("td",{className:(0,n.cn)("px-2 py-2.5 align-middle last:text-right [&:has([data-cell-link=true])]:p-0 [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),ref:r,...l})});m.displayName="TableCell";let g=(0,r.forwardRef)((e,r)=>{let{className:a,...i}=e;return(0,t.jsx)(l.Link,{className:(0,n.cn)("block px-2 py-2.5",a),"data-cell-link":!0,ref:r,...i})});g.displayName="TableCellLink";let h=(0,r.forwardRef)((e,r)=>{let{...a}=e;return(0,t.jsx)("colgroup",{ref:r,...a})});h.displayName="TableColgroup";let p=(0,r.forwardRef)((e,r)=>{let{className:a,...l}=e;return(0,t.jsx)("col",{className:(0,n.cn)("w-auto",a),ref:r,...l})});p.displayName="TableCol";let f=Object.assign(i,{Header:s,Head:d,Body:o,Footer:c,Row:u,Cell:m,CellLink:g,Colgroup:h,Col:p});e.s(["CompoundedTable",0,f,"TableBody",0,o,"TableCell",0,m,"TableCellLink",0,g,"TableCol",0,p,"TableColgroup",0,h,"TableFooter",0,c,"TableHead",0,d,"TableHeader",0,s,"TableRoot",0,i,"TableRow",0,u])},3169345,e=>{"use strict";var t=e.i(6857421);e.s(["Table",()=>t.CompoundedTable])},2107254,e=>{"use strict";var t=e.i(1176592),r=e.i(7909933),a=e.i(3924999),l=e.i(8577132),n=e.i(8042625),i=e.i(277234),s=e.i(4244280),o=e.i(9668517),c=e.i(5140444);function u(e){let{version:t,until:r,limit:a,latestDeployments:l,search:i,slug:o,excludeRepos:c,edgeConfigId:u,edgeConfigTokenId:d,connectConfigurationId:m,from:g,sortByElasticConcurrency:h,buildMachineTypes:p,includePermissions:f}=e;return`${(0,s.API_PROJECTS_VERSION)(t)}${(0,n.encode)({until:r,limit:a,latestDeployments:l,search:i,slug:o,excludeRepos:c,edgeConfigId:u,edgeConfigTokenId:d,connectConfigurationId:m,from:g,sortByElasticConcurrency:h,buildMachineTypes:p,includePermissions:f})}`}let d=null;function m(e,t){let{limit:r=8,latestDeployments:a=3,excludeReposRef:l}=e,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"v9",c=`${(0,s.API_PROJECTS_VERSION)(o)}${(0,n.encode)({limit:r,latestDeployments:a,slug:t,excludeRepos:l?.current[0]??null})}`;d=[c,(0,i.fetchAPI)(c)]}function g(e,t){let r,a,{sortByElasticConcurrency:l}=t;return l&&"string"==typeof e?r=e:"number"==typeof e&&(a=e),{from:r,until:a}}function h(){let{fetchEnabled:e=!0,limit:n=8,latestDeployments:s=3,search:c,excludeReposRef:m,revalidateFirstPage:h=!0,edgeConfigId:p,edgeConfigTokenId:f,connectConfigurationId:x,version:b="v9",slug:y,sortByElasticConcurrency:j,buildMachineTypes:w,includePermissions:v}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},N=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},T=arguments.length>2&&void 0!==arguments[2]&&arguments[2],C=arguments.length>3&&void 0!==arguments[3]&&arguments[3],S=(0,l.useRouter)(),R=(0,o.useTeamSlug)(),$=y||R,k=(0,a.default)((t,r)=>{if(!e||S&&!S.isReady)return null;if(!t)return u({version:b,limit:n,latestDeployments:s,search:c,slug:$,excludeRepos:m?.current[0]??null,edgeConfigId:p,edgeConfigTokenId:f,connectConfigurationId:x,sortByElasticConcurrency:j,buildMachineTypes:w,includePermissions:v});let{until:a,from:l}=g(r?.pagination.next,{sortByElasticConcurrency:j});return a||l?u({version:b,until:a,limit:n,latestDeployments:s,search:c,slug:$,excludeRepos:m?.current[t]??null,edgeConfigId:p,edgeConfigTokenId:f,connectConfigurationId:x,from:l,sortByElasticConcurrency:j,buildMachineTypes:w,includePermissions:v}):null},async e=>{if(d&&d[0]===e){let e=await d[1];return d=null,e}return(0,i.fetchAPI)(e,{throwOnHTTPError:!0})},{...N,keepPreviousData:C,revalidateFirstPage:h,persistSize:!0}),I=!!k.data,E=!!((k.data?.[k.data.length-1]?.projects.length??0)<n||k.data?.[k.data.length-1]?.pagination.next===null),D=(0,t.useMemo)(()=>k.data?k.data.flatMap(e=>e.projects):[],[k.data]),A=I&&0===D.length,F=!!(k.data&&k.size>k.data.length);return(0,r.default)(()=>{if(T||!k.data||E)return null;let e=k.data[k.data.length-1],{from:t,until:r}=g(e?.pagination.next,{sortByElasticConcurrency:j});return u({version:b,until:r,limit:n,latestDeployments:s,search:c,slug:$,excludeRepos:m?.current[0]??null,edgeConfigId:p,edgeConfigTokenId:f,connectConfigurationId:x,from:t,sortByElasticConcurrency:j,buildMachineTypes:w,includePermissions:v})},e=>(0,i.fetchAPI)(e,{throwOnHTTPError:!0})),[k,{projects:D,initialDataLoaded:I,isEmpty:A,loadMore:()=>k.setSize(e=>e+1),isLoadingMore:F,isReachingEnd:E,isValidating:k.isValidating}]}function p(){let{fetchEnabled:e=!0,limit:a,from:u,linked:d,search:m,hasProductionDomains:g,domain:h,latestDeployments:p=3,deploymentInfo:f,includePermissions:x=!1,edgeConfigId:b,edgeConfigTokenId:y,connectConfigurationId:j,excludeConnectConfigurationId:w,staticIpsEnabled:v,teamId:N}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},T=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},C=arguments.length>2?arguments[2]:void 0,S=arguments.length>3?arguments[3]:void 0,R=(0,o.useTeamSlug)(),$=(0,l.useRouter)(),{user:k,isNorthstar:I}=(0,c.useUser)(),[E,D]=(0,t.useState)(m);return(0,t.useEffect)(()=>{D(e=>e===m?e:m)},[m]),{...(0,r.default)(()=>e&&(!$||$.isReady)&&k&&(!I||k.defaultTeamId||N)?`${(0,s.API_PROJECTS_VERSION)("v8")}${(0,n.encode)({from:u||null,limit:a,linked:!!d||null,search:E,hasProductionDomains:g?"1":null,domain:h,latestDeployments:void 0===p?null:p,deploymentInfo:f||null,slug:C||R,includePermissions:x,edgeConfigId:b,edgeConfigTokenId:y,connectConfigurationId:j,excludeConnectConfigurationId:w,staticIpsEnabled:void 0===v?null:Number(v).toString(),teamId:N||null})}`:null,e=>(0,i.fetchAPI)(e,{throwOnHTTPError:!0,throwOnScopeAuthError:S?.throwOnScopeAuthError}),T),updateSearch:D,search:E}}e.s(["default",()=>p,"preloadProjectListInfinite",()=>m,"useProjectListInfinite",()=>h],2107254)},6048771,e=>{"use strict";var t=e.i(8711407),r=e.i(9722978),a=e.i(5255926),l=e.i(4585051),n=e.i(1138941),i=e.i(7898658);function s(e){let{project:s,framework:o,deploymentId:c,size:u=20,forceFaviconRound:d=!1}=e,{data:m,isLoading:g}=(0,i.default)({project:c?s:void 0}),h=(0,n.useFramework)({framework:o});return!h||c&&g?(0,t.jsx)(a.Skeleton,{height:u,rounded:!0,style:{flexShrink:0},width:u}):(0,t.jsx)(l.Avatar,{className:(0,r.clsx)({"bg-white/75 rounded-full shadow-border shadow-background-100 dark:bg-foreground dark:shadow-foreground":!!(!m&&o),"[mask-image:none] border-none rounded-none":!!(!m?.isSquare&&!d)}),size:u,src:m?.src||h.logo,title:`${h.name}`})}e.s(["ProjectLogo",()=>s])},3993360,e=>{"use strict";let t=(0,e.i(9334638).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M8.75 1V1.75V8.68934L10.7197 6.71967L11.25 6.18934L12.3107 7.25L11.7803 7.78033L8.70711 10.8536C8.31658 11.2441 7.68342 11.2441 7.29289 10.8536L4.21967 7.78033L3.68934 7.25L4.75 6.18934L5.28033 6.71967L7.25 8.68934V1.75V1H8.75ZM13.5 9.25V13.5H2.5V9.25V8.5H1V9.25V14C1 14.5523 1.44771 15 2 15H14C14.5523 15 15 14.5523 15 14V9.25V8.5H13.5V9.25Z" fill="currentColor"/>');e.s(["Download",0,t])},3804618,e=>{"use strict";var t=e.i(8711407),r=e.i(3306538),a=e.i(8761240),l=e.i(9386557);function n(e){if("error_anomaly"===e.type){let{route:t,cause:r}=e.data;return`${"function"===r?"Function Invocation":"Middleware Invocation"} by ${t} with 5xx errors`}return e.title}function i(e){return{type:e.type,title:"error_anomaly"===e.type?`${e.data.route} ${e.data.statusGroup}`:e.title,changeDirection:`${e.formattedValues.changeDirection}d`,changeAmount:e.formattedValues.changeAmount,changeDescription:`${e.formattedValues.formattedAvg} → ${e.formattedValues.formattedCount} ${e.unit}`}}function s(e){let n=(()=>{switch(e.status){case"active":return(0,t.jsx)(r.Badge,{icon:(0,t.jsx)(l.WarningFill,{}),variant:"red-subtle",children:"Active"});case"resolved":return(0,t.jsx)(r.Badge,{className:"text-gray-900",icon:(0,t.jsx)(a.CheckCircleFill,{className:"size-3 -ml-1"}),variant:"gray-subtle",children:"Resolved"})}})();return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[n,e.isInternal&&(0,t.jsx)(r.Badge,{variant:"gray-subtle",children:"Internal"})]})}function o(e){return e?`${e.minutes}m`:void 0}e.s(["getAlertInfo",()=>i,"getAlertTitle",()=>n,"getStatusBadge",()=>s,"granularityToQueryParam",()=>o])},9997017,e=>{"use strict";var t=e.i(8711407),r=e.i(3804618),a=e.i(6143247),l=e.i(1319302),n=e.i(5468328),i=e.i(3219703);let s="leading-tight font-medium space-x-1 min-w-0 items-center min-h-[22px] truncate";function o(e){let{alert:o,className:c,size:u="regular"}=e,d=(0,r.getAlertInfo)(o);return"error_anomaly"===o.type?(0,t.jsxs)("span",{className:(0,a.cn)(s,"flex",c),children:[(0,t.jsx)("span",{className:"text-gray-900 flex-shrink-0 flex items-center gap-1",children:(0,t.jsx)(i.StatusCodeBadge,{variant:"large"===u?"large":"regular",statusCode:o.data.statusGroup})}),(0,t.jsx)("span",{className:"text-gray-900 whitespace-nowrap",children:"error spike on"}),(0,t.jsx)(n.Tooltip,{className:"truncate min-w-0 inline-block text-ellipsis py-px",text:o.data.route,children:(0,t.jsx)(l.RouteHighlighter,{route:o.data.route,segmentClassName:"large"===u?"text-lg my-1 py-px":"text-[13px]"})})]}):(0,t.jsxs)("span",{className:(0,a.cn)(s,c),children:[(0,t.jsx)("span",{className:"text-gray-1000",children:d.title}),(0,t.jsxs)("span",{className:"text-gray-900",children:[d.changeDirection," by"]}),(0,t.jsx)("span",{className:"text-gray-1000",children:d.changeAmount})]})}e.s(["AlertTitle",()=>o])},8646915,139776,e=>{"use strict";var t=e.i(7909933),r=e.i(1138941),a=e.i(9979783),l=e.i(6060673),n=e.i(9171423);function i(e){throw Error(`Unknown value: ${e}`)}e.s(["assertNever",()=>i],139776);var s=e.i(9668517);function o(){let{alertTypes:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,s.useTeamSlug)(),i=(0,r.useProjectIdOrName)(),{data:o}=(0,l.useProject)(i);return(0,t.default)(()=>n?`alerts-${n}-${o?.id||"all"}-${e?.join("-")||"all"}`:null,async()=>{if(!n)return;let{body:t}=await (0,a.typedFetch)("/alerts/v2/alerts","get",{teamId:n,projectId:o?.id,types:e},{throwOnHTTPError:!0});return{alerts:t}})}function c(e){let n=(0,s.useTeamSlug)(),i=(0,r.useProjectIdOrName)(),{data:o}=(0,l.useProject)(i);return(0,t.default)(()=>n?`alert-${e}-${n}-${o?.id||"all"}`:null,async()=>{if(!n)return;let{body:t}=await (0,a.typedFetch)("/alerts/v2/alerts/{alertId}","get",{teamId:n,alertId:e},{throwOnHTTPError:!0});return t})}function u(){let e=(0,s.useTeamSlug)(),r=(0,t.default)(()=>e?`/alerts/v2/flags?teamId=${e}`:null,async t=>{if(e)return await (0,n.fetchApi)(t)}),a=e=>!!e&&(r?.data?.[e]??!1);return{isAlertTypeEnabled:a,isWebhookEnabled:e=>{let t=d(e);return"all"===t||a(t)},isNotificationEnabled:e=>a(function(e){switch(e){case"alerts-usage-anomaly":return"usage_anomaly";case"alerts-error-anomaly":return"error_anomaly";case"alerts-botid-anomaly":return"botId_anomaly";case"alerts-firewall-system-rule-anomaly":return"firewallSystemRule_anomaly";case"alerts-firewall-custom-rule-anomaly":return"firewallCustomRule_anomaly";default:return i(e)}}(e)),...r}}function d(e){switch(e){case"observability.anomaly":case"observability.usage-anomaly":return"usage_anomaly";case"observability.error-anomaly":case"observability.anomaly-error":return"error_anomaly";case"observability.anomaly-botId":return"botId_anomaly";case"firewall.system-rule-anomaly":return"firewallSystemRule_anomaly";case"firewall.custom-rule-anomaly":return"firewallCustomRule_anomaly";case"alerts.triggered":return"all";default:return null}}e.s(["AlertTypeLabels",0,{usage_anomaly:"Usage",error_anomaly:"Error",botId_anomaly:"Bot ID",firewallSystemRule_anomaly:"Firewall System Rule",firewallCustomRule_anomaly:"Firewall Custom Rule"},"mapWebhookEventToO11yAlertType",()=>d,"useAlert",()=>c,"useAlerts",()=>o,"useAlertsFlags",()=>u],8646915)},7966665,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let a=e.r(2795167);function l(e){return/^[a-f0-9]{40}$/i.test(e)}r.default=function(e,t){let r,n;if("string"!=typeof e||!e.length)return null;if(e.startsWith("git@"))switch(!0){case e.startsWith("git@github.com:"):r="github",n=e.replace("git@github.com:","");break;case t&&e.startsWith(`git@${t}:`):r="ghes",n=e.replace(`git@${t}:`,"");break;case e.startsWith("git@gitlab.com:"):r="gitlab",n=e.replace("git@gitlab.com:","");break;case e.startsWith("git@bitbucket.org:"):r="bitbucket",n=e.replace("git@bitbucket.org:","");break;default:return null}else{let l=a.parse(e);if(!l.pathname)return null;switch(l.hostname){case"github.com":case"www.github.com":r="github";break;case t:r="ghes";break;case"gitlab.com":case"www.gitlab.com":r="gitlab";break;case"bitbucket.org":case"www.bitbucket.org":r="bitbucket";break;default:return null}n=l.pathname.replace(/(^\/|\/$)/g,"")}let i=(n=n.replace(/\.git$/,"")).split("/").filter(Boolean);if(i.length<2)return null;if(2===i.length)return{type:r,owner:i[0],name:i[1],branch:"",sha:"",subdir:""};let s="",o="",c="",u=i[0],d=i[1];if("github"===r)if("blob"!==i[2]&&"tree"!==i[2]&&"commit"!==i[2])return null;else l(i[3])?o=i[3]:s=i[3],c=i.slice(4).join("/");else if("ghes"===r)if("blob"!==i[2]&&"tree"!==i[2]&&"commit"!==i[2])return null;else l(i[3])?o=i[3]:s=i[3],c=i.slice(4).join("/");else if("gitlab"===r)if("-"===i[2])("blob"===i[3]||"tree"===i[3]||"commit"===i[3])&&(l(i[4])?o=i[4]:s=i[4],c=i.slice(5).join("/"));else{let e=i.indexOf("-");-1===e?d=i.slice(1).join("/"):(d=i.slice(1,e).join("/"),("blob"===i[e+1]||"tree"===i[e+1]||"commit"===i[e+1])&&(l(i[e+2])?o=i[e+2]:s=i[e+2],c=i.slice(e+3).join("/")))}else if("bitbucket"===r)if("src"!==i[2]&&"commits"!==i[2])return null;else l(i[3])?o=i[3]:s=i[3],c=i.slice(4).join("/");return{type:r,owner:u,name:d,branch:s,sha:o,subdir:c}}},3023251,e=>{"use strict";var t=e.i(7966665);function r(e){if(!e||"error"in e)return null;switch(e.type){case"github-limited":case"github":return{org:e.org||"",repo:e.repo};case"gitlab":if("projectUrl"in e){let r=(0,t.default)(e.projectUrl);if(r)return{org:r.owner,repo:r.name}}break;case"bitbucket":if("slug"in e)return{org:e.owner,repo:e.slug}}return null}function a(e){let{includeOrg:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r(e);return a?t?`${a.org}/${a.repo}`:a.repo:""}e.s(["getOrgAndRepoFromLink",()=>r,"getRepoFromLink",()=>a])},913614,e=>{"use strict";var t=e.i(7966665);function r(e){let{type:r,org:a,repo:l,projectUrl:n,owner:i,slug:s,host:o}=e;switch(r){case"github-limited":case"github":return`https://github.com/${a}/${l}`;case"gitlab":{let e=(0,t.default)(n||"");return`https://gitlab.com/${e?.owner}/${e?.name}`}case"bitbucket":return`https://bitbucket.org/${i}/${s}`;case"github-custom-host":if(!o)throw Error("Custom host is required for github-custom-host");return`https://${o}/${a}/${l}`;default:return""}}e.s(["getGitRepoUrlFromLink",()=>r])},1357569,e=>{e.v({infoIcon:"project-selector-module__8LnsRG__infoIcon",optionSuffix:"project-selector-module__8LnsRG__optionSuffix",projectSelectorOption:"project-selector-module__8LnsRG__projectSelectorOption",projectSelectorSelect:"project-selector-module__8LnsRG__projectSelectorSelect",projectSelectorSelectedProject:"project-selector-module__8LnsRG__projectSelectorSelectedProject",projectSelectorSelectedXIcon:"project-selector-module__8LnsRG__projectSelectorSelectedXIcon"})},8433839,e=>{"use strict";var t=e.i(8711407),r=e.i(1176592),a=e.i(1360174),l=e.i(6881349),n=e.i(2107254),i=e.i(6048771),s=e.i(3023251),o=e.i(1357569),c=e.i(9722978);function u(e){let{selectedProject:u,onProjectSelected:d,errored:m,disabled:g,placeholder:h,variant:p="default",requireGitRepo:f=!1,showRepo:x=!1}=e,[b,y]=(0,r.useState)(""),j=(0,r.useMemo)(()=>(0,a.default)(y,500),[]),{data:w}=(0,n.default)({limit:8,search:b,latestDeployments:null},{}),v=!!w;return(0,t.jsxs)(l.Combobox,{disabled:g,filter:e=>e,onChange:e=>{d(w?.projects.find(t=>t.id===e)??null),y("")},onClear:()=>y(""),placeholder:h||"Select Project…",prefixIcon:u?.latestDeployments&&u.latestDeployments.length>0?(0,t.jsx)(i.ProjectLogo,{forceFaviconRound:!0,deploymentId:u.latestDeployments[0]?.id??"",framework:u.framework,project:u,size:20}):null,value:u?.name??null,errored:m,children:[(0,t.jsx)(l.Combobox.Input,{onChange:e=>j(e.target.value)}),(0,t.jsx)(l.Combobox.List,{maxVisibleOptions:8,emptyMessage:v?b?`No project found with the name "${b}".`:"No project under this account.":"Loading…",children:w?.projects.map(e=>{let r=void 0!==e.link,a=(0,s.getRepoFromLink)(e.link,{includeOrg:!0}),n=f&&!r;return(0,t.jsx)(l.Combobox.Option,{className:(0,c.clsx)(o.default.projectSelectorOption,"!h-fit","condensed"===p?"py-2":"py-[10px] px-2"),value:e.id,ignoreDefaultHeight:!0,disabled:n,children:(0,t.jsxs)("div",{className:"flex items-baseline gap-2 flex-1 min-w-0",children:[(0,t.jsx)("div",{className:"translate-y-0 flex-shrink-0",children:(0,t.jsx)(i.ProjectLogo,{forceFaviconRound:!0,deploymentId:e.latestDeployments?.[e.latestDeployments.length-1]?.id,framework:e.framework,project:e,size:"condensed"===p?20:24})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:`self-center ${"condensed"===p?"text-copy-13":"font-medium"}`,children:e.name}),x&&a&&(0,t.jsx)("p",{className:"text-copy-12 text-gray-600 truncate",children:a}),f&&!r&&(0,t.jsx)("p",{className:"text-copy-12 text-gray-500",children:"No git repository linked"})]})]})},e.id)})})]})}e.s(["ProjectSelector",()=>u])},1661989,e=>{"use strict";var t=e.i(9668517),r=e.i(9979783),a=e.i(7909933);function l(e){let l=(0,t.useTeamSlug)();return(0,a.default)(()=>l&&e?`alerts-group-${l}-${e}`:null,async()=>{if(!l||!e)return;let{body:t}=await (0,r.typedFetch)("/alerts/v3/groups/{groupId}","get",{teamId:l,groupId:e});return t})}e.s(["useAlertGroup",()=>l])},5406151,5920170,1376250,9324475,e=>{"use strict";var t=e.i(1230902),r=e.i(8492421);function a(e,t,a){var l,n,i,s,o;let c,u,d=Object.assign({},(0,r.getDefaultOptions)()),m=(l=e,n=a.timeZone,i=a.locale??d.locale,new Intl.DateTimeFormat(i?[i.code,"en-US"]:void 0,{timeZone:n,timeZoneName:l}));return"formatToParts"in m?function(e,t){let r=e.formatToParts(t);for(let e=r.length-1;e>=0;--e)if("timeZoneName"===r[e].type)return r[e].value}(m,t):(s=m,o=t,c=s.format(o).replace(/\u200E/g,""),(u=/ [\w-+ ]+$/.exec(c))?u[0].substr(1):"")}let l={year:0,month:1,day:2,hour:3,minute:4,second:5},n={},i=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),s="06/25/2014, 00:00:00"===i||"‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00"===i;function o(e,t,r,a,l,n,i){let s=new Date(0);return s.setUTCFullYear(e,t,r),s.setUTCHours(a,l,n,i),s}let c=/^(Z)$/,u=/^([+-]\d{2})$/,d=/^([+-])(\d{2}):?(\d{2})$/;function m(e,t,r){let a,l;if(!e)return 0;let n=c.exec(e);if(n)return 0;if(n=u.exec(e))return h(a=parseInt(n[1],10))?-(36e5*a):NaN;if(n=d.exec(e)){a=parseInt(n[2],10);let e=parseInt(n[3],10);return h(a,e)?(l=36e5*Math.abs(a)+6e4*e,"+"===n[1]?-l:l):NaN}if(function(e){if(p[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),p[e]=!0,!0}catch(e){return!1}}(e)){var i;t=new Date(t||Date.now());let a=g(r?t:o((i=t).getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()),e);return-(r?a:function(e,t,r){let a=e.getTime()-t,l=g(new Date(a),r);if(t===l)return t;let n=g(new Date(a-=l-t),r);return l===n?l:Math.max(l,n)}(t,a,e))}return NaN}function g(e,t){var r,a,i;let c,u,d,m=(n[r=t]||(n[r]=s?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:r,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:r,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),"formatToParts"in(d=n[r])?function(e,t){try{let r=e.formatToParts(t),a=[];for(let e=0;e<r.length;e++){let t=l[r[e].type];void 0!==t&&(a[t]=parseInt(r[e].value,10))}return a}catch(e){if(e instanceof RangeError)return[NaN];throw e}}(d,e):(a=d,i=e,c=a.format(i),[parseInt((u=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(c))[3],10),parseInt(u[1],10),parseInt(u[2],10),parseInt(u[4],10),parseInt(u[5],10),parseInt(u[6],10)])),g=o(m[0],m[1]-1,m[2],m[3]%24,m[4],m[5],0).getTime(),h=e.getTime(),p=h%1e3;return g-(h-=p>=0?p:1e3+p)}function h(e,t){return -23<=e&&e<=23&&(null==t||0<=t&&t<=59)}let p={},f={X:function(e,t,r){let a=x(r.timeZone,e);if(0===a)return"Z";switch(t){case"X":return j(a);case"XXXX":case"XX":return y(a);default:return y(a,":")}},x:function(e,t,r){let a=x(r.timeZone,e);switch(t){case"x":return j(a);case"xxxx":case"xx":return y(a);default:return y(a,":")}},O:function(e,t,r){let a=x(r.timeZone,e);switch(t){case"O":case"OO":case"OOO":return"GMT"+function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=e>0?"-":"+",a=Math.abs(e),l=Math.floor(a/60),n=a%60;return 0===n?r+String(l):r+String(l)+t+b(n,2)}(a,":");default:return"GMT"+y(a,":")}},z:function(e,t,r){switch(t){case"z":case"zz":case"zzz":return a("short",e,r);default:return a("long",e,r)}}};function x(e,t){let r=e?m(e,t,!0)/6e4:t?.getTimezoneOffset()??0;if(Number.isNaN(r))throw RangeError("Invalid time zone specified: "+e);return r}function b(e,t){let r=Math.abs(e).toString();for(;r.length<t;)r="0"+r;return(e<0?"-":"")+r}function y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=Math.abs(e);return(e>0?"-":"+")+b(Math.floor(r/60),2)+t+b(Math.floor(r%60),2)}function j(e,t){return e%60==0?(e>0?"-":"+")+b(Math.abs(e)/60,2):y(e,t)}function w(e){let t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e-t}let v=/^([0-9W+-]+)(T| )(.*)/,N=/^([0-9W+-]+)(.*)/,T=/^(\d{2})$/,C=[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],S=/^(\d{4})/,R=[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],$=/^-(\d{2})$/,k=/^-?(\d{3})$/,I=/^-?(\d{2})-?(\d{2})$/,E=/^-?W(\d{2})$/,D=/^-?W(\d{2})-?(\d{1})$/,A=/^(\d{2}([.,]\d*)?)$/,F=/^(\d{2}):?(\d{2}([.,]\d*)?)$/,_=/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,L=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/;function M(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(arguments.length<1)throw TypeError("1 argument required, but only "+arguments.length+" present");if(null===e)return new Date(NaN);let r=null==t.additionalDigits?2:Number(t.additionalDigits);if(2!==r&&1!==r&&0!==r)throw RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e))return new Date(e.getTime());if("number"==typeof e||"[object Number]"===Object.prototype.toString.call(e))return new Date(e);if("[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);let a=function(e){let t,r={},a=v.exec(e);if(a?(r.date=a[1],t=a[3]):(a=N.exec(e))?(r.date=a[1],t=a[2]):(r.date=null,t=e),t){let e=L.exec(t);e?(r.time=t.replace(e[1],""),r.timeZone=e[1].trim()):r.time=t}return r}(e),{year:l,restDateString:n}=function(e,t){if(e){let r=C[t],a=R[t],l=S.exec(e)||a.exec(e);if(l){let t=l[1];return{year:parseInt(t,10),restDateString:e.slice(t.length)}}if(l=T.exec(e)||r.exec(e)){let t=l[1];return{year:100*parseInt(t,10),restDateString:e.slice(t.length)}}}return{year:null}}(a.date,r),i=function(e,t){let r,a,l;if(null===t)return null;if(!e||!e.length)return(r=new Date(0)).setUTCFullYear(t),r;let n=$.exec(e);if(n)return(r=new Date(0),U(t,a=parseInt(n[1],10)-1))?(r.setUTCFullYear(t,a),r):new Date(NaN);if(n=k.exec(e)){r=new Date(0);let e=parseInt(n[1],10);return!function(e,t){if(t<1)return!1;let r=V(e);return(!r||!(t>366))&&(!!r||!(t>365))}(t,e)?new Date(NaN):(r.setUTCFullYear(t,0,e),r)}if(n=I.exec(e)){r=new Date(0),a=parseInt(n[1],10)-1;let e=parseInt(n[2],10);return U(t,a,e)?(r.setUTCFullYear(t,a,e),r):new Date(NaN)}if(n=E.exec(e))return B(l=parseInt(n[1],10)-1)?O(t,l):new Date(NaN);if(n=D.exec(e)){l=parseInt(n[1],10)-1;let e=parseInt(n[2],10)-1;return B(l,e)?O(t,l,e):new Date(NaN)}return null}(n,l);if(null===i||isNaN(i.getTime())||!i)return new Date(NaN);{let e,r=i.getTime(),l=0;if(a.time&&(null===(l=function(e){let t,r,a=A.exec(e);if(a)return Z(t=parseFloat(a[1].replace(",",".")))?t%24*36e5:NaN;if(a=F.exec(e))return Z(t=parseInt(a[1],10),r=parseFloat(a[2].replace(",",".")))?t%24*36e5+6e4*r:NaN;if(a=_.exec(e)){t=parseInt(a[1],10),r=parseInt(a[2],10);let e=parseFloat(a[3].replace(",","."));return Z(t,r,e)?t%24*36e5+6e4*r+1e3*e:NaN}return null}(a.time))||isNaN(l)))return new Date(NaN);if(a.timeZone||t.timeZone){if(isNaN(e=m(a.timeZone||t.timeZone,new Date(r+l))))return new Date(NaN)}else e=w(new Date(r+l)),e=w(new Date(r+l+e));return new Date(r+l+e)}}function O(e,t,r){t=t||0,r=r||0;let a=new Date(0);a.setUTCFullYear(e,0,4);let l=7*t+r+1-(a.getUTCDay()||7);return a.setUTCDate(a.getUTCDate()+l),a}let P=[31,28,31,30,31,30,31,31,30,31,30,31],H=[31,29,31,30,31,30,31,31,30,31,30,31];function V(e){return e%400==0||e%4==0&&e%100!=0}function U(e,t,r){if(t<0||t>11)return!1;if(null!=r){if(r<1)return!1;let a=V(e);if(a&&r>H[t]||!a&&r>P[t])return!1}return!0}function B(e,t){return!(e<0)&&!(e>52)&&(null==t||!(t<0)&&!(t>6))}function Z(e,t,r){return!(e<0)&&!(e>=25)&&(null==t||!(t<0)&&!(t>=60))&&(null==r||!(r<0)&&!(r>=60))}e.s(["toDate",()=>M],5920170);let G=/([xXOz]+)|''|'(''|[^'])+('|$)/g;function z(e,t,r){let a=m(t,e=M(e,r),!0),l=new Date(e.getTime()-a),n=new Date(0);return n.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),n.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),n}function Y(e,r,a,l){return l={...l,timeZone:r,originalDate:e},function(e,r){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=(r=String(r)).match(G);if(l){let t=M(a.originalDate||e,a);r=l.reduce(function(e,r){if("'"===r[0])return e;let l=e.indexOf(r),n="'"===e[l-1],i=e.replace(r,"'"+f[r[0]](t,r,a)+"'");return n?i.substring(0,l-1)+i.substring(l+1):i},r)}return(0,t.format)(e,r,a)}(z(e,r,{timeZone:l.timeZone}),a,l)}e.s(["toZonedTime",()=>z],1376250),e.s(["formatInTimeZone",()=>Y],9324475),e.s([],5406151)},2415772,e=>{"use strict";e.i(5406151);var t=e.i(9324475),r=e.i(5920170);function a(e,r){return(0,t.formatInTimeZone)(e,r||"Etc/Utc","yyyy-MM-dd HH:mm:ss")}function l(e){return(0,r.toDate)(e,{timeZone:"Etc/Utc"})}e.i(6048454),Object.keys(e.i(1283928).AllDimensions).map(e=>[e,RegExp(`\\b${e}\\b`)]),e.s(["fromTbDateTimeString",()=>l,"tbDateTime",()=>a])},7163088,e=>{"use strict";var t=e.i(8711407),r=e.i(3306538),a=e.i(57106),l=e.i(1176592),n=e.i(7909933),i=e.i(5338940),s=e.i(5441366),o=e.i(2936702),c=e.i(3646124);e.i(9623499);var u=e.i(5576066),d=e.i(3993360),m=e.i(6317369),g=e.i(2504781),h=e.i(8161149),p=e.i(7608222),f=e.i(5467025);let x=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],b=e=>`$${e.toFixed(3)}`,y=e=>e.toString(),j=e=>{if(e<60)return`${e}s`;let t=Math.floor(e/60),r=e%60;if(t<60)return r>0?`${t}m ${r}s`:`${t}m`;let a=Math.floor(t/60),l=t%60;return l>0?`${a}h ${l}m`:`${a}h`},w=l.default.memo(function(e){let{repositoryOwner:r,repositoryName:a,pullRequestNumber:l,commitSha:n}=e.row.original,i=`https://github.com/${r}/${a}/pull/${l}`,{getColor:s}=(0,f.useObservabilityChartContext)(),o=n?n.substring(0,7):"";return(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-ellipsis text-nowrap py-2 text-gray-900",children:[(0,t.jsx)("div",{className:"inline-block w-0.5 rounded h-[14px] shrink-0 -ml-1.5 mr-1",style:{backgroundColor:s("repositoryName",a)}}),(0,t.jsx)(u.Link,{href:i,external:!0,icon:!1,className:"hover:underline text-gray-900 truncate",children:`${r}/${a} #${l}${o?` (${o})`:""}`})]})}),v=l.default.memo(function(e){let{row:r,cell:a,column:l}=e,n=r.original.maxCost;return(0,t.jsx)(c.BarCell,{...e,cell:{...a,value:r.original.numericCost},maxValue:n,column:{...l,cellFormatter:b}})}),N=l.default.memo(function(e){let{row:r,cell:a,column:l}=e,n=r.original.maxComments;return(0,t.jsx)(c.BarCell,{...e,cell:{...a,value:r.original.reviewComments||0},maxValue:n,column:{...l,cellFormatter:y}})}),T=l.default.memo(function(e){let{row:r,cell:a,column:l}=e,n=r.original.maxReviewTime,i=r.original.reviewTimeSeconds||0;return(0,t.jsx)(c.BarCell,{...e,cell:{...a,value:i},maxValue:n,column:{...l,cellFormatter:j}})}),C=l.default.memo(function(e){let{row:r,cell:a,column:l}=e,n=r.original.maxFilesRead,i=r.original.filesRead||0;return(0,t.jsx)(c.BarCell,{...e,cell:{...a,value:i},maxValue:n,column:{...l,cellFormatter:y}})});function S(e){let{data:r,team:n}=e,i=void 0===r,[u,f]=(0,l.useState)(!1),y=(0,l.useCallback)((e,t,r)=>{let a=(r||"").toLowerCase().trim();return a?e.filter(e=>{if(e.original.isSkeleton)return!1;let t=e.original,r=String(t.repository||"").toLowerCase(),l=String(t.pullRequestNumber||"").toLowerCase(),n=String(t.repositoryOwner||"").toLowerCase(),i=String(t.repositoryName||"").toLowerCase(),s=String(t.commitSha||"").toLowerCase();return r.includes(a)||l.includes(a)||n.includes(a)||i.includes(a)||s.includes(a)}):e},[]),j=(0,l.useMemo)(()=>{if(!r||0===r.length)return[];let e=[...r].sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()),t=0,a=0,l=0,n=0;for(let r of e){let e=r.cost||r.tokenCost||0,i=r.reviewComments||0,s=r.reviewTimeSeconds||0,o=r.filesRead||0;e>t&&(t=e),i>a&&(a=i),s>l&&(l=s),o>n&&(n=o)}return e.map(e=>{let r,i,s,o=e.cost||e.tokenCost||0,c=new Date(e.timestamp.endsWith("Z")?e.timestamp:`${e.timestamp}Z`);return{...e,formattedTime:(r=c.getHours().toString().padStart(2,"0"),i=c.getMinutes().toString().padStart(2,"0"),s=c.getSeconds().toString().padStart(2,"0"),`${x[c.getMonth()]} ${c.getDate()} ${r}:${i}:${s}`),timestampDate:c,repository:`${e.repositoryOwner}/${e.repositoryName} #${e.pullRequestNumber}`,formattedCost:b(o),numericCost:o,maxCost:t,maxComments:a,maxReviewTime:l,maxFilesRead:n}})},[r]),S=(0,l.useCallback)(async()=>{try{f(!0),await new Promise(e=>setTimeout(e,0));let e=(Array.isArray(r)?r:[]).map(e=>{let t=e.timestamp.endsWith("Z")?e.timestamp:`${e.timestamp}Z`,r=e.cost||e.tokenCost||0;return[String(t),`${e.repositoryOwner}/${e.repositoryName}`,String(e.pullRequestNumber||""),String(e.commitSha||""),Number.isFinite(e.reviewComments)?String(e.reviewComments):"0",Number.isFinite(r)?String(r):"0",Number.isFinite(e.reviewTimeSeconds)?String(1e3*e.reviewTimeSeconds):"0",Number.isFinite(e.filesRead)?String(e.filesRead):"0"]}),t=["Time,Repository,Pull Request,Commit SHA,Suggestions,Cost,Review Time (ms),Files Read",...e.map(e=>e.map((e,t)=>{let r,a;return t<=3?(r=/[",\n\r]/.test(e),a=e.replace(/"/g,'""'),r?`"${a}"`:a):e}).join(","))].join("\r\n"),a=new Blob([`\uFEFF${t}`],{type:"text/csv;charset=utf-8;"}),l=URL.createObjectURL(a),n=document.createElement("a");n.href=l,n.download="pr-review-usage-events.csv",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(l)}finally{f(!1)}},[r]),R=(0,l.useMemo)(()=>[{Header:"Review",accessor:"repository",sortDescFirst:!1,Cell:w},{Header:"Suggestions",accessor:"reviewComments",columnClassName:"w-28 max-w-28 min-w-28 hidden lg:table-cell",Cell:N},{Header:"Review Time",accessor:"reviewTimeSeconds",columnClassName:"w-32 max-w-32 min-w-32",Cell:T},{Header:"Files Read",accessor:"filesRead",columnClassName:"w-32 max-w-32 min-w-32",Cell:C},{Header:"Cost",accessor:"numericCost",columnClassName:"w-32 max-w-32 min-w-32 hidden lg:table-cell",Cell:v},{Header:"Time",accessor:"timestampDate",columnClassName:"w-20 max-w-20 min-w-20",sortDescFirst:!1,Cell:c.RelativeTimeCell}],[]);if(!i&&0===j.length){let e=n?.vadeReview?.enabled??!1,r=n?.slug;return e?(0,t.jsx)("div",{className:"flex flex-col items-center justify-center",children:(0,t.jsx)(h.EmptyState.Root,{icon:(0,t.jsx)(h.EmptyState.Icon,{icon:(0,t.jsx)(m.GitPullRequest,{size:32})}),title:"No reviews yet",description:`Reviews are made on pull requests that are created after ${p.VERCEL_AGENT_NAME} is enabled.`})}):(0,t.jsx)("div",{className:"flex flex-col items-center justify-center",children:(0,t.jsx)(h.EmptyState.Root,{title:`${p.VERCEL_AGENT_NAME} not enabled`,description:`${p.VERCEL_AGENT_NAME} automatically reviews pull requests with deep understanding of your code and how it behaves in production.`,children:r&&(0,t.jsxs)(a.ButtonLink,{type:"default",href:`/${r}/~/settings#${p.VERCEL_AGENT_NAME.toLowerCase().replaceAll(" ","-")}`,children:["Enable ",p.VERCEL_AGENT_NAME]})})})}return(0,t.jsx)(o.SonarTable,{columns:R,data:j,defaultSort:[{id:"timestampDate",desc:!0}],isLoading:i,plugins:[s.useGlobalFilter,s.useSortBy,s.usePagination],getHoveredValue:e=>e?.repositoryName,globalFilter:y,autoResetPage:!0,renderCustomActions:()=>(0,t.jsx)(g.Button,{prefix:(0,t.jsx)(d.Download,{}),type:"secondary",loading:u,disabled:i||u||!r||0===r.length,onClick:S,children:u?"Exporting…":"Export CSV"})})}var R=e.i(3169345),$=e.i(198667);function k(e){let{onRetry:r}=e;return(0,t.jsx)("div",{className:"material-base flex flex-col p-4 space-y-4 md:max-w-sm [@media(width>=700px)]:max-w-full",children:(0,t.jsxs)(R.Table,{children:[(0,t.jsxs)(R.Table.Colgroup,{children:[(0,t.jsx)(R.Table.Col,{}),(0,t.jsx)(R.Table.Col,{}),(0,t.jsx)(R.Table.Col,{}),(0,t.jsx)(R.Table.Col,{className:"hidden lg:table-cell"}),(0,t.jsx)(R.Table.Col,{className:"hidden lg:table-cell"}),(0,t.jsx)(R.Table.Col,{})]}),(0,t.jsx)(R.Table.Header,{children:(0,t.jsxs)(R.Table.Row,{children:[(0,t.jsx)(R.Table.Head,{children:"Duration"}),(0,t.jsx)(R.Table.Head,{children:"Repository"}),(0,t.jsx)(R.Table.Head,{children:"PR"}),(0,t.jsx)(R.Table.Head,{className:"hidden lg:table-cell",children:"Comments"}),(0,t.jsx)(R.Table.Head,{className:"hidden lg:table-cell",children:"Cost"}),(0,t.jsx)(R.Table.Head,{children:"Review Time"})]})}),(0,t.jsx)(R.Table.Body,{children:(0,t.jsx)(R.Table.Row,{children:(0,t.jsx)(R.Table.Cell,{colSpan:6,className:"text-center py-8",children:(0,t.jsxs)("div",{className:"flex flex-col items-center space-y-3",children:[(0,t.jsx)("p",{className:"text-copy-14 text-gray-700",children:"Failed to load PR review events"}),r&&(0,t.jsx)(g.Button,{type:"secondary",onClick:r,prefix:(0,t.jsx)($.RefreshClockwise,{}),children:"Retry"})]})})})})]})})}var I=e.i(8151845),E=e.i(2415772),D=e.i(1233856);function A(){let{team:e}=(0,i.useTeam)(),{start:r,end:a}=(0,I.useRangeFromQueryState)(),{stableStart:s,stableEnd:o}=(0,l.useMemo)(()=>{let e={minutes:1};return{stableStart:(0,D.startOfDuration)(r,e),stableEnd:(0,D.startOfDuration)(a,e)}},[r,a]),c=(0,l.useMemo)(()=>{if(!e)return null;let t=(0,E.tbDateTime)(s),r=(0,E.tbDateTime)(o);return`/api/agent/pr-review-usage-events?ownerId=${e.id}&startTime=${t}&endTime=${r}`},[e,s,o]),{data:u,error:d,mutate:m}=(0,n.default)(c,async e=>{let t=await fetch(e);if(!t.ok){let e=Error("Failed to fetch PR review events");throw e.status=t.status,e}return t.json()},{revalidateIfStale:!1,refreshInterval:0});return d?(0,t.jsx)(k,{onRetry:()=>m()}):(0,t.jsx)(S,{data:u?.data,team:e})}var F=e.i(5182595),_=e.i(3351543),L=e.i(9179929),M=e.i(5481907),O=e.i(2466450);let P=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:3,maximumFractionDigits:3});function H(){let{data:e,isLoading:r,isRelativeTime:a,builderQuery:l}=(0,M.useSonarQuery)({event:"prReview",rollups:{value:{measure:"cost",aggregation:"sum"}},groupBy:["repositoryName"],reason:"agent",summaryOnly:!1,limit:5,tailRollup:"others",granularity:{hours:1}},{noEnvironmentFilter:!0}),n="repositoryName",i=(0,L.useTimeseriesData)(e,{category:n,rollupName:"value"});return(0,t.jsxs)(_.ChartCard,{children:[(0,t.jsx)(_.CardHeader,{title:"Cost"}),(0,t.jsx)("div",{className:"-mt-0.5 h-[190px]",children:(0,t.jsx)(F.LineChart,{builderQuery:l?.value,sonarQueryResults:e,data:i??[],getColor:n,disableLegend:!0,isLoading:r,isRelativeTime:a,lineType:"step",granularity:{hours:1},formatAxisValue:e=>(0,O.formatCurrency)(100*e,"usd","short"),formatValue:e=>P.format(e)})})]})}function V(){let e={hours:1},{data:r,isLoading:a,isRelativeTime:n,builderQuery:i}=(0,M.useSonarQuery)({event:"reviewedPrComplete",rollups:{positiveComments:{measure:"goodReviewComments",aggregation:"sum"},totalComments:{measure:"totalReviewComments",aggregation:"sum"}},reason:"agent",summaryOnly:!1,granularity:e},{noEnvironmentFilter:!0}),s=(0,l.useMemo)(()=>r?.data?r.data.map(e=>{let t=Number(e.positiveComments)||0,r=Math.max(0,(Number(e.totalComments)||0)-t);return{name:e.timestamp.toISOString(),Accepted:t,Ignored:r}}):[],[r?.data]);return(0,t.jsxs)(_.ChartCard,{children:[(0,t.jsx)(_.CardHeader,{href:"",title:"Suggestions Made"}),(0,t.jsx)("div",{className:"-mt-0.5 h-[190px]",children:(0,t.jsx)(F.LineChart,{builderQuery:i?.positiveComments,sonarQueryResults:r,data:s??[],getColor:e=>"Accepted"===e?"var(--ds-green-700)":"var(--ds-gray-500)",disableLegend:!0,isLoading:a,isRelativeTime:n,lineType:"step",granularity:e})})]})}function U(){return(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[(0,t.jsx)(V,{}),(0,t.jsx)(H,{})]})}var B=e.i(5255926),Z=e.i(8646915),G=e.i(9997017),z=e.i(1661989);let Y=e=>Number(e)?`$${Number(e).toFixed(3)}`:"-",W=e=>{if(void 0===e)return"-";let t=Math.round(e);if(t<60)return`${t}s`;let r=Math.floor(t/60),a=t%60;if(r<60)return a>0?`${r}m ${a}s`:`${r}m`;let l=Math.floor(r/60),n=r%60;return n>0?`${l}h ${n}m`:`${l}h`},q=l.default.memo(function(e){let{alertId:r,teamSlug:a,groupId:l}=e.row.original,{data:n}=(0,z.useAlertGroup)(l),i=l?n?.alerts?.[0]?.id:r;return(0,t.jsx)("div",{className:"text-ellipsis text-nowrap overflow-hidden",children:(0,t.jsx)(u.Link,{href:i?`/${a}/~/observability/alerts/${i}`:void 0,external:!0,icon:!1,className:"hover:underline text-gray-900 truncate",children:void 0===r?"Error Alert":(0,t.jsx)(X,{alertId:r})})})});function X(e){let{alertId:r}=e,{data:a,isLoading:l}=(0,Z.useAlert)(r);return l||void 0===a?(0,t.jsx)(B.Skeleton,{width:100,height:14}):(0,t.jsx)(G.AlertTitle,{alert:a,size:"regular"})}function Q(e){let{data:r,team:n}=e,i=void 0===r,u=(0,l.useMemo)(()=>{if(!r||0===r.length)return[];let e={maxValue:{duration:0,cost:0}},t=r.map(t=>({...t,meta:e,teamSlug:n?.slug,groupId:t.metadata?.groupId,alertId:t.metadata?.alertId,duration:t.metadata?.durationSeconds===void 0?void 0:Number(t.metadata?.durationSeconds),cost:t.metadata?.totalCostUsd===void 0?void 0:Number(t.metadata?.totalCostUsd)})),a=t.reduce((e,t)=>Math.max(e,t.duration??0),0),l=t.reduce((e,t)=>Math.max(e,t.cost??0),0);return e.maxValue.duration=a,e.maxValue.cost=l,t},[r,n?.slug]),d=(0,l.useMemo)(()=>[{Header:"Alert",accessor:"alertId",sortDescFirst:!1,Cell:q},{Header:"Duration",accessor:"duration",columnClassName:"w-28 max-w-28 min-w-28 hidden lg:table-cell",Cell:c.BarCell,cellFormatter:W},{Header:"Cost",accessor:"cost",columnClassName:"w-32 max-w-32 min-w-32 hidden lg:table-cell",Cell:c.BarCell,cellFormatter:Y},{Header:"Time",accessor:"createdAt",columnClassName:"w-20 max-w-20 min-w-20",sortDescFirst:!1,Cell:c.RelativeTimeCell}],[]);if(!i&&0===u.length){let e=n?.alertInvestigation?.enabled??!0,r=n?.slug;return e?(0,t.jsx)("div",{className:"flex flex-col items-center justify-center",children:(0,t.jsx)(h.EmptyState.Root,{icon:(0,t.jsx)(h.EmptyState.Icon,{icon:(0,t.jsx)(m.GitPullRequest,{size:32})}),title:"No Investigations Yet",description:`Investigations are performed on alerts that are created after ${p.VERCEL_AGENT_NAME} Investigations are enabled. 10 free investigations are included each month with Observability Plus.`})}):(0,t.jsx)("div",{className:"flex flex-col items-center justify-center",children:(0,t.jsx)(h.EmptyState.Root,{title:`${p.VERCEL_AGENT_NAME} Investigations are not enabled`,description:`${p.VERCEL_AGENT_NAME} automatically investigates anomaly alerts.`,children:r&&(0,t.jsxs)(a.ButtonLink,{type:"default",href:`/${r}/~/settings#${p.VERCEL_AGENT_NAME.toLowerCase().replaceAll(" ","-")}`,children:["Enable ",p.VERCEL_AGENT_NAME]})})})}return(0,t.jsx)(o.SonarTable,{columns:d,data:u,defaultSort:[{id:"createdAt",desc:!0}],isLoading:i,plugins:[s.useSortBy,s.usePagination],autoResetPage:!0,showSearch:!1})}function J(e){let{onRetry:r}=e;return(0,t.jsx)("div",{className:"material-base flex flex-col p-4 space-y-4 md:max-w-sm [@media(width>=700px)]:max-w-full",children:(0,t.jsxs)(R.Table,{children:[(0,t.jsxs)(R.Table.Colgroup,{children:[(0,t.jsx)(R.Table.Col,{}),(0,t.jsx)(R.Table.Col,{className:"hidden lg:table-cell"}),(0,t.jsx)(R.Table.Col,{})]}),(0,t.jsx)(R.Table.Header,{children:(0,t.jsxs)(R.Table.Row,{children:[(0,t.jsx)(R.Table.Head,{children:"Alert"}),(0,t.jsx)(R.Table.Head,{children:"Duration"}),(0,t.jsx)(R.Table.Head,{className:"lg:table-cell",children:"Cost"}),(0,t.jsx)(R.Table.Head,{children:"Time"})]})}),(0,t.jsx)(R.Table.Body,{children:(0,t.jsx)(R.Table.Row,{children:(0,t.jsx)(R.Table.Cell,{colSpan:4,className:"text-center py-8",children:(0,t.jsxs)("div",{className:"flex flex-col items-center space-y-3",children:[(0,t.jsx)("p",{className:"text-copy-14 text-gray-700",children:"Failed to load investigation tasks"}),r&&(0,t.jsx)(g.Button,{type:"secondary",onClick:r,prefix:(0,t.jsx)($.RefreshClockwise,{}),children:"Retry"})]})})})})]})})}function K(){let{team:e}=(0,i.useTeam)(),{start:r,end:a}=(0,I.useRangeFromQueryState)(),{stableStart:s,stableEnd:o}=(0,l.useMemo)(()=>{let e={minutes:1};return{stableStart:(0,D.startOfDuration)(r,e),stableEnd:(0,D.startOfDuration)(a,e)}},[r,a]),c=(0,l.useMemo)(()=>e?`/vercel-agent/api/activity?teamId=${e.id}&startTime=${s.toISOString()}&endTime=${o.toISOString()}`:null,[e,s,o]),{data:u,error:d,mutate:m}=(0,n.default)(c,async e=>{let t=await fetch(e);if(!t.ok){let e=Error("Failed to fetch investigation tasks");throw e.status=t.status,e}return t.json()},{revalidateIfStale:!1,refreshInterval:0});return d?(0,t.jsx)(J,{onRetry:()=>m()}):(0,t.jsx)(Q,{data:u?.activities,team:e})}var ee=e.i(4597921),et=e.i(1875382),er=e.i(9334091),ea=e.i(8522580),el=e.i(8433839),en=e.i(8042625),ei=e.i(277234),es=e.i(4244280),eo=e.i(134877);async function ec(e){try{let t=await (0,ei.fetchAPI)(e,{throwOnHTTPError:!0});return t.deployment?.id||null}catch(e){if((0,eo.isAPIError)(e)&&404===e.status)return null;throw e}}var eu=e.i(3023251),ed=e.i(913614),em=e.i(3959677),eg=e.i(8943871),eh=e.i(9668517);function ep(){var e;let r=(0,et.useRouter)(),{team:s}=(0,i.useTeam)(),o=(0,eh.useTeamSlug)(),[c,u]=(0,l.useState)(""),[d,m]=(0,l.useState)(null),[h,p]=(0,l.useState)(!1),[f,x]=(0,l.useState)(null),{deploymentId:b,loading:y}=function(e){let{team:t,isLoading:r,isReady:a}=(0,i.useTeam)(),l=e?.id&&t?.id?`${(0,es.API_PROJECTS_VERSION)("v1")}/${e.id}/production-deployment${(0,en.encode)({teamId:t.id})}`:null,{data:s,error:o,isLoading:c}=(0,n.default)(l,ec);return{deploymentId:void 0!==s&&(s||e?.latestDeployments?.[0]?.id)||null,loading:c&&void 0===s||r||!a,error:o}}(d),j=async()=>{if(c.trim()&&d&&s?.id){if(!d.link)return void x({success:!1,error:"The selected project must have a git repository linked"});if(!b)return void x({success:!1,error:"No deployment found for the selected project"});p(!0),x(null);try{let e=`${es.API_VADE_CODE}${(0,en.encode)({teamId:s.id})}`,t=await (0,ei.fetchAPI)(e,{method:"POST",body:JSON.stringify({prompt:{text:c},deploymentId:b}),throwOnHTTPError:!1});x(t),t.threadId&&o&&r.push(`/${o}/~/agent/threads/${t.threadId}`)}catch(e){x({success:!1,error:e instanceof Error?e.message:"An error occurred"})}finally{p(!1)}}},w=d?.link!==void 0,v=d?(0,eu.getRepoFromLink)(d.link,{includeOrg:!0}):"",N=!d?.link||"error"in d.link?null:(0,ed.getGitRepoUrlFromLink)(d.link),T=c.trim()&&d&&w&&!h&&!y&&b,C=f&&!f.threadId&&f.error,S=C?f.message||((e=f.error)?"string"==typeof e?e:e.message||e.code||"An error occurred":"")||"An error occurred":"";return(0,t.jsxs)("div",{className:"space-y-4 rounded-lg border border-gray-300 p-4",children:[(0,t.jsxs)("div",{className:"space-y-4 flex flex-col gap-4",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"code-prompt",className:"mb-1.5 block text-copy-13 font-medium text-gray-1000",children:"Prompt"}),(0,t.jsx)(er.Textarea,{id:"code-prompt",placeholder:"Ask Vercel Agent to build",value:c,onChange:e=>u(e.target.value),disabled:h,width:"100%",rows:4})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"project-selector",className:"mb-1.5 block text-copy-13 font-medium text-gray-1000",children:"Project"}),(0,t.jsx)(el.ProjectSelector,{selectedProject:d,onProjectSelected:m,disabled:h,placeholder:"Select a project...",requireGitRepo:!0,showRepo:!0}),d&&!w&&(0,t.jsx)(ea.Note,{type:"warning",fill:!0,className:"mt-2",children:(0,t.jsx)("p",{className:"text-copy-12",children:"This project does not have a git repository linked. Please link a git repository in the project settings."})}),(0,t.jsxs)("div",{className:"mt-2 flex items-center gap-2 flex-wrap",children:[d&&w&&v?N?(0,t.jsxs)(a.Link,{href:N,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 px-2 rounded-full pl-[5px] pr-2 py-[2px] font-medium border bg-background-100 hover:bg-gray-200 hover:border-gray-600 text-xs text-gray-900",children:[(0,t.jsx)(em.default,{width:12,height:12}),(0,t.jsx)("span",{className:"whitespace-nowrap",children:v})]}):(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 rounded-full pl-[5px] pr-2 py-[2px] font-medium border bg-background-100 text-xs text-gray-900",children:[(0,t.jsx)(em.default,{width:12,height:12}),(0,t.jsx)("span",{className:"whitespace-nowrap",children:v})]}):d&&!w?null:(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 rounded-full pl-[5px] pr-2 py-[2px] font-medium border bg-background-100 text-xs text-gray-900 opacity-0 pointer-events-none",children:[(0,t.jsx)(em.default,{width:12,height:12}),(0,t.jsx)("span",{className:"whitespace-nowrap",children:"placeholder"})]}),d?y?(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 rounded-full pl-[5px] pr-2 py-[2px] font-medium border bg-background-100 text-xs text-gray-900",children:[(0,t.jsx)(eg.Box,{width:12,height:12}),(0,t.jsx)(B.Skeleton,{height:"12px",width:"160px"})]}):b?(0,t.jsxs)(a.Link,{href:`/${o}/${d.name}/${b.replace("dpl_","")}`,className:"inline-flex items-center gap-1 px-2 rounded-full pl-[5px] pr-2 py-[2px] font-medium border bg-background-100 hover:bg-gray-200 hover:border-gray-600 text-xs text-gray-900",children:[(0,t.jsx)(eg.Box,{width:12,height:12}),(0,t.jsx)("span",{className:"font-mono text-[11px]",children:b})]}):(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 rounded-full pl-[5px] pr-2 py-[2px] font-medium border bg-background-100 text-xs text-gray-900 opacity-0 pointer-events-none",children:[(0,t.jsx)(eg.Box,{width:12,height:12}),(0,t.jsx)("span",{className:"font-mono text-[11px]",children:"placeholder"})]}):(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 rounded-full pl-[5px] pr-2 py-[2px] font-medium border bg-background-100 text-xs text-gray-900 opacity-0 pointer-events-none",children:[(0,t.jsx)(eg.Box,{width:12,height:12}),(0,t.jsx)("span",{className:"font-mono text-[11px]",children:"placeholder"})]})]})]})]}),(0,t.jsx)(g.Button,{onClick:j,disabled:!T,loading:h,className:"mt-2 w-fit",children:"Submit"})]}),C&&(0,t.jsx)(ea.Note,{type:"error",fill:!0,children:(0,t.jsx)("p",{children:S})})]})}function ef(){let{teamSlug:e}=(0,i.useTeam)(),l=(0,ee.useServerFlag)("enable-vercel-agent-code",!1);return(0,t.jsx)(f.ObservabilityChartContextProvider,{children:(0,t.jsx)("div",{className:"w-full space-y-10",children:(0,t.jsxs)("div",{className:"space-y-10",children:[l&&(0,t.jsxs)("section",{className:"space-y-5",children:[(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("h2",{className:"text-heading-20",children:"Code Generation"}),(0,t.jsx)(r.Badge,{size:"sm",children:"Internal"})]}),(0,t.jsx)("p",{className:"max-w-[800px] text-gray-900",children:"Fix bugs, improve performance, or add features to your codebase."})]}),e&&(0,t.jsx)(a.Link,{href:`/${e}/~/agent/threads`,className:"text-copy-12 text-blue-600 hover:underline",children:"View all threads"})]}),(0,t.jsx)(ep,{})]}),(0,t.jsxs)("section",{className:"space-y-5",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("h2",{className:"text-heading-20",children:"Code Reviews"}),(0,t.jsxs)("p",{className:"max-w-[800px] text-gray-900",children:["Catch bugs before they reach production."," ",(0,t.jsx)(a.Link,{className:"text-blue-900",external:!0,href:"/docs/agent/overview",children:"Learn more"})]})]}),(0,t.jsxs)("div",{className:"space-y-5",children:[(0,t.jsx)(U,{}),(0,t.jsx)(A,{})]})]}),(0,t.jsxs)("section",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("h2",{className:"text-heading-20",children:"Investigations"}),(0,t.jsxs)("p",{className:"text-gray-900",children:["Understand & fix production incidents faster with root-cause analysis."," ",(0,t.jsx)(a.Link,{className:"text-blue-900",external:!0,href:"/docs/agent/investigation",children:"Learn more"})]})]}),(0,t.jsx)(K,{})]})]})})})}e.s(["default",()=>ef],7163088)}]);

//# debugId=7262c21a-d115-f632-3bad-d0a38d400f60
//# sourceMappingURL=12fadac17f719b2a.js.map