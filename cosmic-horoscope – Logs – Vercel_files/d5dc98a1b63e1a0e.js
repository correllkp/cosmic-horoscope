;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="0fac6f0e-56d0-cf19-3e8e-e59a06adb042")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,2807115,e=>{"use strict";var i=e.i(8711407),l=e.i(8674454),s=e.i(6694387),n=e.i(4991687),t=e.i(8459493),r=e.i(5468328),o=e.i(8876434),a=e.i(6143247),c=e.i(1176592),d=e.i(854682),u=e.i(1875382);e.i(6728635);var j=e.i(2630141);e.i(3182268);var x=e.i(7849855),h=e.i(7114658),b=e.i(1717203),y=e.i(7557283),p=e.i(6891161),g=e.i(8522580);let m=e=>{let{active:l,projectName:s,onClose:n,onConfirm:t}=e,[r,o]=(0,c.useState)(!1),a=async()=>{o(!0);try{await t(),n()}finally{o(!1)}};return(0,i.jsxs)(p.Modal.Modal,{active:l,onClickOutside:n,width:"500px",children:[(0,i.jsx)(p.Modal.Body,{children:(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsx)(p.Modal.Title,{children:"Exclude Project from Observability Plus?"}),(0,i.jsxs)("p",{children:["Excluding ",(0,i.jsx)("strong",{children:s})," from Observability Plus will disable the following features for this project:"]}),(0,i.jsxs)(g.Note,{type:"warning",children:[(0,i.jsx)("strong",{children:"Anomaly Alerts"})," will stop being sent"]}),(0,i.jsx)(g.Note,{type:"warning",children:"Logs retention will decrease from 14 days to 3 days"}),(0,i.jsx)(g.Note,{type:"warning",children:"Data will no longer appear in the Query Builder"}),(0,i.jsx)("p",{children:"You can re-enable Observability Plus for this project at any time."})]})}),(0,i.jsxs)(p.Modal.Actions,{children:[(0,i.jsx)(p.Modal.Action,{disabled:r,onClick:n,type:"secondary",children:"Cancel"}),(0,i.jsx)(p.Modal.Action,{disabled:r,loading:r,onClick:a,type:"error",children:"Exclude Project"})]})]})};var v=e.i(60582);function P(e){let{children:r,className:x}=e,h=(0,u.useParams)(),{hasObservabilityPlusAccess:b,impersonating:y,hasObservabilityPlusSubscribed:p}=(0,d.useHasObservabilityPlus)(),g=(0,j.useOpenEnableModal)(),[m,P]=(0,c.useState)(!1);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.MenuContainer,{position:"bottom-end",children:[(0,i.jsx)(s.MenuButton,{"aria-label":"More Actions",className:(0,a.cn)("shrink-0",x),shape:"square",svgOnly:!0,type:v.IS_DASH?"tertiary":"secondary",children:(0,i.jsx)(o.MoreHorizontal,{})}),(0,i.jsxs)(l.Menu,{width:230,children:[r,b?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.MenuItem,{isLink:!0,href:`/${h?.teamSlug}/~/settings/billing#observability`,children:"Configure Observability Plus"}),(0,i.jsx)(f,{onOpenExcludeModal:()=>P(!0)})]}):null,b&&(!y||p)?null:(0,i.jsx)(t.MenuItem,{onClick:()=>g({via:"header-menu"}),children:"Upgrade to Observability Plus"})]})]}),(0,i.jsx)(M,{active:m,onClose:()=>P(!1)})]})}function f(e){let{onOpenExcludeModal:l}=e,{can:s,isLoading:n}=(0,b.default)(),{isObservabilityPlusForProjectsFlagEnabled:r,toggleObservabilityPlusForProject:o,isCurrentProjectExcluded:a,isValidating:c}=(0,h.useObservabilityPlusForProjects)(),{projectSlug:d}=(0,x.useProjectSlug)();if(!r||!d)return null;let u=!n&&s(y.Action.Update,y.Resource.ObservabilityConfiguration);return a?(0,i.jsx)(t.MenuItem,{disabled:!u||c||n,onClick:()=>{d&&o({projectName:d,disabled:!1})},children:(0,i.jsx)(O,{text:u?void 0:"Please ask your team owners",children:"Include Project in Plus"})}):(0,i.jsx)(t.MenuItem,{disabled:!u||c||n,onClick:l,type:"error",children:(0,i.jsx)(O,{text:u?void 0:"Please ask your team owners",children:"Exclude Project from Plus"})})}function M(e){let{active:l,onClose:s}=e,{toggleObservabilityPlusForProject:n}=(0,h.useObservabilityPlusForProjects)(),{projectSlug:t}=(0,x.useProjectSlug)();return t?(0,i.jsx)(m,{active:l,projectName:t,onClose:s,onConfirm:async()=>{t&&await n({projectName:t,disabled:!0})}}):null}function O(e){let{text:l,children:s}=e;return l?(0,i.jsx)(r.Tooltip,{text:l,children:s}):s}e.s(["OptionsMenu",()=>P],2807115)}]);

//# debugId=0fac6f0e-56d0-cf19-3e8e-e59a06adb042
//# sourceMappingURL=9e934f57a74f94fa.js.map