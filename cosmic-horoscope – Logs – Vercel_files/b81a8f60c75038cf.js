;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="15287fc5-3e9e-df79-4484-4c0983dd6f7c")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3496900,e=>{"use strict";let t=(0,e.i(9334638).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M11.75 0.189331L12.2803 0.719661L15.2803 3.71966L15.8107 4.24999L15.2803 4.78032L5.15901 14.9016C4.45575 15.6049 3.50192 16 2.50736 16H0.75H0V15.25V13.4926C0 12.4981 0.395088 11.5442 1.09835 10.841L11.2197 0.719661L11.75 0.189331ZM11.75 2.31065L9.81066 4.24999L11.75 6.18933L13.6893 4.24999L11.75 2.31065ZM2.15901 11.9016L8.75 5.31065L10.6893 7.24999L4.09835 13.841C3.67639 14.2629 3.1041 14.5 2.50736 14.5H1.5V13.4926C1.5 12.8959 1.73705 12.3236 2.15901 11.9016ZM9 16H16V14.5H9V16Z" fill="currentColor"/>');e.s(["PencilEdit",0,t])},7886235,e=>{e.v({checked:"toggle-module__fUrgQa__checked",disabled:"toggle-module__fUrgQa__disabled",input:"toggle-module__fUrgQa__input "+e.i(5472387).visuallyHidden,large:"toggle-module__fUrgQa__large",medium:"toggle-module__fUrgQa__medium",noMargin:"toggle-module__fUrgQa__noMargin",switchFirst:"toggle-module__fUrgQa__switchFirst",thumb:"toggle-module__fUrgQa__thumb",thumbIcon:"toggle-module__fUrgQa__thumbIcon",titleCasing:"toggle-module__fUrgQa__titleCasing",toggle:"toggle-module__fUrgQa__toggle",wrapper:"toggle-module__fUrgQa__wrapper"})},1906681,e=>{"use strict";var t=e.i(8711407),s=e.i(1176592),i=e.i(9722978),l=e.i(4004502),a=e.i(9544652),n=e.i(7886235);let r={amber:{background:"--ds-amber-700",foreground:"--ds-amber-100",lightModeForeground:"--ds-amber-1000",checkedBackground:"--ds-gray-100"},"amber-inverted":{background:"--ds-gray-100",foreground:"--ds-gray-100",lightModeForeground:"--ds-amber-1000",checkedBackground:"--ds-amber-700"},"amber-track-only":{background:"--ds-amber-700",foreground:"--ds-black",lightModeForeground:"--ds-black",checkedBackground:"--ds-gray-100"},red:{background:"--ds-red-600",foreground:"--ds-red-100",lightModeForeground:"--ds-red-1000",checkedBackground:"--ds-gray-100"}},o=e=>{let{className:o,children:c,size:d,disabled:u,name:m,checked:h,onChange:g,onClick:p,onBlur:f,onFocus:x,onKeyDown:j,noMargin:y,direction:v="label-first",labelCasing:b="title",stopPropagation:S=!1,icon:C,color:A,...M}=e,T=(0,a.useDisabled)()||u,w=(0,s.useCallback)(e=>{!T&&g&&(S&&e.stopPropagation(),g(!h))},[h,g,T,S]),I={...M.style};if(A){let e=r[A];I["--unchecked-bg-color-override"]=`var(${e.background})`,I["--checked-bg-color-override"]=`var(${e.checkedBackground})`,I["--thumb-fg-color-override"]=`var(${e.foreground})`,e.lightModeForeground&&(I["--thumb-light-fg-color-override"]=`var(${e.lightModeForeground})`)}return(0,t.jsxs)("label",{className:(0,i.clsx)(n.default.wrapper,o,{[String(n.default.large)]:"large"===d,[String(n.default.medium)]:"medium"===d,[String(n.default.switchFirst)]:"switch-first"===v,[String(n.default.titleCasing)]:"title"===b}),"data-version":"v1",...M,style:I,children:[c?(0,t.jsx)("span",{children:c}):null,(0,t.jsx)("input",{checked:h,className:(0,i.clsx)(n.default.input,"group"),"data-testid":(0,l.tid)(M["data-testid"]??"toggle","input"),disabled:T,name:m,onBlur:f,onChange:w,onClick:p,onFocus:x,onKeyDown:e=>{"Enter"===e.key&&w(e),j?.(e)},type:"checkbox"}),(0,t.jsx)("span",{className:(0,i.clsx)(n.default.toggle,{[String(n.default.checked)]:h,[String(n.default.disabled)]:T,[String(n.default.noMargin)]:y},""),children:(0,t.jsx)("div",{className:(0,i.clsx)(n.default.thumb,{[String(n.default.checked)]:h}),children:C?(0,t.jsxs)("div",{"aria-hidden":!0,className:(0,i.clsx)({[String(n.default.checked)]:h,[String(n.default.thumbIcon)]:!T},"flex justify-center items-center w-full h-full",T?"text-gray-700":"text-gray-900 dark:text-background-100"),children:[h?C.checked:null,h?null:C.unchecked]}):null})})]})};e.s(["Toggle",()=>o])},7957251,e=>{"use strict";let t=(0,e.i(9334638).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M14.5 8C14.5 11.5899 11.5899 14.5 8 14.5C4.41015 14.5 1.5 11.5899 1.5 8C1.5 4.41015 4.41015 1.5 8 1.5C11.5899 1.5 14.5 4.41015 14.5 8ZM16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8ZM5 7.25H4.25V8.75H5H11H11.75V7.25H11H5Z" fill="currentColor"/>');e.s(["MinusCircle",0,t])},6855136,e=>{e.v({avatar:"group-module__Dj5yHG__avatar",group:"group-module__Dj5yHG__group",note:"group-module__Dj5yHG__note",noteText:"group-module__Dj5yHG__noteText"})},7609806,e=>{"use strict";var t=e.i(8711407),s=e.i(9722978),i=e.i(1176592),l=e.i(1344973),a=e.i(4585051),n=e.i(6855136),r=e.i(3025777),o=e.i(3896588),c=e.i(6683690);let d=(0,i.memo)(e=>{let{member:s,size:i,showIcon:l,iconBackground:n,lazy:d=!1}=e;return"teamId"in s?(0,t.jsx)(a.Avatar,{lazy:d,size:i,teamId:s.teamId,title:s.teamName},s.teamId):s.githubUser?(0,t.jsx)("span",{title:s.name,children:(0,t.jsx)(r.GitHubAvatar,{iconBackground:n,lazy:d,showIcon:l,size:i,username:s.username})},s.username):s.gitlabUser?(0,t.jsx)("span",{title:s.name,children:(0,t.jsx)(o.GitLabAvatar,{iconBackground:n,lazy:d,showIcon:l,size:i,url:s.url})},s.username):s.bitbucketUser?(0,t.jsx)("span",{title:s.name,children:(0,t.jsx)(c.BitbucketAvatar,{iconBackground:n,lazy:d,showIcon:l,size:i,url:s.url})},s.username):s.username?(0,t.jsx)(a.Avatar,{size:i,username:s.username},s.username):s.url?(0,t.jsx)(a.Avatar,{size:i,url:s.url},s.url):(0,t.jsx)(a.Avatar,{size:i,uid:s.uid},s.uid)});d.displayName="GroupAvatar";let u=e=>{let{members:i,limit:a=3,extra:r=0,size:o=24,showIcon:c=!1,iconBackground:u=!0,ariaHidden:m,lazy:h=!1}=e;0===a&&(a=i.length),a-=1;let g=i.slice(0,a),p=i.slice(a),f=p.length+r,x=f>9?"9+":`+${f}`,j=`${f} more avatars in this group`;return(0,t.jsxs)("div",{"aria-hidden":m,className:n.default.group,children:[g.map(e=>(0,t.jsx)("span",{className:n.default.avatar,children:"component"in e?e.component:(0,t.jsx)(d,{member:e,size:o,showIcon:c,iconBackground:u,lazy:h})},"teamId"in e?e.teamId:e.uid||e.username||e.url)),p.length||r>0?(0,t.jsxs)("span",{"aria-label":j,className:(0,s.clsx)(n.default.note,{[n.default.avatar||""]:p.length}),title:j,children:[p.length?"component"in p[0]?p[0].component:(0,t.jsx)(d,{member:p[0],size:o,showIcon:c,iconBackground:u,lazy:h}):null,f>1?(0,t.jsx)(l.Text,{as:"span",className:(0,s.clsx)(n.default.noteText,"dark-theme"),color:"gray-1000",size:10,weight:600,children:x}):null]}):null]})};u.displayName="AvatarGroup";let m=(0,i.memo)(u);e.s(["AvatarGroup",0,m])},7674801,e=>{"use strict";let t=(0,e.i(9334638).withNewIcon)(`<g clip-path="url(#clip0_872_3147)">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M8 0C3.58 0 0 3.57879 0 7.99729C0 11.5361 2.29 14.5251 5.47 15.5847C5.87 15.6547 6.02 15.4148 6.02 15.2049C6.02 15.0149 6.01 14.3851 6.01 13.7154C4 14.0852 3.48 13.2255 3.32 12.7757C3.23 12.5458 2.84 11.836 2.5 11.6461C2.22 11.4961 1.82 11.1262 2.49 11.1162C3.12 11.1062 3.57 11.696 3.72 11.936C4.44 13.1455 5.59 12.8057 6.05 12.5957C6.12 12.0759 6.33 11.726 6.56 11.5261C4.78 11.3262 2.92 10.6364 2.92 7.57743C2.92 6.70773 3.23 5.98797 3.74 5.42816C3.66 5.22823 3.38 4.40851 3.82 3.30888C3.82 3.30888 4.49 3.09895 6.02 4.1286C6.66 3.94866 7.34 3.85869 8.02 3.85869C8.7 3.85869 9.38 3.94866 10.02 4.1286C11.55 3.08895 12.22 3.30888 12.22 3.30888C12.66 4.40851 12.38 5.22823 12.3 5.42816C12.81 5.98797 13.12 6.69773 13.12 7.57743C13.12 10.6464 11.25 11.3262 9.47 11.5261C9.76 11.776 10.01 12.2558 10.01 13.0056C10.01 14.0752 10 14.9349 10 15.2049C10 15.4148 10.15 15.6647 10.55 15.5847C12.1381 15.0488 13.5182 14.0284 14.4958 12.6673C15.4735 11.3062 15.9996 9.67293 16 7.99729C16 3.57879 12.42 0 8 0Z" fill="currentColor"/>
  </g>
  <defs>
  <clipPath id="clip0_872_3147">
  <rect width="16" height="16" fill="white"/>
  </clipPath>
  </defs>`);e.s(["LogoGithub",0,t])},3025777,e=>{"use strict";var t=e.i(8711407),s=e.i(1176592),i=e.i(7674801),l=e.i(76079);let a=e=>{let{username:s,size:a=30,showIcon:n=!0,iconSize:r=14,iconBackground:o=!0,icon:c=(0,t.jsx)(i.LogoGithub,{className:"text-[#000000]",height:r,width:r}),lazy:d=!1,...u}=e;s||(s="404");let m=s&&`https://avatars.githubusercontent.com/${s.replace("[bot]","")}?s=${2*a}`;return(0,t.jsx)(l.AvatarWithIcon,{gitType:"github",icon:n?c:null,iconBackground:o,lazy:d,size:a,src:m,...u})};a.displayName="GitHubAvatar";let n=(0,s.memo)(a);e.s(["GitHubAvatar",0,n])},3896588,e=>{"use strict";var t=e.i(8711407),s=e.i(1176592),i=e.i(76079);let l=e=>{let{url:s,size:l=30,showIcon:a=!0,iconSize:n=14,iconBackground:r=!0,lazy:o=!1,...c}=e;return s&&(c=Object.assign(c,{src:s})),(0,t.jsx)(i.AvatarWithIcon,{gitType:"gitlab",icon:a?(0,t.jsxs)("svg",{"aria-label":"gitlab",height:n,style:{color:"white"},viewBox:"0 0 24 22",width:n,children:[(0,t.jsx)("path",{d:"M1.279 8.29L.044 12.294c-.117.367 0 .78.325 1.014l11.323 8.23-.009-.012-.03-.039L1.279 8.29zM22.992 13.308a.905.905 0 00.325-1.014L22.085 8.29 11.693 21.52l11.299-8.212z",fill:"currentColor"}),(0,t.jsx)("path",{d:"M1.279 8.29l10.374 13.197.03.039.01-.006L22.085 8.29H1.28z",fill:"currentColor",opacity:"0.4"}),(0,t.jsx)("path",{d:"M15.982 8.29l-4.299 13.236-.004.011.014-.017L22.085 8.29h-6.103zM7.376 8.29H1.279l10.374 13.197L7.376 8.29z",fill:"currentColor",opacity:"0.6"}),(0,t.jsx)("path",{d:"M18.582.308l-2.6 7.982h6.103L19.48.308c-.133-.41-.764-.41-.897 0zM1.279 8.29L3.88.308c.133-.41.764-.41.897 0l2.6 7.982H1.279z",fill:"currentColor",opacity:"0.4"})]}):null,iconBackground:r,lazy:o,size:l,...c})};l.displayName="GitLabAvatar";let a=(0,s.memo)(l);e.s(["GitLabAvatar",0,a])},6683690,e=>{"use strict";var t=e.i(8711407),s=e.i(1176592),i=e.i(76079);let l=(0,s.memo)(e=>{let{size:s=30,showIcon:l=!0,iconSize:a=14,iconBackground:n=!0,lazy:r=!1,...o}=e;return(0,t.jsx)(i.AvatarWithIcon,{gitType:"bitbucket",icon:l?(0,t.jsxs)("svg",{height:a,viewBox:"-2 -2 65 59",width:a,children:[(0,t.jsx)("defs",{children:(0,t.jsxs)("linearGradient",{id:"bitbucket-:r3:",x1:"104.953%",x2:"46.569%",y1:"21.921%",y2:"75.234%",children:[(0,t.jsx)("stop",{offset:"7%","stop-color":"currentColor","stop-opacity":".4"}),(0,t.jsx)("stop",{offset:"100%","stop-color":"currentColor"})]})}),(0,t.jsx)("path",{d:"M59.696 18.86h-18.77l-3.15 18.39h-13L9.426 55.47a2.71 2.71 0 001.75.66h40.74a2 2 0 002-1.68l5.78-35.59z",fill:"url(#bitbucket-:r3:)",fillRule:"nonzero",transform:"translate(-.026 .82)"}),(0,t.jsx)("path",{d:"M2 .82a2 2 0 00-2 2.32l8.49 51.54a2.7 2.7 0 00.91 1.61 2.71 2.71 0 001.75.66l15.76-18.88H24.7l-3.47-18.39h38.44l2.7-16.53a2 2 0 00-2-2.32L2 .82z",fill:"currentColor",fillRule:"nonzero"})]}):null,iconBackground:n,lazy:r,size:s,...o})});e.s(["BitbucketAvatar",0,l])},7602085,e=>{e.v({noBorder:"tabs-module__Da1ZWG__noBorder",tab:"tabs-module__Da1ZWG__tab",tabIcon:"tabs-module__Da1ZWG__tabIcon",tabs:"tabs-module__Da1ZWG__tabs"})},4237893,e=>{"use strict";var t=e.i(8711407),s=e.i(9722978),i=e.i(1176592),l=e.i(5468328),a=e.i(7602085);function n(e){let{tabs:l,selected:n,setSelected:c,variant:d,disabled:u,border:m=!0,style:h,tabClassName:g,className:p,...f}=e,[x,j]=(0,i.useState)(!0),y=(0,i.useRef)(null),[v,b]=(0,i.useState)(l[0]?.value),S=void 0!==n,C=S?n:v;function A(e){S||b(e.value),c?.(e.value)}function M(e){if(!u){if("ArrowLeft"===e.key){let e=l.findIndex(e=>e.value===C)-1,t=l[e];if(t?.disabled)return;e>=0&&t&&(o(y.current,e),A(t),j(!1))}else if("ArrowRight"===e.key){let e=l.findIndex(e=>e.value===C)+1,t=l[e];if(t?.disabled)return;e<l.length&&t&&(o(y.current,e),A(t),j(!1))}}}return(0,t.jsx)("div",{"aria-orientation":"horizontal",className:(0,s.clsx)("geist-no-scrollbar",a.default.tabs,p,{[a.default.noBorder]:!m}),"data-geist-tabs":"","data-variant":d,"data-version":"v1",ref:y,role:"tablist",style:h,...f,children:l.map((e,s)=>(0,t.jsx)(r,{...e,disabled:e.disabled||u,isActive:e.value===C,onKeyDown:M,onMouseDown:()=>A(e),setShowFocusRing:j,showFocusRing:x,tabClassName:g},s))})}function r(e){let{tooltip:n,icon:r,title:o,isActive:c,showFocusRing:d,setShowFocusRing:u,onKeyDown:m,onMouseDown:h,disabled:g,tabClassName:p,...f}=e,x=(0,i.useId)();return(0,t.jsx)(l.Tooltip,{disableTriggers:void 0===n,text:n,children:(0,t.jsxs)("button",{"aria-controls":x,"aria-selected":c,className:(0,s.clsx)(a.default.tab,p),"data-geist-tab":"","data-show-focus-ring":d,disabled:g,id:x,onBlur:()=>{u?.(!0)},onFocus:()=>{h?.()},onKeyDown:m,role:"tab",tabIndex:c?0:-1,type:"button",...f,children:[r?(0,t.jsx)("div",{className:a.default.tabIcon,children:r}):null,o]})})}function o(e,t){if(!e)return;let s=e.querySelector(`[data-index="${t}"]`);s?.focus({preventScroll:!0})}e.s(["Tabs",()=>n])},2107254,e=>{"use strict";var t=e.i(1176592),s=e.i(7909933),i=e.i(3924999),l=e.i(8577132),a=e.i(8042625),n=e.i(277234),r=e.i(4244280),o=e.i(9668517),c=e.i(5140444);function d(e){let{version:t,until:s,limit:i,latestDeployments:l,search:n,slug:o,excludeRepos:c,edgeConfigId:d,edgeConfigTokenId:u,connectConfigurationId:m,from:h,sortByElasticConcurrency:g,buildMachineTypes:p,includePermissions:f}=e;return`${(0,r.API_PROJECTS_VERSION)(t)}${(0,a.encode)({until:s,limit:i,latestDeployments:l,search:n,slug:o,excludeRepos:c,edgeConfigId:d,edgeConfigTokenId:u,connectConfigurationId:m,from:h,sortByElasticConcurrency:g,buildMachineTypes:p,includePermissions:f})}`}let u=null;function m(e,t){let{limit:s=8,latestDeployments:i=3,excludeReposRef:l}=e,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"v9",c=`${(0,r.API_PROJECTS_VERSION)(o)}${(0,a.encode)({limit:s,latestDeployments:i,slug:t,excludeRepos:l?.current[0]??null})}`;u=[c,(0,n.fetchAPI)(c)]}function h(e,t){let s,i,{sortByElasticConcurrency:l}=t;return l&&"string"==typeof e?s=e:"number"==typeof e&&(i=e),{from:s,until:i}}function g(){let{fetchEnabled:e=!0,limit:a=8,latestDeployments:r=3,search:c,excludeReposRef:m,revalidateFirstPage:g=!0,edgeConfigId:p,edgeConfigTokenId:f,connectConfigurationId:x,version:j="v9",slug:y,sortByElasticConcurrency:v,buildMachineTypes:b,includePermissions:S}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},C=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},A=arguments.length>2&&void 0!==arguments[2]&&arguments[2],M=arguments.length>3&&void 0!==arguments[3]&&arguments[3],T=(0,l.useRouter)(),w=(0,o.useTeamSlug)(),I=y||w,E=(0,i.default)((t,s)=>{if(!e||T&&!T.isReady)return null;if(!t)return d({version:j,limit:a,latestDeployments:r,search:c,slug:I,excludeRepos:m?.current[0]??null,edgeConfigId:p,edgeConfigTokenId:f,connectConfigurationId:x,sortByElasticConcurrency:v,buildMachineTypes:b,includePermissions:S});let{until:i,from:l}=h(s?.pagination.next,{sortByElasticConcurrency:v});return i||l?d({version:j,until:i,limit:a,latestDeployments:r,search:c,slug:I,excludeRepos:m?.current[t]??null,edgeConfigId:p,edgeConfigTokenId:f,connectConfigurationId:x,from:l,sortByElasticConcurrency:v,buildMachineTypes:b,includePermissions:S}):null},async e=>{if(u&&u[0]===e){let e=await u[1];return u=null,e}return(0,n.fetchAPI)(e,{throwOnHTTPError:!0})},{...C,keepPreviousData:M,revalidateFirstPage:g,persistSize:!0}),_=!!E.data,k=!!((E.data?.[E.data.length-1]?.projects.length??0)<a||E.data?.[E.data.length-1]?.pagination.next===null),N=(0,t.useMemo)(()=>E.data?E.data.flatMap(e=>e.projects):[],[E.data]),P=_&&0===N.length,R=!!(E.data&&E.size>E.data.length);return(0,s.default)(()=>{if(A||!E.data||k)return null;let e=E.data[E.data.length-1],{from:t,until:s}=h(e?.pagination.next,{sortByElasticConcurrency:v});return d({version:j,until:s,limit:a,latestDeployments:r,search:c,slug:I,excludeRepos:m?.current[0]??null,edgeConfigId:p,edgeConfigTokenId:f,connectConfigurationId:x,from:t,sortByElasticConcurrency:v,buildMachineTypes:b,includePermissions:S})},e=>(0,n.fetchAPI)(e,{throwOnHTTPError:!0})),[E,{projects:N,initialDataLoaded:_,isEmpty:P,loadMore:()=>E.setSize(e=>e+1),isLoadingMore:R,isReachingEnd:k,isValidating:E.isValidating}]}function p(){let{fetchEnabled:e=!0,limit:i,from:d,linked:u,search:m,hasProductionDomains:h,domain:g,latestDeployments:p=3,deploymentInfo:f,includePermissions:x=!1,edgeConfigId:j,edgeConfigTokenId:y,connectConfigurationId:v,excludeConnectConfigurationId:b,staticIpsEnabled:S,teamId:C}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},M=arguments.length>2?arguments[2]:void 0,T=arguments.length>3?arguments[3]:void 0,w=(0,o.useTeamSlug)(),I=(0,l.useRouter)(),{user:E,isNorthstar:_}=(0,c.useUser)(),[k,N]=(0,t.useState)(m);return(0,t.useEffect)(()=>{N(e=>e===m?e:m)},[m]),{...(0,s.default)(()=>e&&(!I||I.isReady)&&E&&(!_||E.defaultTeamId||C)?`${(0,r.API_PROJECTS_VERSION)("v8")}${(0,a.encode)({from:d||null,limit:i,linked:!!u||null,search:k,hasProductionDomains:h?"1":null,domain:g,latestDeployments:void 0===p?null:p,deploymentInfo:f||null,slug:M||w,includePermissions:x,edgeConfigId:j,edgeConfigTokenId:y,connectConfigurationId:v,excludeConnectConfigurationId:b,staticIpsEnabled:void 0===S?null:Number(S).toString(),teamId:C||null})}`:null,e=>(0,n.fetchAPI)(e,{throwOnHTTPError:!0,throwOnScopeAuthError:T?.throwOnScopeAuthError}),A),updateSearch:N,search:k}}e.s(["default",()=>p,"preloadProjectListInfinite",()=>m,"useProjectListInfinite",()=>g],2107254)},8587921,7873387,e=>{"use strict";var t=e.i(1176592),s=e.i(7909933),i=e.i(3924999),l=e.i(8042625),a=e.i(277234),n=e.i(4244280),r=e.i(9668517),o=e.i(5338940),c=e.i(1717203),d=e.i(7557283);let u=e=>(s,i,l)=>{let a=(0,t.useRef)(void 0),n=e(s,i,l);(0,t.useEffect)(()=>{void 0!==n.data&&(a.current=n.data)},[n.data]);let r=(0,t.useCallback)(()=>{a.current=void 0},[]);return{...n,data:void 0===n.data?a.current:n.data,isLagging:void 0===n.data&&void 0!==a.current,resetLaggy:r}};function m(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{search:m,limit:h,role:g,eligibleMembersForProjectId:p,sort:f="date_desc",filterByUserIds:x,includeEntitlements:j,mfaStateFilter:y,includePermissionRequests:v}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},b=arguments.length>2&&void 0!==arguments[2]&&arguments[2],S=arguments.length>3&&void 0!==arguments[3]&&arguments[3],{isReady:C,team:A}=(0,o.useTeam)(),{isLoading:M,can:T}=(0,c.default)(),w=!M&&T(d.Action.List,d.Resource.TeamFellowMembership),I=(0,r.useTeamSlug)(),E=h||20,_=(0,i.default)((e,t)=>{if(!C||!A||!w)return null;if(0===e)return`${n.API_TEAMS_MEMBERS_V3}/${A.id}/members${(0,l.encode)({sort:f,limit:E,search:m,role:g,eligibleMembersForProjectId:p,filterByUserIds:x,includeEntitlements:!!j||void 0,filterByMfaState:"all"!==y?y:void 0,includePermissionRequests:v})}`;let s=t?.pagination.nextPageCursor;return s?`${n.API_TEAMS_MEMBERS_V3}/${A.id}/members${(0,l.encode)({sort:f,limit:E,nextPageCursor:s,search:m,role:g,eligibleMembersForProjectId:p,includeEntitlements:!!j||void 0,filterByMfaState:"all"!==y?y:void 0,includePermissionRequests:v})}`:null},e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0}),{...e,use:b?[u]:[]});(0,t.useEffect)(()=>{b&&_.resetLaggy()},[I,b]);let k=(0,t.useMemo)(()=>_.data?.flatMap(e=>e.members.slice(0,E))||[],[_.data,E]),N=(0,t.useMemo)(()=>_.data?.flatMap(e=>e.permissionRequests||[])||[],[_.data]),P=!!_.data,R=P&&0===k.length,G=!!(P&&_.data&&_.size>_.data.length),L=!!(P&&_.data&&!_.data[_.data.length-1]?.pagination?.nextPageCursor);return(0,s.default)(()=>{if(!S||!_.data||L||!C||!A)return null;let e=_.data[_.data.length-1].pagination.nextPageCursor;return`${n.API_TEAMS_MEMBERS_V3}/${A.id}/members${(0,l.encode)({sort:f,limit:E,nextPageCursor:e,search:m,role:g,eligibleMembersForProjectId:p,includeEntitlements:j,filterByMfaState:"all"!==y?y:void 0,includePermissionRequests:v})}`},e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0})),[_,{members:k,permissionRequests:N.filter(e=>null!=e),initialDataLoaded:P,isEmpty:R,loadMore:()=>_.setSize(_.size+1),isLoadingMore:G,isReachingEnd:L,isLagging:_.isLagging}]}function h(){let{sort:e="date_desc",limit:t=20,filterByUserIds:i,until:r,role:u,includeEntitlements:m,includePermissionRequests:h}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{isReady:p,team:f}=(0,o.useTeam)(),{isLoading:x,can:j}=(0,c.default)(),y=!x&&j(d.Action.List,d.Resource.TeamFellowMembership);return(0,s.default)(()=>p&&f&&y?`${n.API_TEAMS_MEMBERS_V3}/${f.id}/members${(0,l.encode)({sort:e,until:r,limit:t,role:u,filterByUserIds:i,includeEntitlements:m,includePermissionRequests:h})}`:null,e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0}),g)}function g(e){let{limit:t=20,until:i,role:r,sort:o="date_desc"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,s.default)(()=>e?`${n.API_TEAMS_MEMBERS_V3}/${e.id}/members${(0,l.encode)({until:i,limit:t,role:r,sort:o})}`:null,e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0}),c)}function p(){let{limit:e=25,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{can:n,isLoading:u}=(0,c.default)(),m=!u&&n(d.Action.Create,d.Resource.TeamFellowMembership),{isReady:h,team:g}=(0,o.useTeam)(),p=(0,r.useTeamSlug)(),f=(0,i.default)((t,s)=>{if(!h||!g||!m)return null;if(!t)return`/api/teams/${p}/members/suggested${(0,l.encode)({limit:e})}`;let i=s?.members,a=i?.length===e?i[i.length-1].email:null;return a?`/api/teams/${p}/members/suggested${(0,l.encode)({limit:e,from:a})}`:null},e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0}),s),x=(0,t.useMemo)(()=>f.data?.flatMap(t=>t.members.slice(0,e))||[],[f.data,e]),j=!!f.data,y=j&&0===x.length,v=!!(j&&f.data&&f.size>f.data.length),b=!!(j&&f.data&&f.data[f.data.length-1]?.members.length<e);return[f,{members:x,initialDataLoaded:j,isEmpty:y,loadMore:()=>f.setSize(f.size+1),isLoadingMore:v,isReachingEnd:b}]}e.s(["default",0,u],7873387),e.s(["MEMBERS_LIMIT",0,20,"default",()=>h,"useMembersForTeam",()=>g,"useMembersInfinite",()=>m,"useSuggestedMembersInfinite",()=>p],8587921)},935882,e=>{"use strict";let t=e.i(1176592).useLayoutEffect;e.s(["default",0,t])},4772117,e=>{e.v({removeShadow:"member-multiselect-module__BGbahq__removeShadow"})},8441880,e=>{"use strict";var t=e.i(8711407),s=e.i(9722978),i=e.i(1176592),l=e.i(4237893),a=e.i(2064047),n=e.i(1906681),r=e.i(8522580),o=e.i(5468328),c=e.i(1848296),d=e.i(3869281),u=e.i(5756088),m=e.i(4899593),h=e.i(7750276),g=e.i(8129674),p=e.i(1235157),f=e.i(4585051),x=e.i(2504781),j=e.i(779588),y=e.i(8161149),v=e.i(8459493),b=e.i(8835183),S=e.i(5883567),C=e.i(7957251),A=e.i(5585544),M=e.i(5338940),T=e.i(57106),w=e.i(1821888),I=e.i(9689002),E=e.i(1492947),_=e.i(8735244),k=e.i(2331152),N=e.i(3322724),P=e.i(8587921),R=e.i(1236612),G=e.i(9261674),L=e.i(84614),z=e.i(8435318);function $(e){let{alreadySelected:s=[],onSelect:l,children:a,isOpen:n,setIsOpen:r}=e,o=(0,N.useIsMobile)(),c=(0,G.useCommand)({selected:0}),[d,u]=(0,P.useMembersInfinite)({},{search:c.inputValue}),m=u.members.filter(e=>!(!e.confirmed||s.includes(e.uid)));return((0,i.useEffect)(()=>{!u.initialDataLoaded||u.isReachingEnd||u.isLoadingMore||u.loadMore(),n||c.setInputValue("")},[n]),o)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(E.Drawer,{onDismiss:()=>r(!1),show:n,children:(0,t.jsx)(O,{commandProps:c,isLoadingMore:u.isLoadingMore,isSwrLoading:d.isLoading,memberData:u,members:m,onSelect:l,setIsOpen:r})}),a]}):(0,t.jsxs)(w.Root,{onOpenChange:e=>{e||c.setInputValue(""),r(e)},open:n,children:[(0,t.jsx)(w.Trigger,{asChild:!0,children:a}),(0,t.jsx)(w.Portal,{children:(0,t.jsx)(w.Content,{align:"start",className:z.default.content,side:"bottom",children:(0,t.jsx)(O,{commandProps:c,isLoadingMore:u.isLoadingMore,isSwrLoading:d.isLoading,memberData:u,members:m,onSelect:l,setIsOpen:r})})})]})}function O(e){let{commandProps:i,isSwrLoading:l,isLoadingMore:a,onSelect:n,members:r,memberData:o,setIsOpen:c}=e,d=l||a;return(0,t.jsx)("div",{className:(0,s.clsx)(L.default.command,L.default.primary,z.default.command,"tailwind"),children:(0,t.jsxs)(R.Command,{...i,children:[(0,t.jsxs)("div",{className:(0,s.clsx)("flex flex-row items-center justify-start flex-initial",L.default.input),children:[(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-initial w-6",children:d?(0,t.jsx)(_.Spinner,{color:"var(--accents-3)"}):(0,t.jsx)(k.MagnifyingGlass,{color:"gray-500",size:20})}),(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-initial grow",children:(0,t.jsx)(R.Command.Input,{placeholder:"Find a team member"})}),(0,t.jsx)(I.Kbd,{children:"Esc"})]}),(0,t.jsxs)(R.Command.List,{className:z.default.list,children:[0===r.length&&i.inputValue.length&&!l?(0,t.jsx)(B,{onClear:()=>{i.setInputValue("")},prompt:i.inputValue}):null,d||0!==r.length||i.inputValue.length?null:(0,t.jsx)(D,{}),r.map(e=>(0,t.jsx)(R.Command.Item,{callback:()=>{n&&n(e),c(!1),i.setInputValue("")},className:(0,s.clsx)(z.default.item),value:`${e.username} ${e.name} ${e.email}`,children:(0,t.jsxs)("div",{title:`${e.username}, ${e.email}`,className:"flex flex-row items-center justify-start gap-2 flex-1 w-full max-w-full",children:[(0,t.jsx)(f.Avatar,{hash:e.avatar,size:24}),(0,t.jsx)("p",{className:"text-copy-14 truncate flex-1",children:e.name||e.username})]})},e.uid)),o.isReachingEnd?null:(0,t.jsx)(R.Command.Item,{callback:()=>{o.loadMore()},className:(0,s.clsx)(z.default.item),children:(0,t.jsx)("div",{className:"flex flex-col items-center justify-start flex-initial w-full",children:(0,t.jsx)("p",{className:"text-copy-14",children:o.isLoadingMore?"Loading…":"Load more"})})})]})]})})}function D(){return(0,t.jsx)("div",{className:"flex flex-col items-center justify-center gap-3 flex-initial p-4",children:(0,t.jsx)("p",{className:"text-copy-14 flex-1",children:"Every member that can be added has been added."})})}function B(e){let{onClear:s,prompt:i}=e;return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3 flex-initial p-4",children:[(0,t.jsxs)("p",{className:"text-copy-14 flex-1",children:['No results for "',i,'"']}),(0,t.jsx)(x.Button,{onClick:s,size:"small",type:"secondary",children:"Clear search"})]})}var H=e.i(4772117);function U(e){let{members:l,onAddMember:n,onRemoveMember:c,disabled:u,isAccessGroupDsyncManaged:m,isOpen:h,setIsOpen:g}=e,{team:p}=(0,M.useTeam)(),[y,A]=(0,i.useState)(""),[w,I]=(0,i.useState)(),E=l.filter(e=>!y||`${e.username} ${e.name} ${e.email}`.toLowerCase().includes(y.toLowerCase())),_=E.every(e=>w?.has(e.uid));(0,i.useEffect)(()=>{I(new Set)},[y]);let k=!u&&!m;return(0,t.jsxs)(t.Fragment,{children:[m&&p?(0,t.jsxs)(r.Note,{fill:!0,type:"success",children:["Members of this Access Group are managed with"," ",(0,t.jsx)(T.Link,{href:`/${p.slug}/~/settings/security`,underline:!0,children:"Directory Sync"}),"."]}):null,(0,t.jsxs)("div",{className:(0,s.clsx)("flex flex-row items-stretch justify-start gap-2 flex-initial tailwind-preflight"),children:[(0,t.jsx)(b.SearchInput,{disabled:0===l.length,onChange:e=>A(e.target.value),placeholder:"Search…",value:y,width:"100%"}),(0,t.jsx)(o.Tooltip,{delayTime:300,disableTriggers:!m,text:"The Members of this Access Group are managed with Directory Sync.",children:(0,t.jsx)($,{alreadySelected:l.map(e=>e.uid),isOpen:h,onSelect:e=>{n({uid:e.uid,username:e.username,email:e.email,avatar:e.avatar,name:e.name,joinedFrom:e.joinedFrom,role:e.role})},setIsOpen:g,children:(0,t.jsx)(x.Button,{"aria-label":"add row",disabled:m||u,onClick:()=>g(!0),type:"secondary",children:(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:[(0,t.jsx)(S.PlusCircle,{size:16})," Add More"]})})})})]}),E.length?(0,t.jsxs)(a.Entity.List,{className:(0,s.clsx)("tailwind",H.default.removeShadow),children:[k?(0,t.jsx)(a.Entity,{className:"bg-background-200 py-1",left:(0,t.jsx)(d.Checkbox,{checked:_,disabled:m,onChange:()=>{_?I(new Set):I(new Set(E.map(e=>e.uid)))}}),right:(0,t.jsx)(j.DotsMenu,{disabled:m,children:(0,t.jsx)(v.MenuItem,{disabled:!w?.size,onClick:()=>{l.filter(e=>w?.has(e.uid)).forEach(e=>{c(e.uid)}),I(new Set)},type:"error",children:"Remove selected"})}),children:(0,t.jsx)(a.Entity.Content,{description:"Select All"})}):null,E.map(e=>{let s=w?.has(e.uid);return(0,t.jsx)(a.Entity,{left:(0,t.jsxs)(t.Fragment,{children:[k?(0,t.jsx)(d.Checkbox,{checked:s,disabled:m,onChange:()=>{if(w){let t=new Set(w);s?t.delete(e.uid):t.add(e.uid),I(t)}else I(new Set([e.uid]))}}):null,(0,t.jsx)(f.Avatar,{hash:e.avatar,size:32})]}),paddingY:3,right:m?null:(0,t.jsx)(o.Tooltip,{delayTime:300,disableTriggers:!u,text:u?"You need additional permissions to remove members.":"This Team Member is managed with Directory Sync.",children:(0,t.jsx)(x.Button,{"aria-label":"Remove Member",onClick:()=>{if(s){let t=new Set(w);t.delete(e.uid),I(t)}c(e.uid)},shape:"square",size:"small",svgOnly:!0,type:"tertiary",children:(0,t.jsx)(C.MinusCircle,{size:16})})}),children:(0,t.jsx)(a.Entity.Content,{description:e.email,fill:!0,title:e.name||e.username})},e.uid)})]}):(0,t.jsx)(V,{disabled:u,isAccessGroupDsyncManaged:m,search:y,setIsOpen:g,team:p})]})}function V(e){let{disabled:s,search:i,setIsOpen:l,isAccessGroupDsyncManaged:a,team:n}=e,{value:r}=(0,h.useEntitlement)("dsync");return i?(0,t.jsx)(y.EmptyState.Root,{description:`No members found for "${i}".`,gap:3,icon:(0,t.jsx)(y.EmptyState.Icon,{icon:(0,t.jsx)(A.Users,{size:32})}),paddingY:24,title:"No members found."}):(0,t.jsx)(y.EmptyState.Root,{description:a?"Members are managed with Directory Sync.":"Add users to this access group.",gap:3,icon:(0,t.jsx)(y.EmptyState.Icon,{icon:(0,t.jsx)(A.Users,{size:32})}),paddingY:24,title:"No members added yet",children:a?null:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(x.Button,{"aria-label":"Add Members",disabled:s,onClick:()=>l(!0),size:"small",type:"secondary",children:"Add Members"}),r&&(0,t.jsx)(T.Link,{href:`/${n?.slug}/~/settings/security#saml-single-sign-on`,children:(0,t.jsx)(x.Button,{"aria-label":"Connect Directory Sync",disabled:s,size:"small",type:"secondary",children:"Connect Directory Sync"})})]})})}var F=e.i(6989368);let Q=["CONTRIBUTOR","OWNER"];function Z(e){let{loadingSkeletonProjectsCount:s,disabled:a,projectRoles:n,setProjectRoles:o,members:c,setMemberIdsToAdd:m,setMemberIdsToRemove:f,teamRoles:x,setTeamRoles:j,teamPermissions:y,setTeamPermissions:v,isLoading:b,isAccessGroupDsyncManaged:S}=e,{value:C}=(0,h.useEntitlement)("multi-role-selector"),[A,M]=(0,i.useState)("projects"),[T,w]=(0,i.useState)([]),[I,E]=(0,i.useState)([]),{value:_}=(0,h.useEntitlement)("v0-team-seats"),[k,N]=(0,i.useState)(!1),[P,R]=(0,i.useState)(!1),[G,L]=(0,i.useState)(y.includes("IntegrationManager"));(0,i.useEffect)(()=>{m&&m(T.map(e=>e.uid))},[m,T]),(0,i.useEffect)(()=>{f&&f(I)},[f,I]);let z=[...T,...c].filter(e=>!I.includes(e.uid)).filter((e,t,s)=>t===s.findIndex(t=>t.uid===e.uid)),$=[{title:(0,t.jsxs)("div",{className:"flex gap-1",children:["Members ",S?(0,t.jsx)(u.LockClosed,{}):null]}),value:"members"},{title:"Projects",value:"projects"}];C&&$.push({title:"Team Access",value:"teamRoles"}),_&&$.push({title:"v0 Roles",value:"v0Roles"});let{teamRoles:O,teamPermissions:D}=(0,g.useAvailableRolesInfo)(),B=p.v0Roles.find(e=>y.includes(e)),H=G&&"V0Builder"===B;return(0,i.useEffect)(()=>{let e=y.includes("IntegrationManager");H&&!e?v(e=>[...e,"IntegrationManager"]):!H&&e&&v(e=>e.filter(e=>"IntegrationManager"!==e))},[H,y,v]),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial min-h-[340px]",children:[(0,t.jsx)(l.Tabs,{selected:A,setSelected:e=>M(e),tabs:$}),(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:["teamRoles"===A?(0,t.jsxs)(t.Fragment,{children:[S?null:(0,t.jsx)(r.Note,{fill:!0,type:"warning",children:"Team Access requires Directory Sync to take effect."}),(0,t.jsx)(W,{availableTeamRolesInfo:O,onChange:j,value:x}),(0,t.jsx)(q,{availableTeamPermissions:D,onChange:v,teamRoles:x,value:y})]}):null,"projects"===A?(0,t.jsx)(F.ProjectMultiselect,{disabled:a,isLoading:b,isOpen:k,loadingSkeletonProjectsCount:s,onAddProject:(e,t)=>{o(s=>s.find(t=>t.project.id===e.id)?[...s.map(s=>s.project.id===e.id?{project:e,role:t}:s)]:[...s,{project:e,role:t}])},onRemoveProject:e=>{o(t=>t.filter(t=>t.project.id!==e))},projectRoles:n,setIsOpen:N,variant:"search"}):null,"members"===A?(0,t.jsx)(U,{disabled:a,isAccessGroupDsyncManaged:S,isOpen:P,members:z,onAddMember:e=>{T.find(t=>t.uid===e.uid)||c.find(t=>t.uid===e.uid)||w(t=>[...t,e]),I.includes(e.uid)&&E(t=>t.filter(t=>t!==e.uid))},onRemoveMember:e=>{I.includes(e)||E(t=>[...t,e]),T.find(t=>t.uid===e)&&w(t=>t.filter(t=>t.uid!==e))},setIsOpen:R}):null,"v0Roles"===A?(0,t.jsxs)(t.Fragment,{children:[S?null:(0,t.jsx)(r.Note,{fill:!0,type:"warning",children:"v0 roles require Directory Sync to take effect."}),(0,t.jsx)(Y,{disabled:a,onChange:e=>{let t=y.filter(e=>!p.v0Roles.includes(e));e?v([...t,e]):v(t)},value:B}),(0,t.jsxs)(d.Checkbox,{disabled:"V0Builder"!==B,checked:H,onChange:()=>L(e=>!e),children:[(0,t.jsx)("div",{className:"font-medium",children:"Integration Manager"}),"Can manage team wide integrations and blob stores."]})]}):null]})]})}function W(e){let{value:i,onChange:l,disableRoles:r,availableTeamRolesInfo:c}=e;return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(a.Entity.List,{className:"shadow-sm",children:c.filter(e=>!Q.includes(e.role)).map(e=>{let d=e.role,u=r?.[d]?.disabled,m=r?.[d]?.message,h=i.find(e=>{let t=c.find(t=>t.role===e);return!!t&&t.includedTeamRoles.includes(d)});return(0,t.jsx)(a.Entity,{className:(0,s.clsx)("py-3",i.includes(d)&&!h&&"bg-gray-100/50"),right:(0,t.jsx)(o.Tooltip,{className:"w-full",delayTime:300,disableTriggers:!h&&!m,forceHide:!h&&!m,position:"left",text:m||`Already included in the ${h} role.`,children:(0,t.jsx)(n.Toggle,{checked:!!h||i.includes(d),disabled:!!h||u,onChange:()=>{i.includes(d)?l(i.filter(e=>e!==d)):l([...i,d])},size:"medium"})},d),children:(0,t.jsx)(a.Entity.Content,{description:e.description,title:e.label})},d)})})})}function q(e){let{value:i,onChange:l,teamRoles:r,availableTeamPermissions:c}=e;return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(a.Entity.List,{className:"shadow-sm",children:c.map(e=>{if("IntegrationManager"===e.role)return null;let c=e.includedIn.find(e=>r.includes(e));return(0,t.jsx)(a.Entity,{className:(0,s.clsx)("py-3"),right:(0,t.jsx)(o.Tooltip,{className:"w-full",delayTime:300,disableTriggers:!c,forceHide:!c,position:"left",text:`Already included in the ${c} role.`,children:(0,t.jsx)(n.Toggle,{checked:!!c||i.includes(e.role),disabled:!!c,onChange:()=>{i.includes(e.role)?l(i.filter(t=>t!==e.role)):l([...i,e.role])},size:"medium"})}),children:(0,t.jsx)(a.Entity.Content,{description:e.description,title:e.label})},e.role)})})})}function Y(e){let{value:s,onChange:i,disabled:l}=e,n=[...Object.values(p.v0RolesMeta),{key:null,name:"No access",description:"This access group won't grant v0 access"}];return(0,t.jsx)(c.RadioGroup,{disabled:l,value:s||"no-access",onChange:e=>{i("no-access"===e?void 0:e)},children:(0,t.jsx)(a.Entity.List,{className:"shadow-sm",children:n.map(e=>(0,t.jsx)(a.Entity,{className:"py-3",right:(0,t.jsx)(c.RadioGroup.Item,{value:e.key||"no-access"}),children:(0,t.jsx)(a.Entity.Content,{description:e.description,title:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[e.key&&(0,t.jsx)(m.V0Mark,{size:20}),(0,t.jsx)("span",{children:e.name})]})})},e.key||"no-access"))})})}e.s(["AccessGroupEdit",()=>Z],8441880)},1593804,7216885,e=>{"use strict";var t=e.i(3924999),s=e.i(277234),i=e.i(4244280),l=e.i(5338940);function a(e,a){let{team:n}=(0,l.useTeam)(),r=(0,t.default)((t,s)=>{if(!e)return null;let l=new URLSearchParams;l.set("limit","100"),n&&l.set("teamId",n.id);let a=s?.pagination.next;return a&&l.set("next",a),`${i.API_ACCESS_GROUPS}/${e}/projects?${l.toString()}`},e=>(0,s.fetchAPI)(String(e),{throwOnHTTPError:!0}),a);return{...r,projects:r.data?.flatMap(e=>e.projects)}}function n(e,a){let{team:n}=(0,l.useTeam)(),r=(0,t.default)((t,s)=>{if(!e)return null;let l=new URLSearchParams;l.set("limit","100"),n&&l.set("teamId",n.id);let a=s?.pagination.next;return a&&l.set("next",a),`${i.API_ACCESS_GROUPS}/${e}/members?${l.toString()}`},e=>(0,s.fetchAPI)(String(e),{throwOnHTTPError:!0}),a);return{...r,members:r.data?.flatMap(e=>e.members).map(e=>({...e,role:e.teamRole}))}}e.s(["useAccessGroupProjects",()=>a],1593804),e.s(["useAccessGroupMembers",()=>n],7216885)},951125,e=>{"use strict";var t=e.i(8711407),s=e.i(1176592),i=e.i(6891161),l=e.i(455575),a=e.i(2504781),n=e.i(4030453),r=e.i(3500331),o=e.i(3671642),c=e.i(3496900),d=e.i(1235157),u=e.i(7750276),m=e.i(1593804),h=e.i(7216885),g=e.i(8441880),p=e.i(4244280),f=e.i(8042625),x=e.i(277234);async function j(e,t){let s=e.accessGroupId,i=t.projects,l=!1;if(t.projects){let t=await y(s,e.teamId);for(let e of(l=i?.some(e=>{let s=t.find(t=>t.project.id===e.projectId);return!s||s.role!==e.role})||!1,t))i?.some(t=>t.projectId===e.project.id)||(l=!0,i?.push({projectId:e.project.id,role:null}))}let a=t.name!==e.name,n=t.entitlements&&t.entitlements.length!==e.entitlements?.length||t.entitlements?.some(t=>!e.entitlements?.includes(t)),r=!v(t.teamPermissions||[],e.teamPermissions||[]),o=!v(t.teamRoles||[],e.teamRoles||[]);if(!a&&!n&&!l&&!r&&!o&&!t.membersToAdd?.length&&!t.membersToRemove?.length)return;let c={name:t.name,projects:i?.length?i:void 0,membersToAdd:t.membersToAdd?.length?t.membersToAdd:void 0,membersToRemove:t.membersToRemove?t.membersToRemove:void 0,entitlements:t.entitlements?t.entitlements:void 0,teamRoles:t.teamRoles?t.teamRoles:void 0,teamPermissions:t.teamPermissions?t.teamPermissions:void 0};await (0,x.fetchAPI)(`${p.API_ACCESS_GROUPS}/${s}${(0,f.encode)({teamId:e.teamId})}`,{body:JSON.stringify(c),method:"POST",throwOnHTTPError:!0})}async function y(e,t){let s;if(!e)return[];let i=[];do{let l=new URLSearchParams;l.set("limit","100"),t&&l.set("teamId",t),s&&l.set("next",s);let a=`${p.API_ACCESS_GROUPS}/${e}/projects?${l.toString()}`,n=await (0,x.fetchAPI)(String(a),{throwOnHTTPError:!0});i=i.concat(n.projects),s=n.pagination.next||void 0}while(s)return i}function v(e,t){return e.length===t.length&&e.every((e,s)=>e===t[s])}function b(e){let{accessGroup:p,mutate:f,onClose:x,canUpdateAccessGroup:y}=e,v=(0,l.useToasts)(),[b,S]=(0,s.useState)(!1),[C,A]=(0,s.useState)(null),[M,T]=(0,s.useState)(!0),{value:w}=(0,u.useEntitlement)("multi-role-selector"),[I,E]=(0,s.useState)(!1),{projects:_,mutate:k,isLoading:N}=(0,m.useAccessGroupProjects)(p.accessGroupId,{initialSize:Math.ceil(p.projectsCount/100)}),[P,R]=(0,s.useState)(!1),{members:G,mutate:L}=(0,h.useAccessGroupMembers)(p.accessGroupId,{initialSize:Math.ceil(p.membersCount/100)}),[z,$]=(0,s.useState)(p.name),[O,D]=(0,s.useState)([]),[B,H]=(0,s.useState)([]),[U,V]=(0,s.useState)([]),[F,Q]=(0,s.useState)(p.teamRoles||[]),[Z,W]=(0,s.useState)(p.teamPermissions||[]);async function q(){A(null),S(!0);let e=d.v0Roles.some(e=>Z.includes(e));try{await j(p,{name:z,projects:O.map(e=>({projectId:e.project.id,role:e.role||null})),membersToAdd:B,membersToRemove:U,teamRoles:w?F:void 0,teamPermissions:w||e?Z:void 0}),await Promise.all([k(),L(),f()]),R(!1),S(!1),v.success({text:"Access Group edited successfully."}),T(!1)}catch(e){A(e),S(!1)}}return(0,s.useEffect)(()=>{if(N||P)return;let e=_?_.map(e=>({project:e.project,role:e.role})):[];R(!0),D(e)},[P,N,_]),(0,t.jsxs)(i.Modal.Modal,{active:M,disableFocusTrap:!0,onAnimationDone:()=>{S(!1),A(null),x()},onClickOutside:e=>{e?.target instanceof HTMLElement&&e.target.closest("[data-geist-menu-item]")||T(!1)},children:[(0,t.jsxs)(i.Modal.Body,{children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(i.Modal.Title,{children:y?`Manage "${z}"`:`"${z}" Access Group`}),I?null:(0,t.jsx)(a.Button,{"aria-label":"Edit access group name",onClick:()=>E(!I),size:"small",svgOnly:!0,type:"tertiary",children:(0,t.jsx)(c.PencilEdit,{})})]}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial",children:[I?(0,t.jsx)(o.Label,{className:"pt-2",value:"name",children:(0,t.jsx)(r.Input,{disabled:!y,id:"create-access-group-button",onChange:e=>$(e.target.value),placeholder:"Access Group Name",value:z,width:"100%"})}):null,C?(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-initial pt-4",children:(0,t.jsx)(n.Error,{error:C})}):null,(0,t.jsx)(g.AccessGroupEdit,{disabled:!y,isAccessGroupDsyncManaged:p.isDsyncManaged,isLoading:!P,loadingSkeletonProjectsCount:p.projectsCount,members:G||[],projectRoles:O,setMemberIdsToAdd:H,setMemberIdsToRemove:V,setProjectRoles:D,setTeamPermissions:W,setTeamRoles:Q,teamPermissions:Z,teamRoles:F})]})]}),(0,t.jsxs)(i.Modal.Actions,{children:[(0,t.jsx)(i.Modal.Action,{onClick:()=>T(!1),type:"secondary",children:"Cancel"}),y?(0,t.jsx)(i.Modal.Action,{disabled:!z,loading:b,onClick:q,children:"Save"}):(0,t.jsx)(i.Modal.Action,{onClick:x,children:"Close"})]})]})}e.s(["EditAccessGroupModal",()=>b],951125)},202583,e=>{"use strict";var t=e.i(8711407),s=e.i(6357175),i=e.i(5255926),l=e.i(7609806),a=e.i(2504781),n=e.i(8674454),r=e.i(4991687),o=e.i(6694387),c=e.i(8459493),d=e.i(7448864),u=e.i(5468328),m=e.i(8835183),h=e.i(8161149),g=e.i(8735244),p=e.i(2064047),f=e.i(3322724),x=e.i(4899593),j=e.i(1176592),y=e.i(5585544),v=e.i(5756088),b=e.i(8876434),S=e.i(9386557),C=e.i(6239252),A=e.i(57106),M=e.i(1717203),T=e.i(7557283),w=e.i(7750276),I=e.i(2699603),E=e.i(8248414),_=e.i(6891161),k=e.i(3500331),N=e.i(455575),P=e.i(3671642),R=e.i(4030453),G=e.i(8042625),L=e.i(277234),z=e.i(4244280),$=e.i(5338940),O=e.i(1235157),D=e.i(8441880);function B(e){let{mutate:s,setActive:i}=e,{team:l}=(0,$.useTeam)(),{value:a}=(0,w.useEntitlement)("multi-role-selector"),n=(0,N.useToasts)(),[r,o]=(0,j.useState)(!1),[c,d]=(0,j.useState)(null),[u,m]=(0,j.useState)(!0),[h,g]=(0,j.useState)([]),[p,f]=(0,j.useState)([]),[x,y]=(0,j.useState)([]),[v,b]=(0,j.useState)(""),[S,C]=(0,j.useState)([]);async function A(){d(null),o(!0);try{await M()}catch(e){d(e)}o(!1)}async function M(){let e=`${z.API_ACCESS_GROUPS}${(0,G.encode)({teamId:l?.id})}`,t=O.v0Roles.some(e=>x.includes(e));await (0,L.fetchAPI)(e,{body:JSON.stringify({name:v,projects:S.map(e=>({projectId:e.project.id,role:e.role})).filter(e=>e.projectId),membersToAdd:h,teamRoles:a?p:void 0,teamPermissions:a||t?x:void 0}),method:"POST",throwOnHTTPError:!0}),await s(),n.success({text:"Access Group created successfully."}),m(!1)}return(0,t.jsxs)(_.Modal.Modal,{active:u,disableFocusTrap:!0,onAnimationDone:()=>{o(!1),d(null),i(!1)},onClickOutside:e=>{e?.target instanceof HTMLElement&&e.target.closest("[data-geist-menu-item]")||m(!1)},children:[(0,t.jsxs)(_.Modal.Body,{children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial pb-4",children:[(0,t.jsx)(_.Modal.Title,{children:"Create Access Group"}),(0,t.jsx)(_.Modal.Subtitle,{children:(0,t.jsx)("p",{className:"text-copy-14",children:"Give groups of users roles on projects and optionally set up directory sync with your indentity provider."})})]}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial",children:[(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-1.5 flex-initial",children:(0,t.jsx)(P.Label,{value:"Name",children:(0,t.jsx)(k.Input,{id:"create-access-group-button",onChange:e=>b(e.target.value),placeholder:"Group 1",value:v,width:"100%"})})}),(0,t.jsx)(D.AccessGroupEdit,{isAccessGroupDsyncManaged:!1,isLoading:!1,loadingSkeletonProjectsCount:0,members:[],projectRoles:S,setMemberIdsToAdd:g,setProjectRoles:C,setTeamPermissions:y,setTeamRoles:f,teamPermissions:x,teamRoles:p})]}),c?(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-initial pt-4",children:(0,t.jsx)(R.Error,{error:c})}):null]}),(0,t.jsxs)(_.Modal.Actions,{children:[(0,t.jsx)(_.Modal.Action,{onClick:()=>m(!1),type:"secondary",children:"Cancel"}),(0,t.jsx)(_.Modal.Action,{disabled:!v,loading:r,onClick:A,children:"Create"})]})]})}function H(e){let{accessGroup:s,mutate:i,onClose:l}=e,{team:a}=(0,$.useTeam)(),n=(0,N.useToasts)(),[r,o]=(0,j.useState)(!1),[c,d]=(0,j.useState)(null),[u,m]=(0,j.useState)(!0);async function h(){d(null),o(!0);try{await g()}catch(e){d(e)}o(!1)}async function g(){let e=`${z.API_ACCESS_GROUPS}/${s.accessGroupId}${(0,G.encode)({teamId:a?.id})}`;await (0,L.fetchAPI)(e,{method:"DELETE",throwOnHTTPError:!0}),await i(),n.success({text:"Access Group deleted successfully."}),m(!1)}return(0,t.jsxs)(_.Modal.Modal,{active:u,onAnimationDone:()=>{o(!1),d(null),l()},onClickOutside:e=>{e?.target instanceof HTMLElement&&e.target.closest("[data-geist-menu-item]")||m(!1)},children:[(0,t.jsx)(_.Modal.Body,{children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-3 flex-initial",children:[(0,t.jsx)(_.Modal.Title,{children:"Delete Access Group"}),(0,t.jsx)("p",{className:"text-copy-14",children:`You are about to delete the "${s.name}" access group.`}),(0,t.jsx)("p",{className:"text-copy-14",children:"Are you sure?"}),c?(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-initial pt-4",children:(0,t.jsx)(R.Error,{error:c})}):null]})}),(0,t.jsxs)(_.Modal.Actions,{children:[(0,t.jsx)(_.Modal.Action,{onClick:()=>m(!1),type:"secondary",children:"Cancel"}),(0,t.jsx)(_.Modal.Action,{loading:r,onClick:h,children:"Delete"})]})]})}var U=e.i(951125);function V(){let[e,i]=(0,j.useState)(""),l=(0,s.useDebouncedValue)(e,300),{accessGroups:a,cursor:n,...r}=(0,I.useAccessGroups)({limit:20,search:l||void 0,membersLimit:3,projectsLimit:3}),[o,c]=(0,j.useState)(!1),[d,u]=(0,j.useState)(null),[h,f]=(0,j.useState)(null),x=(0,j.useRef)(null),[y,v]=(0,j.useState)();(0,j.useEffect)(()=>{if(!n||!x.current)return;let e=new IntersectionObserver(e=>{let[t]=e;return v(t)});return e.observe(x.current),()=>e.disconnect()},[x,n]),(0,j.useEffect)(()=>{!y?.isIntersecting&&a?.length||r.isLoading||r.isValidating||!n||r.setSize(e=>e+1)},[y,a,n]);let{can:b,isLoading:S}=(0,M.default)(),{value:A}=(0,w.useEntitlement)("project-rbac-access-groups"),E=b(T.Action.Update,T.Resource.AccessGroup),_=b(T.Action.Create,T.Resource.AccessGroup),k=b(T.Action.List,T.Resource.AccessGroup),N=b(T.Action.Delete,T.Resource.AccessGroup),P=!a?.length&&(r.isLoading||!!n),R=S||A&&P;return(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-6 flex-initial tailwind-preflight",children:[(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-2 flex-initial",children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-1",children:[(0,t.jsx)("h1",{className:"text-heading-24",children:(0,t.jsx)(C.SearchContextHighlighter,{children:"Access Groups"})}),(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"Create and manage Access Groups."})]}),(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-center flex-initial geist-hide-on-mobile",children:(0,t.jsx)(q,{canCreateAccessGroup:_,canHaveAccessGroups:A,onClick:()=>c(!0)})})]}),(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-center flex-initial geist-show-on-mobile",children:(0,t.jsx)(q,{canCreateAccessGroup:_,canHaveAccessGroups:A,onClick:()=>c(!0)})}),(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial",children:(0,t.jsx)(m.SearchInput,{disabled:S||!A,onChange:e=>{r.setSize(1),i(e.target.value)},placeholder:"Filter…"})}),R?(0,t.jsxs)(p.Entity.List,{children:[(0,t.jsx)(F,{}),(0,t.jsx)(F,{}),(0,t.jsx)(F,{})]}):a?.length?(0,t.jsxs)(p.Entity.List,{children:[a.map(e=>(0,t.jsx)(Q,{accessGroup:e,canDeleteAccessGroup:N,canUpdateAccessGroup:E,onPromptDelete:()=>u(e),onPromptEdit:()=>f(e)},e.accessGroupId)),n?(0,t.jsx)("li",{className:"flex flex-col items-center justify-center flex-initial px-2 py-2.5",children:(0,t.jsx)(g.Spinner,{size:20})}):null,n?(0,t.jsx)("div",{ref:x}):null]}):(0,t.jsx)(W,{canHaveAccessGroups:A,canListAccessGroup:k,searchTerm:l}),o?(0,t.jsx)(B,{mutate:r.mutate,setActive:c}):null,d?(0,t.jsx)(H,{accessGroup:d,mutate:r.mutate,onClose:()=>u(null)}):null,h?(0,t.jsx)(U.EditAccessGroupModal,{accessGroup:h,canUpdateAccessGroup:E,mutate:r.mutate,onClose:()=>f(null)}):null]})}function F(){return(0,t.jsx)(p.Entity,{left:(0,t.jsx)("div",{className:"flex justify-end",style:{minWidth:76},children:(0,t.jsx)(i.Skeleton,{height:32,rounded:!0,width:32})}),right:(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-4 flex-initial geist-hide-on-mobile",children:[(0,t.jsx)(i.Skeleton,{children:(0,t.jsx)(a.Button,{size:"small",type:"secondary",children:"Edit Access Group"})}),(0,t.jsx)(i.Skeleton,{height:32,width:32})]}),children:(0,t.jsx)(p.Entity.Content,{description:(0,t.jsx)("div",{className:"flex h-5 items-center",children:(0,t.jsx)(i.Skeleton,{className:"max-w-72",height:12,width:256})}),title:(0,t.jsx)("div",{className:"flex h-5 items-center",children:(0,t.jsx)(i.Skeleton,{className:"max-w-72",height:12,width:256})})})})}function Q(e){let{accessGroup:s,onPromptDelete:i,onPromptEdit:m,canUpdateAccessGroup:h,canDeleteAccessGroup:g}=e,j=(0,f.useIsMobile)(),y=s.entitlements?.includes("v0"),C=!s.isDsyncManaged&&((s.teamRoles?.length||0)>0||(s.teamPermissions?.length||0)>0);return(0,t.jsx)(p.Entity,{left:(0,t.jsx)("div",{className:"flex justify-end",style:{minWidth:76},children:s.members?(0,t.jsx)(l.AvatarGroup,{limit:3,members:s.members.map(e=>({uid:e})),size:32}):null}),right:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-4 flex-initial geist-hide-on-mobile",children:[C?(0,t.jsx)(u.Tooltip,{delayTime:300,text:"This Access Group has team roles or permissions configured, but won't take effect until this group is connected to Directory Sync",children:(0,t.jsx)(S.WarningFill,{color:"amber-800",size:16})}):null,y?(0,t.jsx)(u.Tooltip,{delayTime:300,text:"Everyone in this access group has access to v0.app",children:(0,t.jsx)(x.V0Mark,{size:22})}):null,(0,t.jsx)(E.ProjectAvatarGroup,{projectIds:s.projects,totalProjectsCount:s.projectsCount}),j?null:(0,t.jsx)(a.Button,{onClick:()=>m(),size:"small",type:"secondary",children:h?"Edit Access Group":"View Access Group"})]}),(0,t.jsxs)(r.MenuContainer,{children:[(0,t.jsx)(o.MenuButton,{"aria-label":"Menu",shape:"square",size:"small",svgOnly:!0,type:"tertiary",children:(0,t.jsx)(b.MoreHorizontal,{})}),(0,t.jsxs)(n.Menu,{width:200,children:[j?(0,t.jsx)(c.MenuItem,{onClick:()=>m(),children:h?"Edit Access Group":"View Access Group"}):null,!g||s.isDsyncManaged?(0,t.jsx)(u.Tooltip,{text:g?"This access groups is connected to a Directory Sync group":"Additional permissions required",children:(0,t.jsx)(d.MenuItemLocked,{onClick:()=>i(),type:"error",children:"Delete Access Group"})}):(0,t.jsx)(c.MenuItem,{onClick:()=>i(),type:"error",children:"Delete Access Group"})]})]})]}),children:(0,t.jsx)(p.Entity.Content,{description:[Z(s.membersCount,"user","users"),Z(s.projectsCount,"project","projects"),Z(s.teamRoles?.length||0,"role","roles"),Z(s.teamPermissions?.length||0,"permission","permissions")].filter(Boolean).join(" • "),title:(0,t.jsxs)("div",{className:"flex h-5 items-center gap-1 font-semibold",children:[s.name,s.isDsyncManaged?(0,t.jsx)(u.Tooltip,{text:"The Members of this Access Group are managed with Directory Sync.",children:(0,t.jsx)(v.LockClosed,{})}):null]})})})}function Z(e,t,s){if(0!==e)return 1===e?`1 ${t}`:`${e} ${s}`}function W(e){let{canHaveAccessGroups:s,canListAccessGroup:i,searchTerm:l}=e;return s?i?l?(0,t.jsx)(h.EmptyState.Root,{description:`No access groups found matching "${l}". Try adjusting your search term.`,icon:(0,t.jsx)(h.EmptyState.Icon,{icon:(0,t.jsx)(y.Users,{size:32})}),paddingX:48,paddingY:48,title:"No results found"}):(0,t.jsx)(h.EmptyState.Root,{description:"Create access groups to more easily manage project roles.",icon:(0,t.jsx)(h.EmptyState.Icon,{icon:(0,t.jsx)(y.Users,{size:32})}),paddingX:48,paddingY:48,title:"No Access Groups yet"}):(0,t.jsx)(h.EmptyState.Root,{description:"You are not part of any Access Groups.",icon:(0,t.jsx)(h.EmptyState.Icon,{icon:(0,t.jsx)(y.Users,{size:32})}),paddingX:48,paddingY:48,title:"No Access Groups yet"}):(0,t.jsx)(h.EmptyState.Root,{description:"Create access groups to more easily manage project roles.",icon:(0,t.jsx)(h.EmptyState.Icon,{icon:(0,t.jsx)(y.Users,{size:32})}),paddingX:48,paddingY:48,title:"Upgrade to Enterprise",children:(0,t.jsx)(A.Link,{external:!0,href:"/contact/sales",type:"highlight",children:"Contact Sales"})})}function q(e){let{canHaveAccessGroups:s,canCreateAccessGroup:i,onClick:l}=e;return(0,t.jsx)(u.Tooltip,{disableTriggers:i,text:"Additional permissions are required to create access groups.",children:(0,t.jsx)(a.Button,{disabled:!s||!i,onClick:l,width:"100%",children:"Create Access Group"})})}e.s(["AccessGroups",()=>V],202583)}]);

//# debugId=15287fc5-3e9e-df79-4484-4c0983dd6f7c
//# sourceMappingURL=1886b89296488183.js.map