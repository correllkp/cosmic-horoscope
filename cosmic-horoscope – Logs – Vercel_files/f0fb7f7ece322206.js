;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="686103ed-61ed-9231-642b-fd1ca5e8e0a7")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,1000921,e=>{"use strict";let t=(0,e.i(9334638).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M5.25 7.25H4.5V8.75H5.25H9.43934L7.96967 10.2197L7.43934 10.75L8.5 11.8107L9.03033 11.2803L11.7803 8.53033C12.0732 8.23744 12.0732 7.76256 11.7803 7.46967L9.03033 4.71967L8.5 4.18934L7.43934 5.25L7.96967 5.78033L9.43934 7.25H5.25ZM8 14.5C4.41015 14.5 1.5 11.5899 1.5 8C1.5 4.41015 4.41015 1.5 8 1.5C11.5899 1.5 14.5 4.41015 14.5 8C14.5 11.5899 11.5899 14.5 8 14.5ZM0 8C0 12.4183 3.58172 16 8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8Z" fill="currentColor"/>');e.s(["ArrowCircleRight",0,t])},8256306,e=>{"use strict";let t=(0,e.i(9334638).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M5.5 2.5V1.75H4V2.5V13.5V14.25H5.5V13.5V2.5ZM12 2.5V1.75H10.5V2.5V13.5V14.25H12V13.5V2.5Z" fill="currentColor"/>');e.s(["Pause",0,t])},9522552,e=>{"use strict";let t=(0,e.i(9334638).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M10.5 4C10.5 4.82843 11.1716 5.5 12 5.5C12.8284 5.5 13.5 4.82843 13.5 4C13.5 3.17157 12.8284 2.5 12 2.5C11.1716 2.5 10.5 3.17157 10.5 4ZM9.41536 5.52397C9.15145 5.07734 9 4.55636 9 4C9 2.34315 10.3431 1 12 1C13.6569 1 15 2.34315 15 4C15 5.65685 13.6569 7 12 7C11.4436 7 10.9227 6.84855 10.476 6.58464L6.58464 10.476C6.84855 10.9227 7 11.4436 7 12C7 13.6569 5.65685 15 4 15C2.34315 15 1 13.6569 1 12C1 10.3431 2.34315 9 4 9C4.55636 9 5.07734 9.15145 5.52398 9.41537L9.41536 5.52397ZM2.5 12C2.5 12.8284 3.17157 13.5 4 13.5C4.82843 13.5 5.5 12.8284 5.5 12C5.5 11.1716 4.82843 10.5 4 10.5C3.17157 10.5 2.5 11.1716 2.5 12Z" fill="currentColor"/>');e.s(["Connection",0,t])},3349273,e=>{"use strict";var t=e.i(4005781),i=e.i(2111701),r=e.i(9979783),s=e.i(5338940),a=e.i(319451);function n(e,n){let{team:o}=(0,s.useTeam)(),l=(0,a.getDrainsKey)({teamIdOrSlug:e,projectIdOrSlug:n,includeMetadata:!0}),{trigger:d,isMutating:c,error:u}=(0,t.default)(l,async(e,t)=>{let{arg:s}=t;if(!o?.id)throw Error("Team ID is required");(0,i.mutate)(l,e=>e?{...e,drains:e.drains.filter(e=>e.id!==s.id)}:void 0,!1);try{let e={id:s.id,teamId:o.id},t=await (0,r.typedFetch)("/v1/drains/{id}","delete",e,{throwOnHTTPError:!0});if((0,i.mutate)(l),204!==t.status)throw console.error("Failed to delete drain:",t.body),Error("Failed to delete drain");return t.body}catch(e){throw console.error("Failed to delete drain:",e),(0,i.mutate)(l),e}},{throwOnError:!0});return{deleteDrain:d,isDeleting:c,error:u}}e.s(["useDeleteDrain",()=>n])},8039973,e=>{"use strict";var t=e.i(8711407),i=e.i(1176592),r=e.i(3169345),s=e.i(5255926),a=e.i(455575),n=e.i(3349273),o=e.i(8404074),l=e.i(8674454),d=e.i(6694387),c=e.i(4991687),u=e.i(5468328),x=e.i(4585051);e.i(8703064);var m=e.i(648779),h=e.i(8876434),p=e.i(248550),j=e.i(5761705),g=e.i(8256306),b=e.i(762945),f=e.i(2640326),y=e.i(4524395),v=e.i(4535059),C=e.i(1000921),T=e.i(6143247),w=e.i(6048771),N=e.i(9668517),D=e.i(6060673);function I(e){let{project:i}=e;return i?(0,t.jsx)("div",{className:"size-5 rounded-full bg-white border border-gray-200 flex items-center justify-center overflow-hidden",children:(0,t.jsx)(w.ProjectLogo,{project:i,framework:i.framework,deploymentId:i.latestDeployments?.[0]?.id,size:20})}):(0,t.jsx)(s.Skeleton,{width:20,height:20,className:"rounded-full"})}function M(e){let{count:i}=e;return(0,t.jsx)("div",{className:"size-5 rounded-full bg-gray-100 border border-gray-200 flex items-center justify-center",children:(0,t.jsxs)("span",{className:"text-[8px] font-medium text-gray-900",children:["+",i]})})}function k(e){let{project:i}=e,r=(0,N.useTeamSlug)();return(0,t.jsx)("a",{href:`/${r}/${i.name}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm font-medium text-inherit no-underline",children:i.name})}function L(e){let{projectIds:i}=e,{data:r}=(0,D.useProjects)(i,{latestDeployments:1});return r&&0!==r.length?(0,t.jsx)("div",{className:"flex flex-col gap-1.5 text-left",children:r.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(I,{project:e}),(0,t.jsx)("span",{children:e.name})]},e.id))}):(0,t.jsx)("span",{children:"Loading projectsâ€¦"})}function R(){return(0,t.jsx)("p",{className:"text-copy-14 text-sm font-medium",children:"All projects"})}function S(e){let{projectAccess:i,disabled:r}=e,{data:a,isLoading:n}=(0,D.useProjects)(i.projectIds,{latestDeployments:1}),o=i.projectIds.length,l=o>=4,d=l?2:Math.min(o,3),c=i.projectIds.slice(0,d),x=c.map(e=>a?.find(t=>t.id===e)),m=a?.find(e=>e.id===i.projectIds[0]),h=1===o&&m?(0,t.jsx)(k,{project:m}):1===o&&n?(0,t.jsx)(s.Skeleton,{width:100,height:20}):`${o} Projects`;return(0,t.jsx)(u.Tooltip,{text:(0,t.jsx)(L,{projectIds:i.projectIds}),children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("div",{className:(0,T.cn)("flex items-center",r&&"opacity-50"),children:[x.map((e,i)=>(0,t.jsx)("div",{className:"relative",style:{marginLeft:0===i?0:"-8px"},children:(0,t.jsx)(I,{project:e})},c[i])),l&&(0,t.jsx)("div",{className:"relative",style:{marginLeft:"-8px",zIndex:0},children:(0,t.jsx)(M,{count:o-d})})]}),(0,t.jsx)("span",{className:"text-sm font-medium",children:h})]})})}function P(e){let{projectAccess:i,disabled:r}=e;return"all"===i.access?(0,t.jsx)(R,{}):(0,t.jsx)(S,{projectAccess:i,disabled:r})}var A=e.i(1733572);e.i(553769);var z=e.i(1919132),U=e.i(7594446);e.i(6887680);var H=e.i(1414602),E=e.i(1717203),O=e.i(7557283);function V(){let{can:e,isLoading:t}=(0,E.default)(),i=(0,U.useIntegrationPermissions)(),{permissions:r}=(0,H.useResourcePermissions)(),s={list:e(O.Action.List,O.Resource.Drain),read:e(O.Action.Read,O.Resource.Drain),create:e(O.Action.Create,O.Resource.Drain),update:e(O.Action.Update,O.Resource.Drain),remove:e(O.Action.Delete,O.Resource.Drain),isLoading:t};return{checkDrainPermissions:(e,a)=>{if("integration"===e.source.kind&&!a)return{isLoading:t,remove:s.remove&&i.canUpdateIntegrationConfiguration,update:s.update&&i.canUpdateIntegrationConfiguration,read:s.read&&i.canReadProjects};let n=a?s.remove&&r.remove:s.remove;return{isLoading:t,remove:n,update:a?s.update&&r.update:s.update,read:a?s.read&&r.read:s.read}},permissions:s}}var F=e.i(2704354),$=e.i(3758860),B=e.i(8459493);function Z(e){let{disabled:i,onClick:r,href:s,children:a,tooltipText:n,className:o,isLink:l=!!(s&&!i),external:d}=e;return(0,t.jsx)(u.Tooltip,{disableTriggers:!i,position:"bottom",text:n,className:"w-full flex",children:(0,t.jsx)(B.MenuItem,{isLink:l,disabled:i,href:s&&!i?s:void 0,onClick:r&&!i?r:void 0,innerMenuItemClassName:o,external:d,children:a})})}var Y=e.i(5779481),_=e.i(7743427),q=e.i(5338940),K=e.i(4011256);function W(e){let{drain:i,teamSlug:r,permissions:s,location:a}=e,{installationId:n,externalResourceId:o,resource:l,integration:d,isIntegrationDrain:c}=function(e){let t,i,r,s,{team:a}=(0,q.useTeam)(),n=!1;"integration"===e.source.kind&&(n=!0,t=e.source.resourceId,i=e.source.integrationConfigurationId,r=e.source.externalResourceId,s=e.source.integrationId);let{data:o}=(0,Y.useResourceItem)({resourceId:t||null}),l=o?.store,{integration:d}=(0,_.useIntegration)(s,{teamId:a?.id});return{resourceId:t,installationId:i,externalResourceId:r,integrationId:s,resource:l,integration:d||void 0,isIntegrationDrain:n}}(i);return c?(0,t.jsxs)(t.Fragment,{children:["resource-dashboard"!==a&&(l||d)&&(0,t.jsx)(Z,{external:!0,href:l&&d?(0,K.getResourceDashboardLink)(l,{teamSlug:r}):d&&n?(0,K.getIntegrationInstallationLink)(r,d.slug,n):void 0,disabled:s.isLoading||!s.update,tooltipText:"You do not have permission to manage this resource",children:(0,t.jsx)(u.Tooltip,{className:"block truncate",text:l?.name||d?.name,children:l?.name||d?.name})}),d&&n&&o&&(0,t.jsx)(Z,{disabled:!1,external:!0,href:(0,$.getIntegrationDeepLink)({integrationConfigurationId:n,externalResourceId:o,teamIdOrSlug:r}),children:(0,t.jsx)(u.Tooltip,{className:"block truncate",text:`Manage in ${d.name}`,children:`Manage in ${d.name}`})})]}):null}function G(e){var i;let{drain:s,onDelete:a,onEdit:n,onStatusUpdate:o,resource:x,teamSlug:m,location:p}=e,{checkDrainPermissions:j}=V(),g="integration"===s.source.kind&&!x,b=x?.projectsMetadata.find(e=>(0,z.getLogDrainProtocolSettings)(e)?.logDrainId===s.id),f=j(s,x),y="disabled-by-admin"===s.disabledReason||"account-plan-downgrade"===s.disabledReason;return(0,t.jsxs)(r.Table.Row,{className:(0,T.cn)("h-16","hover:!bg-background-100","disabled"===s.status?"text-gray-700":"text-gray-900"),children:[(0,t.jsx)(r.Table.Cell,{className:"py-1 pl-2 pr-0",children:(0,t.jsx)("div",{className:(0,T.cn)("flex items-center justify-center","disabled"===s.status&&"opacity-50"),children:(0,t.jsx)(X,{drain:s,resource:x})})}),(0,t.jsx)(r.Table.Cell,{className:(0,T.cn)("py-1 truncate font-medium text-sm pr-4","disabled"===s.status?"text-gray-700":"text-gray-1000"),children:s.name}),(0,t.jsx)(r.Table.Cell,{className:"py-1",children:(0,t.jsxs)("div",{className:"flex items-center gap-1 text-sm font-medium",children:[(0,t.jsx)(Q,{drain:s}),(0,A.getDrainTypeLabel)((0,A.getDrainType)(s))]})}),(0,t.jsx)(r.Table.Cell,{className:"py-1",children:(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsx)(P,{projectAccess:s.projectAccess,disabled:"disabled"===s.status})})}),(0,t.jsx)(r.Table.Cell,{className:"py-1",children:(0,t.jsx)("div",{className:"flex items-center justify-center",children:(0,t.jsx)(u.Tooltip,{text:"enabled"===(i=s.status)?"Running - Drain is active and forwarding data":"disabled"===i?"Paused - Drain is paused and not forwarding data":"Error - Drain is experiencing an error rate above 80%",children:(0,t.jsx)(J,{status:s.status})})})}),(0,t.jsx)(r.Table.Cell,{className:"py-1",children:(0,t.jsxs)(c.MenuContainer,{children:[(0,t.jsx)(d.MenuButton,{"aria-label":"More options",type:"tertiary",shape:"square",size:"small",className:"flex items-center justify-center",children:(0,t.jsx)(h.MoreHorizontal,{})}),(0,t.jsxs)(l.Menu,{width:160,children:[g?(0,t.jsx)(Z,{external:!0,disabled:f.isLoading||!f.update,href:"integration"===s.source.kind?(0,F.getConfigureUrl)({website:s.integrationWebsite??"",configurationUri:s.integrationConfigurationUri},s.source.integrationConfigurationId):void 0,tooltipText:"You need additional permissions to edit this integration.",children:"Edit"}):(0,t.jsx)(t.Fragment,{children:y?null:(0,t.jsx)(Z,{tooltipText:"You do not have permission to update this drain",disabled:f.isLoading||!f.update,onClick:()=>n(s,{resource:x,connection:b}),children:"Edit"})}),y?null:(0,t.jsx)(Z,{tooltipText:"You do not have permission to update this drain",disabled:f.isLoading||!f.update,onClick:()=>o(s,b&&x?{resource:x,connection:b}:void 0),children:"disabled"===s.status?"Resume":"Pause"}),(0,t.jsx)(W,{drain:s,teamSlug:m,permissions:f,location:p}),g?null:(0,t.jsx)(Z,{tooltipText:"You do not have permission to delete this drain",disabled:f.isLoading||!f.remove,className:f.remove?"text-red-900":"text-red-500",onClick:()=>a(s,b&&x?{resource:x,connection:b}:void 0),children:"Delete"})]})]})})]},s.id)}function J(e){let{status:i}=e;return"enabled"===i?(0,t.jsx)(j.CheckCircle,{color:"blue-700",size:16}):"disabled"===i?(0,t.jsx)(g.Pause,{color:"gray-700",size:16}):(0,t.jsx)(b.Warning,{color:"red-700",size:16})}function Q(e){let{drain:i}=e;switch((0,A.getDrainType)(i)){case"traces":return(0,t.jsx)(v.Traces,{size:14});case"logs":default:return(0,t.jsx)(p.Logs,{size:14});case"analytics":return(0,t.jsx)(f.Analytics,{size:14});case"speed_insights":return(0,t.jsx)(y.StopwatchFast,{size:14})}}function X(e){let{drain:i,resource:r}=e;return i.integrationIcon?(0,t.jsx)(x.Avatar,{hash:i.integrationIcon,size:28}):i.source?.kind==="integration"&&r?.product?.iconUrl?(0,t.jsx)("div",{className:"size-[28px] flex items-center justify-center",children:(0,t.jsx)(m.ProductIcon,{icon:r.product.iconUrl,size:"medium"})}):(0,t.jsx)("div",{className:"size-[28px] bg-gray-alpha-100 flex items-center justify-center rounded-full border border-gray-alpha-200",children:(0,t.jsx)(C.ArrowCircleRight,{size:16})})}var ee=e.i(8544664),et=e.i(8248823),ei=e.i(6891161),er=e.i(4030453),es=e.i(8522580);function ea(e){let{drain:i,action:s,onConfirm:a,isLoading:n,error:o,onClose:l,resource:d,connection:c}=e,{title:u,subtitle:x,note:m,buttonText:h,buttonType:p}=en[s],j=!!m,g="";"delete"===s&&i?.status==="disabled"&&(j=!1),"delete"===s&&d&&c&&(g="This will remove environment variable(s) associated with this Drain. Make sure your code is not relying on them anymore.");let b=(e=>{if(e.delivery&&"endpoint"in e.delivery)return"otlphttp"===e.delivery.type?e.delivery.endpoint.traces:e.delivery.endpoint;throw Error("Invalid drain delivery")})(i);return(0,t.jsxs)(ei.Modal.Modal,{active:!!s,onClickOutside:l,children:[(0,t.jsx)(ei.Modal.Body,{children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-6 flex-initial",children:[(0,t.jsx)(ei.Modal.Title,{children:u}),(0,t.jsx)(ei.Modal.Subtitle,{children:x}),(0,t.jsx)(r.Table,{children:(0,t.jsxs)(r.Table.Body,{striped:!0,className:"text-gray-1000",children:[(0,t.jsxs)(r.Table.Row,{children:[(0,t.jsx)(r.Table.Cell,{className:"font-medium",children:"Drain Name"}),(0,t.jsx)(r.Table.Cell,{children:i?.name?i.name:(0,t.jsx)("span",{className:"italic",children:"No name"})})]}),b?(0,t.jsxs)(r.Table.Row,{children:[(0,t.jsx)(r.Table.Cell,{className:"font-medium",children:"Drain Endpoint"}),(0,t.jsx)(r.Table.Cell,{children:b})]}):null]})}),j?(0,t.jsx)(es.Note,{fill:!0,type:"warning",children:m}):null,g?(0,t.jsx)(es.Note,{fill:!0,type:"warning",children:g}):null,o?(0,t.jsx)(er.Error,{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-md",error:(0,et.normalizeError)(o)}):null]})}),(0,t.jsxs)(ei.Modal.Actions,{children:[(0,t.jsx)(ei.Modal.Action,{onClick:l,type:"secondary",children:"Cancel"}),(0,t.jsx)(ei.Modal.Action,{type:p,loading:n,onClick:a,children:h})]})]})}let en={delete:{title:"Delete Drain",subtitle:"The following drain will be permanently deleted. Are you sure you want to continue?",note:"This drain is currently active. Make sure you don't need the drained data anymore before deleting it.",buttonText:"Delete",buttonType:"error"},disable:{title:"Pause Drain",subtitle:"The following drain will be paused, and any data that is generated will be lost. Are you sure you want to continue?",buttonText:"Pause",buttonType:"warning"},enable:{title:"Resume Drain",subtitle:"The following drain will be resumed and will start receiving new data. Are you sure you want to continue?",buttonText:"Resume",buttonType:"default"}};var eo=e.i(6810699);function el(e,t){t&&t.forEach(t=>{(0,$.isProtocolSupported)(t.product,"logDrain")&&e.set(t.id,t)})}var ed=e.i(4110479),ec=e.i(3199886);e.i(5192575);var eu=e.i(1887803),ex=e.i(3850869),em=e.i(2006191);e.i(5463680);var eh=e.i(15312);function ep(e){let{teamSlug:s,projectIdOrSlug:l,drains:d,isLoading:c,onDrainsMutate:u,location:x}=e,{data:m}=(0,em.useTeam)(s),{permissions:h}=V(),{openDrain:p,isOpen:j,drain:g,closeModal:b}=(0,ed.useDrainModalContext)(),{data:f}=function(){let{data:e}=(0,eo.useResourceList)({protocolType:"observability"}),{data:t}=(0,eo.useResourceList)({protocolType:"logDrain"}),i=new Map;el(i,e?.stores),el(i,t?.stores);let r=!e||!t;return{data:r?void 0:Array.from(i.values()),isLoading:r}}(),{data:y}=(0,eo.useResourceList)({protocolType:"traceDrain"}),v=(0,i.useMemo)(()=>{let e=[...f||[]];return y?.stores&&e.push(...y.stores),e},[f,y]),C=(0,i.useMemo)(()=>{let e=new Map;if(!v)return e;for(let t of v)if(e.set(t.id,t),t.projectsMetadata)for(let i of t.projectsMetadata){let r=(0,z.getLogDrainProtocolSettings)(i)?.logDrainId;r&&e.set(r,t)}return e},[v]),[T,w]=(0,i.useState)(null),[N,D]=(0,i.useState)(null),[I,M]=(0,i.useState)(void 0),k=(0,a.useToasts)(),L=(0,ee.usePlaceholderCount)(`drains:${s}${l?`-${l}`:""}`,d?.length),{deleteDrain:R,isDeleting:S}=(0,n.useDeleteDrain)(s,l),{updateDrain:P,isUpdating:A}=(0,o.useUpdateDrain)(s,l),U=()=>{w(null),D(null),M(void 0)},{removeConnections:H,isRemovingConnections:E}=(0,eu.useResourceConnection)(),O=(e,t)=>{p(e,t?.resource)},F=async()=>{if(T&&N)try{"delete"===T&&(N.resource&&N.connection?await H({resourceId:N.resource.id,connectionIds:[N.connection.id]}):await R({id:N.drain.id})),("disable"===T||"enable"===T)&&await P({id:N.drain.id,status:"disable"===T?"disabled":"enabled"}),U(),k.success({text:ef[T].success,key:`${T}-drain`}),await u?.()}catch(e){M(e),k.error({text:ef[T].error,key:`${T}-drain`})}},$=async(e,t)=>{w("delete"),D({drain:e,resource:t?.resource,connection:t?.connection})},B=async(e,t)=>{w("disabled"===e.status?"enable":"disable"),D({drain:e,resource:t?.resource,connection:t?.connection})};return h.isLoading||h.read?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"overflow-x-auto rounded-md border border-gray-alpha-400 bg-background-100",children:(0,t.jsxs)(r.Table,{className:"table-fixed w-full [&_tr:hover]:rounded-none [&_tr:hover_td]:rounded-none",children:[(0,t.jsxs)(r.Table.Colgroup,{children:[(0,t.jsx)(r.Table.Col,{className:"w-8"}),(0,t.jsx)(r.Table.Col,{className:"w-52"}),(0,t.jsx)(r.Table.Col,{className:"w-36"}),(0,t.jsx)(r.Table.Col,{className:"w-28 lg:w-60"}),(0,t.jsx)(r.Table.Col,{className:"w-8"}),(0,t.jsx)(r.Table.Col,{className:"w-12"})]}),(0,t.jsx)(r.Table.Header,{removeSpacing:!0,children:(0,t.jsxs)(r.Table.Row,{className:"border-b border-gray-alpha-400 bg-gray-50 h-12",children:[(0,t.jsx)(r.Table.Head,{}),(0,t.jsx)(r.Table.Head,{className:"font-medium text-gray-700",children:"Name"}),(0,t.jsx)(r.Table.Head,{className:"font-medium text-gray-700",children:"Type"}),(0,t.jsx)(r.Table.Head,{className:"font-medium text-gray-700",children:"Connected Projects"}),(0,t.jsx)(r.Table.Head,{}),(0,t.jsx)(r.Table.Head,{})]})}),(0,t.jsx)(r.Table.Body,{interactive:!0,bordered:!0,children:c?(0,t.jsx)(eg,{count:L}):d?.sort((e,t)=>t.createdAt-e.createdAt).map(e=>(0,t.jsx)(G,{drain:e,teamSlug:s,resource:function(e,t){if(t.source?.kind==="integration"){let i=t.source;if(i.resourceId)return e.get(i.resourceId)}}(C,e),onEdit:O,onDelete:$,onStatusUpdate:B,location:x},e.id))})]})}),N?.drain&&T?(0,t.jsx)(ea,{action:T,drain:N.drain,onConfirm:F,isLoading:S||A||E,error:I,onClose:U,resource:N.resource,connection:N.connection}):null,(0,t.jsx)(ec.DrainModal,{drain:g,active:j,onClose:b,teamSlug:s,projectIdOrSlug:l,onDrainUpdated:async()=>{await u?.()}})]}):(0,t.jsx)(ex.AdditionalPermissionsRequired,{resource:"drains",team:m,className:"min-h-56 rounded-md border border-gray-alpha-400 bg-background-100"})}function ej(e){return(0,t.jsx)(ed.DrainModalProvider,{children:(0,t.jsx)(eh.ResourceModalsProvider,{protocolType:"logDrain",children:(0,t.jsx)(ep,{...e})})})}function eg(e){let{count:i}=e;return(0,t.jsx)(t.Fragment,{children:Array.from({length:i||3},(e,i)=>(0,t.jsx)(eb,{},`loading-${i}`))})}function eb(){return(0,t.jsxs)(r.Table.Row,{className:"h-16",children:[(0,t.jsx)(r.Table.Cell,{className:"pl-4",children:(0,t.jsx)(s.Skeleton,{width:16,height:16})}),(0,t.jsx)(r.Table.Cell,{children:(0,t.jsx)(s.Skeleton,{width:"60%",height:16})}),(0,t.jsx)(r.Table.Cell,{children:(0,t.jsx)(s.Skeleton,{width:"50%",height:16})}),(0,t.jsx)(r.Table.Cell,{children:(0,t.jsx)(s.Skeleton,{width:80,height:16})}),(0,t.jsx)(r.Table.Cell,{children:(0,t.jsx)(s.Skeleton,{width:16,height:16})}),(0,t.jsx)(r.Table.Cell,{children:(0,t.jsx)(s.Skeleton,{width:16,height:16})})]})}let ef={delete:{success:"Drain removed successfully.",error:"Failed to remove drain. Please contact support if this persists."},disable:{success:"Drain paused successfully.",error:"Failed to pause drain. Please contact support if this persists."},enable:{success:"Drain resumed successfully.",error:"Failed to resume drain. Please contact support if this persists."}};e.s(["DrainsList",()=>ej],8039973)},1427387,e=>{"use strict";var t=e.i(8711407),i=e.i(1176592),r=e.i(2504781),s=e.i(8161149),a=e.i(5468328),n=e.i(9522552),o=e.i(57106),l=e.i(455575),d=e.i(1717203),c=e.i(7557283),u=e.i(5338940);e.i(6483798);var x=e.i(8287059);function m(e){let{hasDrains:m,projectIdOrSlug:h}=e,{team:p}=(0,u.useTeam)(),j=(0,l.useToasts)(),{can:g}=(0,d.default)(),b=g(c.Action.Update,c.Resource.Drain),f=(0,x.useOpenUpgradeModal)(),y=(0,i.useMemo)(()=>b?(0,t.jsx)(r.Button,{onClick:()=>{f({source:"drains-settings",onConversionError:()=>j.error("Upgrade failed"),onConversionSuccess:()=>{j.success("Upgraded to pro successfully.")}})},type:"secondary",children:"Upgrade to Pro"}):(0,t.jsx)(a.Tooltip,{desktopOnly:!0,text:"You need additional permissions to enable Drains for your team",children:(0,t.jsx)(r.Button,{disabled:!0,children:"Upgrade to Pro"})}),[b,f,j]),v=p?.billing?.plan==="hobby",C=p?.billing?.plan==="pro"&&"trialing"===p.billing.status,T=v||C,w="Get started with Drains",N="Upgrade to Pro to create your first Drain.";return T||m||(w=`No drains are associated with this ${h?"project":"team"}`,N="Click Add Drain to get started"),(0,t.jsxs)(s.EmptyState.Root,{icon:(0,t.jsx)(s.EmptyState.Icon,{icon:(0,t.jsx)(n.Connection,{size:16}),size:32}),title:w,description:N,children:[T&&y,(0,t.jsx)(o.Link,{external:!0,href:"/docs/drains",tab:!0,variant:"secondary",children:"Learn More"})]})}var h=e.i(8039973),p=e.i(6998157);function j(e){let{teamSlug:i,projectIdOrSlug:r}=e,{data:{drains:s}}=(0,p.useDrains)({teamIdOrSlug:i,projectIdOrSlug:r,includeMetadata:!0}),a=s.length>0;return(0,t.jsx)("div",{className:"flex flex-col gap-6",children:a?(0,t.jsx)(h.DrainsList,{drains:s,teamSlug:i,projectIdOrSlug:r}):(0,t.jsx)(m,{hasDrains:a,projectIdOrSlug:r})})}e.s(["DrainsSettings",()=>j],1427387)}]);

//# debugId=686103ed-61ed-9231-642b-fd1ca5e8e0a7
//# sourceMappingURL=de1164298f5df147.js.map