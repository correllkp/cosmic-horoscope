;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="3fb59389-7164-1b5d-9538-a32dd187df65")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3501042,e=>{"use strict";var t=e.i(8523664),r=e.i(5836125),n=e.i(3299978),a=e.i(1176592),i=e.i(9016063);e.s(["useAIDomainSearchResults",0,e=>(0,t.useAtomValue)((0,r.aiDomainSearchResultsRx)(e)),"useClearOrderIfPostCheckout",0,()=>{(0,t.useAtomMount)(n.clearOrderIfPostCheckoutRx)},"useDomainState",0,e=>{let n=(0,i.useSearchDebounceEnabled)(),s=(0,a.useMemo)(()=>({domain:e,enabled:n}),[e,n]);return(0,t.useAtomValue)((0,r.optionallyDisabledDomainStateRx)(s))},"useEnableSubmittedOrderModal",0,()=>{let{setShowModal:e}=(0,i.useSubmittedOrderModal)(),n=(0,t.useAtomValue)(r.orderStateRx);(0,a.useEffect)(()=>{n?._tag==="Success"&&n.value?.status==="submitted"&&e(!0)},[n,e])},"useLoadStripe",0,()=>{(0,t.useAtomMount)((0,r.stripeAtom)("test")),(0,t.useAtomMount)((0,r.stripeAtom)("live"))},"usePollPostCheckoutState",0,e=>{(0,t.useAtomMount)(r.pollSignalRx),(0,t.useAtomMount)((0,r.pollPostCheckoutStateRx)(e))},"usePollPostRenewState",0,e=>((0,t.useAtomMount)(r.pollSignalRx),(0,t.useAtomValue)((0,r.pollPostRenewStateRx)(e))),"usePollPostRenewStateOptional",0,e=>{(0,t.useAtomMount)(r.pollSignalRx);let n=(0,t.useAtomValue)((0,r.pollPostRenewStateRx)(e??""));return null===e?null:n}])},9788962,e=>{"use strict";e.s(["default",0,function(e){return{all:e=e||new Map,on:function(t,r){var n=e.get(t);n?n.push(r):e.set(t,[r])},off:function(t,r){var n=e.get(t);n&&(r?n.splice(n.indexOf(r)>>>0,1):e.set(t,[]))},emit:function(t,r){var n=e.get(t);n&&n.slice().map(function(e){e(r)}),(n=e.get("*"))&&n.slice().map(function(e){e(t,r)})}}}])},2879936,e=>{"use strict";var t=e.i(9823729);function r(e,r,n){try{return e(r)}catch(e){return(0,t.warn)("[nuqs] Error while parsing value `%s`: %O"+(n?" (for key `%s`)":""),r,e,n),null}}var n=function(){if("undefined"==typeof window||!window.GestureEvent)return 50;try{let e=navigator.userAgent?.match(/version\/([\d\.]+) safari/i);return parseFloat(e[1])>=17?120:320}catch{return 320}}(),a=new Map,i={history:"replace",scroll:!1,shallow:!0,throttleMs:n},s=new Set,o=0,l=null;function u(e,r,o,l){let u=null===r?null:o(r);return(0,t.debug)("[nuqs queue] Enqueueing %s=%s %O",e,u,l),a.set(e,u),"push"===l.history&&(i.history="push"),l.scroll&&(i.scroll=!0),!1===l.shallow&&(i.shallow=!1),l.startTransition&&s.add(l.startTransition),i.throttleMs=Math.max(l.throttleMs??n,Number.isFinite(i.throttleMs)?i.throttleMs:0),u}function c(){return new URLSearchParams(location.search)}function d(e){let{getSearchParamsSnapshot:r=c,updateUrl:u,rateLimitFactor:d=1}=e;return null===l&&(l=new Promise((e,c)=>{if(!Number.isFinite(i.throttleMs)){(0,t.debug)("[nuqs queue] Skipping flush due to throttleMs=Infinity"),e(r()),setTimeout(()=>{l=null},0);return}function m(){o=performance.now();let[d,m]=function(e){let{updateUrl:r,getSearchParamsSnapshot:o}=e,l=o();if(0===a.size)return[l,null];let u=Array.from(a.entries()),c={...i},d=Array.from(s);for(let[e,r]of(a.clear(),s.clear(),i.history="replace",i.scroll=!1,i.shallow=!0,i.throttleMs=n,(0,t.debug)("[nuqs queue] Flushing queue %O with options %O",u,c),u))null===r?l.delete(e):l.set(e,r);try{var m,f;let e;return m=d,f=()=>{r(l,{history:c.history,scroll:c.scroll,shallow:c.shallow})},(e=t=>{if(t===m.length)return f();let r=m[t];if(!r)throw Error("Invalid transition function");r(()=>e(t+1))})(0),[l,null]}catch(e){return console.error((0,t.error)(429),u.map(e=>{let[t]=e;return t}).join(),e),[l,e]}}({updateUrl:u,getSearchParamsSnapshot:r});null===m?e(d):c(d),l=null}setTimeout(function(){let e=performance.now()-o,r=i.throttleMs,n=d*Math.max(0,Math.min(r,r-e));(0,t.debug)("[nuqs queue] Scheduling flush in %f ms. Throttled at %f ms",n,r),0===n?m():setTimeout(m,n)},0)})),l}var m=e.i(1176592),f=e.i(9788962);function p(e){function t(t){if(void 0===t)return null;let n="";if(Array.isArray(t)){if(void 0===t[0])return null;n=t[0]}return"string"==typeof t&&(n=t),r(e.parse,n)}return{eq:(e,t)=>e===t,...e,parseServerSide:t,withDefault(e){return{...this,defaultValue:e,parseServerSide:r=>t(r)??e}},withOptions(e){return{...this,...e}}}}var h=p({parse:e=>e,serialize:e=>`${e}`}),g=p({parse:e=>{let t=parseInt(e);return Number.isNaN(t)?null:t},serialize:e=>Math.round(e).toFixed()});p({parse:e=>{let t=g.parse(e);return null===t?null:t-1},serialize:e=>g.serialize(e+1)}),p({parse:e=>{let t=parseInt(e,16);return Number.isNaN(t)?null:t},serialize:e=>{let t=Math.round(e).toString(16);return t.padStart(t.length+t.length%2,"0")}}),p({parse:e=>{let t=parseFloat(e);return Number.isNaN(t)?null:t},serialize:e=>e.toString()});var S=p({parse:e=>"true"===e,serialize:e=>e?"true":"false"});function y(e,t){return e.valueOf()===t.valueOf()}function R(e){return p({parse:t=>e.includes(t)?t:null,serialize:e=>e.toString()})}p({parse:e=>{let t=parseInt(e);return Number.isNaN(t)?null:new Date(t)},serialize:e=>e.valueOf().toString(),eq:y}),p({parse:e=>{let t=new Date(e);return Number.isNaN(t.valueOf())?null:t},serialize:e=>e.toISOString(),eq:y}),p({parse:e=>{let t=new Date(e.slice(0,10));return Number.isNaN(t.valueOf())?null:t},serialize:e=>e.toISOString().slice(0,10),eq:y});var v=(0,f.default)();function w(e){let{history:i="replace",shallow:s=!0,scroll:o=!1,throttleMs:l=n,parse:c=e=>e,serialize:f=String,eq:p=(e,t)=>e===t,defaultValue:h,clearOnDefault:g=!0,startTransition:S}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{history:"replace",scroll:!1,shallow:!0,throttleMs:n,parse:e=>e,serialize:String,eq:(e,t)=>e===t,clearOnDefault:!0,defaultValue:void 0},y=(0,t.useAdapter)(),R=y.searchParams,w=(0,m.useRef)(R?.get(e)??null),[b,O]=(0,m.useState)(()=>{let t=a.get(e),n=void 0===t?R?.get(e)??null:t;return null===n?null:r(c,n,e)}),E=(0,m.useRef)(b);(0,t.debug)("[nuqs `%s`] render - state: %O, iSP: %s",e,b,R?.get(e)??null),(0,m.useEffect)(()=>{let n=R?.get(e)??null;if(n===w.current)return;let a=null===n?null:r(c,n,e);(0,t.debug)("[nuqs `%s`] syncFromUseSearchParams %O",e,a),E.current=a,w.current=n,O(a)},[R?.get(e),e]),(0,m.useEffect)(()=>{function r(r){let{state:n,query:a}=r;(0,t.debug)("[nuqs `%s`] updateInternalState %O",e,n),E.current=n,w.current=a,O(n)}return(0,t.debug)("[nuqs `%s`] subscribing to sync",e),v.on(e,r),()=>{(0,t.debug)("[nuqs `%s`] unsubscribing from sync",e),v.off(e,r)}},[e]);let x=(0,m.useCallback)(function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="function"==typeof t?t(E.current??h??null):t;(r.clearOnDefault??g)&&null!==n&&void 0!==h&&p(n,h)&&(n=null);let a=u(e,n,f,{history:r.history??i,shallow:r.shallow??s,scroll:r.scroll??o,throttleMs:r.throttleMs??l,startTransition:r.startTransition??S});return v.emit(e,{state:n,query:a}),d(y)},[e,i,s,o,l,S,y.updateUrl,y.getSearchParamsSnapshot,y.rateLimitFactor]);return[b??h??null,x]}var b={};function O(e){let{history:r="replace",scroll:a=!1,shallow:i=!0,throttleMs:s=n,clearOnDefault:o=!0,startTransition:l,urlKeys:c=b}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},f=Object.keys(e).join(","),p=(0,m.useMemo)(()=>Object.fromEntries(Object.keys(e).map(e=>[e,c[e]??e])),[f,JSON.stringify(c)]),h=(0,t.useAdapter)(),g=h.searchParams,S=(0,m.useRef)({}),y=(0,m.useMemo)(()=>Object.fromEntries(Object.keys(e).map(t=>[t,e[t].defaultValue??null])),[Object.values(e).map(e=>{let{defaultValue:t}=e;return t}).join(",")]),[R,w]=(0,m.useState)(()=>E(e,c,g??new URLSearchParams).state),O=(0,m.useRef)(R);if((0,t.debug)("[nuq+ `%s`] render - state: %O, iSP: %s",f,R,g),Object.keys(S.current).join("&")!==Object.values(p).join("&")){let{state:t,hasChanged:r}=E(e,c,g,S.current,O.current);r&&(O.current=t,w(t)),S.current=Object.fromEntries(Object.values(p).map(e=>[e,g?.get(e)??null]))}(0,m.useEffect)(()=>{let{state:t,hasChanged:r}=E(e,c,g,S.current,O.current);r&&(O.current=t,w(t))},[Object.values(p).map(e=>`${e}=${g?.get(e)}`).join("&")]),(0,m.useEffect)(()=>{let r=Object.keys(e).reduce((r,n)=>(r[n]=r=>{var a;let{state:i,query:s}=r,{defaultValue:o}=e[n],l=p[n];O.current={...O.current,[n]:i??o??null},S.current[l]=s,(0,t.debug)("[nuq+ `%s`] Cross-hook key sync %s: %O (default: %O). Resolved: %O",f,l,i,o,O.current),a=O.current,(0,t.debug)("[nuq+ `%s`] updateInternalState %O",f,a),O.current=a,w(a)},r),{});for(let n of Object.keys(e)){let e=p[n];(0,t.debug)("[nuq+ `%s`] Subscribing to sync for `%s`",f,e),v.on(e,r[n])}return()=>{for(let n of Object.keys(e)){let e=p[n];(0,t.debug)("[nuq+ `%s`] Unsubscribing to sync for `%s`",f,e),v.off(e,r[n])}}},[f,p]);let C=(0,m.useCallback)(function(n){let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},m=Object.fromEntries(Object.keys(e).map(e=>[e,null])),g="function"==typeof n?n(x(O.current,y))??m:n??m;for(let[n,d]of((0,t.debug)("[nuq+ `%s`] setState: %O",f,g),Object.entries(g))){let t=e[n],m=p[n];if(!t)continue;(c.clearOnDefault??t.clearOnDefault??o)&&null!==d&&void 0!==t.defaultValue&&(t.eq??((e,t)=>e===t))(d,t.defaultValue)&&(d=null);let f=u(m,d,t.serialize??String,{history:c.history??t.history??r,shallow:c.shallow??t.shallow??i,scroll:c.scroll??t.scroll??a,throttleMs:c.throttleMs??t.throttleMs??s,startTransition:c.startTransition??t.startTransition??l});v.emit(m,{state:d,query:f})}return d(h)},[f,r,i,a,s,l,p,h.updateUrl,h.getSearchParamsSnapshot,h.rateLimitFactor,y]);return[(0,m.useMemo)(()=>x(R,y),[R,y]),C]}function E(e,t,n,i,s){let o=!1,l=Object.keys(e).reduce((l,u)=>{let c=t?.[u]??u,{parse:d}=e[u],m=a.get(c),f=void 0===m?n?.get(c)??null:m;if(i&&s&&(i[c]??null)===f)return l[u]=s[u]??null,l;o=!0;let p=null===f?null:r(d,f,u);return l[u]=p??null,i&&(i[c]=f),l},{});if(!o){let t=Object.keys(e),r=Object.keys(s??{});o=t.length!==r.length||t.some(e=>!r.includes(e))}return{state:l,hasChanged:o}}function x(e,t){return Object.fromEntries(Object.keys(e).map(r=>[r,e[r]??t[r]??null]))}e.s(["createParser",()=>p,"parseAsBoolean",()=>S,"parseAsString",()=>h,"parseAsStringLiteral",()=>R,"useQueryState",()=>w,"useQueryStates",()=>O],2879936)},2608494,e=>{"use strict";e.i(1176592),Symbol("Input");var t=function(){try{if("undefined"==typeof localStorage)return!1;let e="nuqs-localStorage-test";localStorage.setItem(e,e);let t=localStorage.getItem(e)===e;if(localStorage.removeItem(e),!t)return!1}catch(e){return console.error("[nuqs]: debug mode is disabled (localStorage unavailable).",e),!1}return(localStorage.getItem("debug")??"").includes("nuqs")}();function r(e){function r(r){if(void 0===r)return null;let n="";if(Array.isArray(r)){if(void 0===r[0])return null;n=r[0]}"string"==typeof r&&(n=r);var a=e.parse,i=n;try{return a(i)}catch(e){return!function(e){for(var r=arguments.length,n=Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];t&&console.warn(e,...n)}("[nuqs] Error while parsing value `%s`: %O",i,e,void 0),null}}return{eq:(e,t)=>e===t,...e,parseServerSide:r,withDefault(e){return{...this,defaultValue:e,parseServerSide:t=>r(t)??e}},withOptions(e){return{...this,...e}}}}var n=r({parse:e=>e,serialize:e=>`${e}`}),a=r({parse:e=>{let t=parseInt(e);return Number.isNaN(t)?null:t},serialize:e=>Math.round(e).toFixed()});r({parse:e=>{let t=a.parse(e);return null===t?null:t-1},serialize:e=>a.serialize(e+1)}),r({parse:e=>{let t=parseInt(e,16);return Number.isNaN(t)?null:t},serialize:e=>{let t=Math.round(e).toString(16);return t.padStart(t.length+t.length%2,"0")}}),r({parse:e=>{let t=parseFloat(e);return Number.isNaN(t)?null:t},serialize:e=>e.toString()});var i=r({parse:e=>"true"===e,serialize:e=>e?"true":"false"});function s(e,t){return e.valueOf()===t.valueOf()}function o(e){return r({parse:t=>e.includes(t)?t:null,serialize:e=>e.toString()})}function l(e){if(0===e.size)return"";let t=[];for(let[r,n]of e.entries()){let e=r.replace(/#/g,"%23").replace(/&/g,"%26").replace(/\+/g,"%2B").replace(/=/g,"%3D").replace(/\?/g,"%3F");t.push(`${e}=${n.replace(/%/g,"%25").replace(/\+/g,"%2B").replace(/ /g,"+").replace(/#/g,"%23").replace(/&/g,"%26").replace(/"/g,"%22").replace(/'/g,"%27").replace(/`/g,"%60").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/[\x00-\x1F]/g,e=>encodeURIComponent(e))}`)}return"?"+t.join("&")}function u(e){let{clearOnDefault:t=!0,urlKeys:r={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},[i,s]=c(n)?function(e){if("string"==typeof e){let[t="",...r]=e.split("?");return[t,new URLSearchParams(r.join("?"))]}return e instanceof URLSearchParams?["",new URLSearchParams(e)]:[e.origin+e.pathname,new URLSearchParams(e.searchParams)]}(n):["",new URLSearchParams],o=c(n)?a:n;if(null===o){for(let t in e){let e=r[t]??t;s.delete(e)}return i+l(s)}for(let n in e){let a=e[n],i=o[n];if(!a||void 0===i)continue;let l=r[n]??n,u=void 0!==a.defaultValue&&(a.eq??((e,t)=>e===t))(i,a.defaultValue);null===i||(a.clearOnDefault??t??!0)&&u?s.delete(l):s.set(l,a.serialize(i))}return i+l(s)}}function c(e){return"string"==typeof e||e instanceof URLSearchParams||e instanceof URL}r({parse:e=>{let t=parseInt(e);return Number.isNaN(t)?null:new Date(t)},serialize:e=>e.valueOf().toString(),eq:s}),r({parse:e=>{let t=new Date(e);return Number.isNaN(t.valueOf())?null:t},serialize:e=>e.toISOString(),eq:s}),r({parse:e=>{let t=new Date(e.slice(0,10));return Number.isNaN(t.valueOf())?null:t},serialize:e=>e.toISOString().slice(0,10),eq:s}),e.s(["createParser",()=>r,"createSerializer",()=>u,"parseAsBoolean",()=>i,"parseAsString",()=>n,"parseAsStringLiteral",()=>o])},9016063,e=>{"use strict";var t=e.i(1176592),r=e.i(1875382),n=e.i(5055193),a=e.i(9553766),i=e.i(5836125),s=e.i(8523664),o=e.i(4520167),l=e.i(2608494),u=e.i(6503210),c=e.i(3628392),c=c;function d(e){let t=o.Schema.encodeUnknownEither(e),r=o.Schema.decodeUnknownEither(e);return(0,l.createParser)({parse:e=>{let t=r(e);return u.Either.getOrNull(t)},serialize:e=>{let r=t(e);return u.Either.getOrThrowWith(r,t=>Error(`Failed to encode value: ${e}`,{cause:t}))},eq:(e,t)=>c.equals(e,t)})}let m={q:"",sort:a.SORT_OPTIONS_DEFAULT,filter:a.FILTER_OPTIONS_DEFAULT,columns:a.COLUMNS_OPTIONS_DEFAULT},f={q:o.Schema.String,sort:a.Sort,filter:a.Filter,columns:a.Columns},p={q:d(f.q).withDefault(m.q),sort:d(f.sort).withDefault(m.sort),filter:d(f.filter).withDefault(m.filter),columns:d(f.columns).withDefault(m.columns)};var h=e.i(2879936);let g=(0,t.createContext)(null);function S(){let e=(0,t.useContext)(g);if(!e)throw Error("useFocus must be used within a MobileFocusContextProvider");return e}let y=(0,t.createContext)(null);function R(){let e=(0,t.useContext)(y);if(!e)throw Error("useSearchInputState must be used within a SearchInputStateProvider");return e}function v(){let e=(0,s.useAtomSet)(i.searchParamsSessionRx),r=(0,h.useQueryStates)(p);return(0,t.useEffect)(()=>{let{q:t,sort:i,filter:s,columns:o}=r[0],l={q:""===t?void 0:t,sort:i===a.SORT_OPTIONS_DEFAULT?void 0:i,filter:s===a.FILTER_OPTIONS_DEFAULT?void 0:s,columns:o===a.COLUMNS_OPTIONS_DEFAULT?void 0:o};e(n.Option.some(l))},[r,e]),r}function w(){let[e]=S(),t=(0,r.usePathname)(),n=b(),[a]=k();return"/domains/checkout"===t||"/domains-new-search-buy/checkout"===t||"/domains/postcheckout"===t||"/domains-new-search-buy/postcheckout"===t?"dont":"/domains/search"===t||"/domains-new-search-buy/search"===t||"/domains-new-search-buy/search-empty"===t||n&&e?"in-nav":a?"dont":"center-screen"}function b(){return(0,t.useSyncExternalStore)(e=>(window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)),()=>window.innerWidth<640||window.innerHeight<640,()=>null)}function O(){let[e,r]=(0,t.useState)(null);return(0,t.useLayoutEffect)(()=>{let e=()=>{var e;r({width:window.innerWidth,height:window.innerHeight,tw:(e=window.innerWidth)<600?"xs":e<768?"sm":e<1024?"md":e<1280?"lg":e<1536?"xl":"2xl"})};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),e}let E=(0,t.createContext)(null);function x(){let e=(0,t.useContext)(E);if(null===e)throw Error("useDomainDebounceAmount must be used within a DomainDebounceAmountContextProvider");return e}let C=(0,t.createContext)(null);function N(e){let r=(0,t.useContext)(C);if(null===r)throw Error("useTldPriceMap must be used within a TldPriceMapContextProvider");let n=r.get(e);if(void 0===n)throw Error(`Tld ${e} not found in TldPriceMapContext`);return n}let P=(0,t.createContext)(null);function I(e){let r=(0,t.useContext)(P);if(null===r)throw Error("useTldOutage must be used within a TldOutageMapContextProvider");return r.get(e)}let D=(0,t.createContext)(null);function M(){let e=(0,t.useContext)(D);if(null===e)throw Error("useTldMetadataMap must be used within a TldMetadataMapContextProvider");return e}let A=(0,t.createContext)(null);function T(){let e=(0,t.useContext)(A);if(null===e)throw Error("useSearchDebounceEnabled must be used within a SearchDebounceEnabledContextProvider");return e}let q=(0,t.createContext)(null);function k(){let e=(0,t.useContext)(q);if(null===e)throw Error("useIsErrorOnPage must be used within a IsErrorOnPageContextProvider");return e}let U={xs:1,sm:2,md:2,lg:3,xl:3,"2xl":3};function F(){let e=O(),[t]=v(),r=t.columns,n="auto"!==r?Number.parseInt(r,10):null;if(!e)return null;let{tw:a}=e;return n&&n<=U[a]?n:U[a]}let z=(0,t.createContext)(null);function L(){let e=(0,t.useContext)(z);if(null===e)throw Error("useModeMismatch must be used within a ModeMismatchContextProvider");return e}let j=(0,t.createContext)(null);function _(){let e=(0,t.useContext)(j);if(null===e)throw Error("useSubmittedOrder must be used within a SubmittedOrderContextProvider");return e}e.s(["DomainDebounceAmountContext",0,E,"IsErrorOnPageContext",0,q,"MobileFocusContext",0,g,"ModeMismatchModalContext",0,z,"SearchDebounceEnabledContext",0,A,"SearchInputStateContext",0,y,"SubmittedOrderModalContext",0,j,"TldMetadataMapContext",0,D,"TldOutageMapContext",0,P,"TldPriceMapContext",0,C,"useColumnCount",()=>F,"useDomainDebounceAmount",()=>x,"useInputState",()=>w,"useIsErrorOnPage",()=>k,"useIsMobile",()=>b,"useMobileFocus",()=>S,"useModeMismatchModal",()=>L,"useQueryState",()=>v,"useSearchDebounceEnabled",()=>T,"useSearchInputState",()=>R,"useSubmittedOrderModal",()=>_,"useTldMetadataMap",()=>M,"useTldOutage",()=>I,"useTldPrice",()=>N,"useWindowSize",()=>O],9016063)},6988463,e=>{"use strict";var t=e.i(4697349);let r=(0,t.createServerReference)("40df3977a6af0adecd73b1554e703443e608107cce",t.callServer,void 0,t.findSourceMapURL,"completePurchaseIntent");e.s(["completePurchaseIntent",()=>r])},2262341,e=>{"use strict";var t=e.i(4771896),r=e.i(4520167);let{firstName:n,lastName:a,email:i,phone:s,companyName:o,address1:l,address2:u,city:c,state:d,zip:m,country:f}=t.Schemas.BaseAndTldRegistrantFieldValues.fields.base.fields,p=r.Schema.Struct({firstName:r.Schema.String,lastName:r.Schema.String,email:r.Schema.String,phone:r.Schema.String.pipe(r.Schema.transform(r.Schema.String,{decode:e=>{let t=e.replace(/[^0-9+]/g,"");return t.startsWith("+")?t:`+${t}`},encode:e=>e})),companyName:r.Schema.String.pipe(r.Schema.transform(r.Schema.UndefinedOr(r.Schema.String),{decode:e=>{if(""!==e)return e},encode:e=>void 0===e?"":e})),address1:r.Schema.String,address2:r.Schema.String.pipe(r.Schema.transform(r.Schema.UndefinedOr(r.Schema.String),{decode:e=>{if(""!==e)return e},encode:e=>void 0===e?"":e})),city:r.Schema.String,state:r.Schema.String,zip:r.Schema.String,country:r.Schema.String}).pipe(r.Schema.compose(r.Schema.Struct({firstName:n.annotations({message:()=>({message:"Please enter your first name",override:!0})}),lastName:a.annotations({message:()=>({message:"Please enter your last name",override:!0})}),email:i.annotations({message:()=>({message:"Please enter a valid email address",override:!0})}),phone:s.annotations({message:()=>({message:"Please enter a valid phone number (including country code)",override:!0})}),address1:l.annotations({message:()=>({message:"Please enter your street address",override:!0})}),address2:u.annotations({}),companyName:o.annotations({}),city:c.annotations({message:()=>({message:"Please enter your city",override:!0})}),state:d.annotations({message:()=>({message:"Please enter your state or province",override:!0})}),zip:m.annotations({message:()=>({message:"Please enter your postal code",override:!0})}),country:f.annotations({message:()=>({message:"Please enter a valid two-letter country code",override:!0})})})));e.s(["RegistrantInfoFormSchema",0,p])},3299978,e=>{"use strict";var t=e.i(5148519),r=e.i(4771896),n=e.i(5949828),a=e.i(8973927),i=e.i(5055193),s=e.i(8358049),o=e.i(4520167),l=e.i(6912975),u=e.i(9977037),c=e.i(5836125),d=e.i(1282437),m=e.i(889957),f=e.i(2262341),p=e.i(6988463),h=e.i(3551360);let g=l.Atom.optimisticFn(c.orderStateRx,{reducer:(e,t)=>{let{tldPrice:r,domain:n}=t;return u.Result.map(e,e=>({...e,items:e.items.concat({domainName:n,years:r.years,autoRenew:!0,price:r.price,renewalPrice:r.renewalPrice,status:"pending"})}))},fn:d.atomRuntime.fn(a.Effect.fnUntraced(function*(e,r){let{tldPrice:n,domain:a,fromAiSuggestion:s}=e,o=yield*t.DomainsRegistrarRpcClient.DomainsRegistrarRpcClient,l=r(c.orderIdRx);if(i.Option.isSome(l))yield*o.orders.upsertItem({orderId:l.value,item:{domainName:a,years:n.years,autoRenew:!0,fromAiSuggestion:s,expectedPrice:n.price}});else{let{orderId:e}=yield*o.orders.create({items:[{domainName:a,years:n.years,autoRenew:!0,fromAiSuggestion:s,expectedPrice:n.price}]});r.set(c.orderIdRx,i.Option.some(e))}}),{concurrent:!0})}).pipe(l.Atom.withLabel("addToCartRx")),S=l.Atom.optimisticFn(c.orderStateRx,{reducer:(e,t)=>{let{domain:r}=t;return u.Result.map(e,e=>({...e,items:e.items.filter(e=>e.domainName!==r)}))},fn:d.atomRuntime.fn(a.Effect.fnUntraced(function*(e,r){let{domain:n}=e,a=yield*r.result(c.unwrappedOrderIdRx),i=yield*t.DomainsRegistrarRpcClient.DomainsRegistrarRpcClient;yield*i.orders.removeItem({orderId:a,domainName:n})}),{concurrent:!0})}).pipe(l.Atom.withLabel("removeFromCartRx")),y=d.atomRuntime.atom(e=>a.Effect.gen(function*(){let r=yield*e.result(c.unwrappedOrderIdRx),n=yield*t.DomainsRegistrarRpcClient.DomainsRegistrarRpcClient,a=yield*n.orders.checkout({orderId:r,returnUrl:window.location.href});return yield*m.invalidate(["orderState"]),a})).pipe(l.Atom.withLabel("checkoutRx")),R=d.atomRuntime.fn(a.Effect.fnUntraced(function*(e,r){let{registrantInfo:n,purchaseIntentId:i}=e,s=yield*r.result(c.unwrappedOrderIdRx),o=yield*t.DomainsRegistrarRpcClient.DomainsRegistrarRpcClient;yield*o.orders.submitRegistrantInfo({orderId:s,registrantInfo:n,purchaseIntentId:i,saveForTeam:!0}).pipe(a.Effect.tapError(e=>a.Effect.sync(()=>{console.error("submitRegistrantInfoRx failed",e)})))}),{reactivityKeys:["orderState"]}),v=l.Atom.family(e=>l.Atom.optimisticFn(c.orderStateRx,{reducer:(t,r)=>{let{autoRenew:n}=r;return u.Result.map(t,t=>{let r=t.items.find(t=>t.domainName===e);return r?{...t,items:[...t.items.filter(t=>t.domainName!==e),{...r,autoRenew:n}]}:t})},fn:d.atomRuntime.fn(a.Effect.fnUntraced(function*(r,n){let{autoRenew:a}=r,i=yield*n.result(c.unwrappedOrderIdRx),s=(yield*n.result(c.orderStateRx)).items.find(t=>t.domainName===e);if(!s)return;let o=yield*t.DomainsRegistrarRpcClient.DomainsRegistrarRpcClient;yield*o.orders.upsertItem({orderId:i,item:{domainName:e,years:s.years,autoRenew:a}})}))}).pipe(l.Atom.withLabel(`setAutoRenewRx(${e})`))),w=l.Atom.make(e=>a.Effect.gen(function*(){let t=yield*e.result(c.orderStateRx);("submitted"===t.status||"completed"===t.status||"failed"===t.status)&&e.set(c.orderIdRx,i.Option.none())}));class b extends n.Data.TaggedError("StripeCheckoutError"){}let O=l.Atom.fn(a.Effect.fnUntraced(function*(e){let{stripeCheckout:t,registrantInfo:r}=e;if("success"!==t.type)return yield*a.Effect.fail(new b({cause:{message:"error"===t.type?t.error.message:"Checkout session failed to load",code:"paymentFailed",paymentFailed:{declineCode:null}}}));let n=yield*a.Effect.tryPromise(async()=>(await t.checkout.updateBillingAddress({address:{country:r.country,city:r.city,line1:r.address1,line2:r.address2,postal_code:r.zip,state:r.state},name:`${r.firstName} ${r.lastName}`}),t.checkout.confirm({redirect:"if_required"}))).pipe(a.Effect.tapError(e=>a.Effect.sync(()=>{console.error("Stripe checkout failed",e)})));return"success"===n.type?yield*a.Effect.void:(console.error("Stripe checkout failed",n.error),yield*a.Effect.fail(new b({cause:n.error})))})),E=d.atomRuntime.fn(a.Effect.fnUntraced(function*(e){let n=yield*r.Schemas.DomainName.fromString(e.domainName),i=r.Schemas.Dollars.unsafeMake(e.expectedPrice),s=yield*t.DomainsRegistrarRpcClient.DomainsRegistrarRpcClient;return yield*s.domains.renew({domainName:n,autoRenew:e.autoRenew,years:e.years,expectedPrice:i,registrantInformation:e.registrantInformation},(0,d.scopeHeader)(e.scope)).pipe(a.Effect.tapError(e=>a.Effect.sync(()=>{console.error("Domain renewal failed",e)})))})),x=d.atomRuntime.fn(a.Effect.fnUntraced(function*(e){let n=yield*r.Schemas.DomainName.fromString(e.domainName),i=yield*o.Schema.decode(f.RegistrantInfoFormSchema)({...e.registrantInfo,companyName:e.registrantInfo.companyName??"",address2:e.registrantInfo.address2??""}),s=yield*t.DomainsRegistrarRpcClient.DomainsRegistrarRpcClient;return yield*s.domains.updateRegistrantInfo({domainName:n,registrantInfo:{base:i}},(0,d.scopeHeader)(e.scope)).pipe(a.Effect.tapError(e=>a.Effect.sync(()=>{console.error("Domain registrant info update failed",e)})))})),C=l.Atom.fn(a.Effect.fnUntraced(function*(e,t){let{stripeCheckout:r,formValues:n,byTld:i,purchaseIntentId:s,teamIdOrSlug:l}=e,u=yield*o.Schema.decode(f.RegistrantInfoFormSchema)(n);return t.set(R,{registrantInfo:{base:u,byTld:i},purchaseIntentId:s}),yield*t.result(R),t.set(O,{stripeCheckout:r,registrantInfo:u}),yield*t.result(O),yield*a.Effect.tryPromise(()=>(0,p.completePurchaseIntent)({purchaseIntentId:s,teamIdOrSlug:l})).pipe(a.Effect.ignoreLogged),yield*a.Effect.void},a.Effect.tapError(e=>a.Effect.sync(()=>(0,h.track)("domains-checkout-error",{error:e._tag}))))),N=d.atomRuntime.fn(a.Effect.fnUntraced(function*(e){let n=yield*r.Schemas.DomainName.fromString(e.domainName),a=yield*o.Schema.decode(f.RegistrantInfoFormSchema)({...e.registrantInfo,companyName:e.registrantInfo.companyName??"",address2:e.registrantInfo.address2??""}),i=yield*t.DomainsRegistrarRpcClient.DomainsRegistrarRpcClient;return yield*i.domains.transferIn({domainName:n,years:e.years,expectedPrice:r.Schemas.Dollars.unsafeMake(e.expectedPrice),autoRenew:!0,registrantInformation:{base:a,byTld:{}},authCode:s.Redacted.make(e.authCode)},(0,d.scopeHeader)(e.scope))})),P=d.atomRuntime.fn(a.Effect.fnUntraced(function*(e){let n=yield*r.Schemas.DomainName.fromString(e.domainName),i=yield*a.Effect.forEach(e.nameservers,r.Schemas.Nameserver.fromString),s=yield*t.DomainsRegistrarRpcClient.DomainsRegistrarRpcClient;return yield*s.domains.updateNameservers({domainName:n,nameservers:i},(0,d.scopeHeader)(e.scope)).pipe(a.Effect.tapError(e=>a.Effect.sync(()=>{console.error("Nameservers update failed",e)})))})),I=d.atomRuntime.fn(a.Effect.fnUntraced(function*(e){let n=yield*r.Schemas.DomainName.fromString(e.domainName),i=yield*t.DomainsRegistrarRpcClient.DomainsRegistrarRpcClient;yield*i.domains.resendContactVerificationEmail({domainName:n},(0,d.scopeHeader)(e.scope)).pipe(a.Effect.tapError(e=>a.Effect.sync(()=>{console.error("Resend contact verification email failed",e)})))}));e.s(["addToCartRx",0,g,"checkoutBuySequenceAtom",0,C,"checkoutRx",0,y,"clearOrderIfPostCheckoutRx",0,w,"removeFromCartRx",0,S,"renewDomainAtom",0,E,"resendContactVerificationEmailAtom",0,I,"setAutoRenewRx",0,v,"transferDomainInAtom",0,N,"updateNameserversAtom",0,P,"updateRegistrantInfoAtom",0,x])}]);

//# debugId=3fb59389-7164-1b5d-9538-a32dd187df65
//# sourceMappingURL=627460237e902694.js.map