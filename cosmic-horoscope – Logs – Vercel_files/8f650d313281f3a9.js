;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="ca72a613-4ec4-b3dc-c922-cd00fd3bdfcd")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,4605757,e=>{"use strict";var t=e.i(8711407),i=e.i(1176592),s=e.i(9722978),a=e.i(2504781),l=e.i(1136434),n=e.i(7837522);function r(e){let{children:r,disabled:d,closedHeight:o,className:c,trackingAction:u,trackingMeta:m}=e,{track:x}=(0,n.useTrackActivity)(),[g,h]=(0,i.useState)(!1);return(0,t.jsxs)("div",{className:(0,s.clsx)("relative",c),"data-expanded":g,children:[(0,t.jsx)("div",{className:(0,s.clsx)("overflow-hidden",{"gradient-mask":!g}),style:{height:g?"auto":o},children:r}),!g&&(0,t.jsx)(a.Button,{className:"[&>span:first-child]: absolute bottom-1 left-1/2 translate-x-1/2 !text-xs !font-normal !shadow-tooltip [&>span:first-child]:p-0 [&>span:first-child]:pl-1.5",disabled:d,onClick:()=>{h(!0),x(u,m)},shape:"rounded",size:"small",style:{"--height":"28px"},suffix:(0,t.jsx)(l.ChevronDownSmall,{}),type:"secondary",children:"Show All"})]})}e.s(["ExpandableSection",()=>r])},1346287,1272130,5669196,e=>{"use strict";var t=e.i(8711407),i=e.i(7837522),s=e.i(57106);function a(e){let{plan:a,event:l,href:n,children:r,...d}=e,{track:o}=(0,i.useTrackActivity)();return(0,t.jsx)(s.ButtonLink,{...d,href:n,onClick:()=>{o(l,{plan:a})},children:r})}e.s(["ButtonWithTracking",()=>a],1346287);var l=e.i(6912485),n=e.i(3169345),r=e.i(1906681),d=e.i(5468328),o=e.i(4177906),c=e.i(362928),u=e.i(6347389),m=e.i(9889563),x=e.i(1288475),g=e.i(2988836),h=e.i(4726513);let p=(0,e.i(9334638).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M13 15.1L12 14.5L10.1524 15.8857C10.0621 15.9534 9.93791 15.9534 9.8476 15.8857L8 14.5L6.14377 15.8922C6.05761 15.9568 5.94008 15.9601 5.85047 15.9003L3.75 14.5L3 15L2.83257 15.1116L1.83633 15.7758L1.68656 15.8756C1.60682 15.9288 1.5 15.8716 1.5 15.7758V15.5958V14.3985V14.1972V1.5V0H3H8H9.08579C9.351 0 9.60536 0.105357 9.79289 0.292893L14.2071 4.70711C14.3946 4.89464 14.5 5.149 14.5 5.41421V6.5V14.2507V14.411V15.5881V15.7881C14.5 15.8813 14.3982 15.9389 14.3183 15.891L14.1468 15.7881L13.1375 15.1825L13 15.1ZM12.3787 5L9.5 2.12132V5H12.3787ZM8 1.5V5V6.5H9.5H13V13.3507L12.7717 13.2138L11.9069 12.6948L11.1 13.3L10 14.125L8.9 13.3L8 12.625L7.1 13.3L5.94902 14.1632L4.58205 13.2519L3.75 12.6972L3 13.1972V1.5H8Z" fill="currentColor"/>');var f=e.i(7780974),j=e.i(9481787);function b(e){let{invoice:i,owner:s,teamSlug:l,isEmptyState:n=!1}=e,r=(0,j.getDashboardHref)("/~/settings/invoices/upcoming",l);return(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-3 flex-initial p-0",children:(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial p-4",children:(0,t.jsxs)("div",{className:"flex flex-row items-center justify-between gap-2 flex-initial",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-4 flex-initial",children:[(0,t.jsx)("div",{className:"flex size-8 items-center justify-center rounded-full border border-gray-alpha-400 bg-gray-100",children:(0,t.jsx)(p,{color:n?"gray-alpha-700":void 0})}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-0 flex-initial",children:[(0,t.jsx)("p",{className:"text-label-13 font-normal text-gray-900",children:"Upcoming Invoice"}),(0,t.jsx)("p",{className:`text-label-14 font-medium ${n?"text-gray-700":void 0}`,children:n?"•••":(0,o.formatInvoiceCurrency)(i.total,i.currency)})]})]}),(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-1 flex-initial",children:[(0,t.jsx)("p",{className:"text-label-13 text-gray-900 mt-2 mr-2 geist-hide-on-mobile",children:"Including seats, add-ons, and on-demand usage"}),(0,t.jsx)(a,{plan:s?.billing?.plan??"pro",event:f.VercelActivityAction.BillingOverviewViewUsageClicked,size:"small",type:"secondary",href:r,className:"geist-hide-on-mobile",disabled:n,children:"View Upcoming Invoice"}),(0,t.jsx)(a,{plan:s?.billing?.plan??"pro",event:f.VercelActivityAction.BillingOverviewViewUsageClicked,size:"small",type:"secondary",href:r,className:"geist-show-on-mobile",disabled:n,children:"Details"})]})]})})})}e.s(["UpcomingCharges",()=>b],1272130);var y=e.i(1176592),v=e.i(455575),N=e.i(6891161),w=e.i(8522580),S=e.i(3500331),A=e.i(4697349);let C=(0,A.createServerReference)("40864483a1601795580df6268e69d5aec5e85cac24",A.callServer,void 0,A.findSourceMapURL,"createMiuTopupConfig"),I=(0,A.createServerReference)("40b54e5d66a1adb2bf9358f5b8b7d1ee1e8dfa840c",A.callServer,void 0,A.findSourceMapURL,"deleteMiuTopupConfig");var E=e.i(2471070),T=e.i(5338940);function M(e){let{teamSlug:i,currency:s,productName:a,miuUnitPrice:l,miuConsumption:n}=e,[c,u]=(0,y.useTransition)(),[m,x]=(0,y.useState)(!1),[h,p]=(0,y.useState)(""),[f,j]=(0,y.useState)(!1),b=(0,v.useToasts)(),{team:A}=(0,T.useTeam)(),M=A?.membership?.role,{topups:k,mutate:P}=(0,E.useCreditTopups)(s),F=k?.filter(e=>"orb_ledger"===e.provider.type&&"miu"===e.provider.currency)??[],L=k?.filter(e=>"orb_ledger"!==e.provider.type||"miu"!==e.provider.currency)??[],_=F.length>0,O=F[0]?.id??null,B=l>0?(1/l).toFixed(4):"0",U=l>0?((1-l)*100).toFixed(0):"0";return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex items-center justify-end gap-2",children:(0,t.jsx)(r.Toggle,{checked:_,onChange:e=>{e?x(!0):u(async()=>{try{if(!O)throw Error(`No active ${a} Buy with MIU configuration found. Cannot disable.`);await I({teamIdOrSlug:i,topupId:O}),await P(),b.success(`${a} Buy with MIU disabled`)}catch(t){let e=t instanceof Error?t.message:"Unknown error";b.error(`Failed to disable Buy with MIU: ${e}`),await P()}})},disabled:c||"OWNER"!==M&&"BILLING"!==M,size:"medium",labelCasing:"normal",children:(0,t.jsxs)("span",{className:"flex items-center gap-1",children:["number"==typeof n&&Math.round(n)>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("span",{className:"font-medium",children:[(0,o.formatCreditLedgerCount)(n)," MIUs Used"]}),(0,t.jsx)("span",{className:"text-gray-500 mx-1",children:"•"})]}),"Buy with MIU",(0,t.jsx)(d.Tooltip,{text:`Converted at a rate of 1 MIU = ${l.toFixed(2)} USD (${B} MIU per dollar)`,children:(0,t.jsx)(g.InformationFillSmall,{size:14})})]})})}),(0,t.jsxs)(N.Modal.Modal,{active:m,onClickOutside:()=>{x(!1),j(!1),p("")},children:[(0,t.jsx)(N.Modal.Body,{children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-3 flex-initial",children:[(0,t.jsxs)(N.Modal.Title,{children:["Enable Buy with MIU for ",a]}),(0,t.jsxs)("p",{className:"text-copy-14",children:["We'll apply your MIUs towards ",a,"."," ",1!==l&&(0,t.jsxs)(t.Fragment,{children:["Your MIU credits were purchased at"," ",(0,t.jsxs)("b",{children:[U,"% discounted rate"]}),". We'll apply your MIUs towards ",a," use at the undiscounted rate shown below."]})]}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial p-4 border border-gray-400 rounded-md bg-background-100",children:[(0,t.jsx)("p",{className:"text-label-13 text-gray-900",children:"Conversion rate based on contract"}),(0,t.jsxs)("p",{className:"text-label-14 font-medium",children:["1 MIU = $",l.toFixed(2)," USD"]}),(0,t.jsxs)("p",{className:"text-label-13 text-gray-900",children:["(",B," MIU per dollar)"]})]}),(0,t.jsxs)("p",{className:"text-copy-14",children:["After you run out of MIUs, you'll be invoiced for ",a," ","usage."]}),(0,t.jsx)(r.Toggle,{checked:f,onChange:j,size:"medium",labelCasing:"normal",children:"Limit Monthly Spend"}),f&&(0,t.jsx)(S.Input,{label:"Maximum Monthly Spend (MIUs)",id:"maximum-monthly-spend",typeName:"number",value:h,onChange:e=>p(e.target.value),placeholder:"Defaults to no limit",min:"50",step:"1"}),L.length>0&&(0,t.jsx)(w.Note,{type:"warning",fill:!0,children:L.map((e,i)=>{var s;return(0,t.jsxs)(y.Fragment,{children:["An existing ",{stripe_invoice_deferred:"invoice",stripe_invoice_immediate:"invoice",tackle_aws_marketplace:"AWS Marketplace",orb_ledger:"Orb Ledger"}[s=e.provider.type]||s," ","topup configuration will be replaced.",i<L.length-1&&(0,t.jsx)("br",{})]},e.id)})})]})}),(0,t.jsxs)(N.Modal.Actions,{children:[(0,t.jsx)(N.Modal.Action,{onClick:()=>{x(!1),j(!1),p("")},type:"secondary",children:"Cancel"}),(0,t.jsx)(N.Modal.Action,{onClick:()=>{if(f&&""!==h.trim()){let e=Number.parseFloat(h),t=Number.parseFloat("50");if(!Number.isNaN(e)&&e<t)return void b.error("Maximum monthly spend must be at least 50 MIUs")}x(!1),u(async()=>{try{L.length>0&&await Promise.all(L.map(e=>I({teamIdOrSlug:i,topupId:e.id}))),await C({teamIdOrSlug:i,currency:s,maximumMonthlySpend:f&&""!==h.trim()?h:null}),await P(),b.success(`${a} Buy with MIU enabled`),p(""),j(!1)}catch(t){let e=t instanceof Error?t.message:"Unknown error";b.error(`Failed to enable Buy with MIU: ${e}`),await P(),p(""),j(!1)}})},loading:c,children:L.length>0?"Replace and Enable":"Enable"})]})]})]})}var k=e.i(1912982);function P(e){let{creditLedgers:i,owner:s}=e,a=s?.billing?.plan??"pro";return(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial p-6 pt-0",children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-1 flex-initial",children:[(0,t.jsx)("p",{className:"text-heading-16",children:"Credits"}),(0,t.jsx)("p",{className:"text-label-14",children:"pro"===a?"Resource usage is drawn from your platform and seat credits. Once all the credits are spent, any additional usage is billed on-demand.":"Managed Infrastructure Units are drawn from on-demand usage."})]}),i.map(e=>{let{total:i,remaining:n}=e,r=i-n;return(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial border border-gray-400 p-4 rounded-md mt-2",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center justify-between gap-2 flex-initial",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-4 flex-initial",children:[(0,t.jsx)("div",{className:"flex size-8 items-center justify-center rounded-full border border-gray-alpha-400 bg-gray-100 geist-hide-on-mobile",children:(0,t.jsx)(u.Coins,{})}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-0 flex-initial",children:[(0,t.jsx)("p",{className:"text-label-13 text-gray-800",children:"pro"===a?"Included Credit":`${(0,c.formatBillingCycle)(s)}`}),(0,t.jsxs)("p",{className:"text-label-13 font-medium",children:[_(r,a,e.currency)," /"," ",_(i,a,e.currency)]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-0 flex-initial",children:[(0,t.jsx)("p",{className:"text-label-13 text-gray-800",children:"pro"===a?"Current Balance":"Available MIUs"}),(0,t.jsx)("p",{className:"text-label-13 font-medium text-right",children:_(n,a,e.currency)})]})]}),(0,t.jsx)(l.Progress,{colors:{0:"var(--ds-gray-1000)"},max:i,value:r})]},e.title)})]})}function F(e){let{creditLedgers:i,owner:s,invoice:a,teamSlug:l,canUpdateBillingPlan:n,isEmptyState:r=!1}=e,d=s?.billing?.plan??"pro",o=a?.lineItems.reduce((e,t)=>"managed-infra"===t.group&&t.consumption?e+Number(t.consumption.onDemand):e,0)??0;if(!i[0]&&!r)return(0,t.jsx)(t.Fragment,{});let{total:c=20,remaining:u=20}=i[0]||{};return(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-3 flex-initial p-6 pt-0 pb-4",children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-1 flex-initial",children:[(0,t.jsx)("p",{className:"text-heading-16",children:"Usage"}),(0,t.jsx)("p",{className:"text-copy-14 text-gray-1000",children:"pro"===d?"Infrastructure usage is drawn from your included credit. Once the credits are spent, additional usage is billed on-demand.":"Managed Infrastructure Units are drawn from on-demand usage."})]}),(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-0 flex-initial border border-gray-400 rounded-md bg-background-200",children:i[0]||r?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.CreditUsageCompact,{plan:d,currency:"usd",creditsApplied:c-u,creditsAllocated:c,balance:o,noBorder:!0,className:"p-4",noRoundedBottom:!0,source:"billing-settings",canUpdateBillingPlan:n,isEmptyState:r}),a&&!r?(0,t.jsx)(b,{invoice:a,owner:s,teamSlug:l}):r?(0,t.jsx)(b,{invoice:{total:0,currency:"usd"},owner:s,teamSlug:l,isEmptyState:!0}):null]}):null})]})}function L(e){let{creditLedgers:i,owner:s,invoice:a,teamSlug:l,isEmptyState:c=!1}=e,{total:p=20,remaining:f=20}=i[0]||{},j=p-f,{usageBreakdown:y,isLoading:v}=function(e){let{start:t,end:i,totalUsed:s}=e,{total:a,error:l,loading:n}=(0,k.usePurchaseIntentAggregate)({start:t,end:i,currency:"miu",configuration:{type:"credit_topup",options:{currency:"ai_gateway_credits"}}}),{total:r,error:d,loading:o}=(0,k.usePurchaseIntentAggregate)({start:t,end:i,currency:"miu",configuration:{type:"credit_topup",options:{currency:"vercel_agent_credits"}}}),c=void 0!==a?Number(a):void 0,u=void 0!==r?Number(r):void 0;return{usageBreakdown:void 0!==c&&void 0!==u?{managedInfrastructure:Math.max(0,s-c-u),gateway:c,agent:u}:void 0,isLoading:n||o,error:l||d}}({totalUsed:j}),N=a?.lineItems.reduce((e,t)=>"managed-infra"===t.group&&t.consumption?e+Number(t.consumption.onDemand):e,0)??0;return i[0]||c?(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-3 flex-initial p-6 pt-0 pb-4",children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-1 flex-initial",children:[(0,t.jsx)("p",{className:"text-heading-16",children:"MIUs"}),(0,t.jsx)("p",{className:"text-copy-14 text-gray-1000",children:"Managed Infrastructure Units are drawn from on-demand usage. Once the MIUs are spent, additional usage is billed on-demand."})]}),(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-0 flex-initial border border-gray-400 rounded-md bg-background-200",children:i[0]||c?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial p-4 bg-background-100 rounded-t-md",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center justify-between flex-initial",children:[(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-3 flex-initial",children:[(0,t.jsx)("div",{className:"hidden smd:flex size-8 items-center justify-center rounded-full border border-gray-alpha-400 mt-1 bg-blue-100",children:(0,t.jsx)(u.Coins,{color:"blue-900"})}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-0 flex-initial",children:[(0,t.jsx)("div",{className:"text-sm text-gray-900",children:"MIU Commitment"}),(0,t.jsxs)("div",{className:"text-sm font-medium",children:[(0,o.formatCreditLedgerCount)(j)," MIUs /"," ",(0,o.formatCreditLedgerCount)(p)," MIUs"]})]})]}),(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-3 flex-initial",children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-0 flex-initial text-right",children:[(0,t.jsx)("div",{className:"label-13 text-gray-900",children:"On-Demand Charges"}),(0,t.jsx)("div",{className:"text-sm font-medium ml-auto",children:(0,o.formatInvoiceCurrency)(N.toFixed(2),"usd")})]}),(0,t.jsx)("div",{className:"hidden smd:flex size-8 items-center justify-center rounded-full border border-gray-alpha-400 mt-1 bg-purple-100",children:(0,t.jsx)(m.Dollar,{color:"purple-900"})})]})]}),(0,t.jsx)(h.CreditUsageProgress,{creditsApplied:j,creditsAllocated:p,balance:N,isEmptyState:c,usageBreakdown:!v&&y?y:void 0})]}),(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-0 flex-initial px-4 pt-2 pb-4",children:(0,t.jsx)(n.Table,{overflow:!1,children:(0,t.jsxs)(n.Table.Body,{striped:!0,children:[(0,t.jsxs)(n.Table.Row,{children:[(0,t.jsx)(n.Table.Cell,{className:"pl-0",children:(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-3 flex-initial",children:[(0,t.jsx)(x.Status,{style:{color:"var(--ds-blue-900)"}}),(0,t.jsx)("p",{className:"text-label-14 font-medium",children:"Managed Infrastructure"})]})}),(0,t.jsx)(n.Table.Cell,{className:"pr-0 text-right",children:(0,t.jsx)(r.Toggle,{checked:!0,disabled:!0,size:"medium",labelCasing:"normal",children:(0,t.jsxs)("span",{className:"flex items-center gap-1",children:["number"==typeof y?.managedInfrastructure&&Math.round(y.managedInfrastructure)>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("span",{className:"font-medium",children:[(0,o.formatCreditLedgerCount)(y.managedInfrastructure)," ","MIUs Used"]}),(0,t.jsx)("span",{className:"text-gray-500 mx-1",children:"•"})]}),"Buy with MIU",(0,t.jsx)(d.Tooltip,{text:"Managed Infrastructure always draws from your MIU Commitment",children:(0,t.jsx)(g.InformationFillSmall,{size:14})})]})})})]}),(0,t.jsxs)(n.Table.Row,{children:[(0,t.jsx)(n.Table.Cell,{className:"pl-0",children:(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-3 flex-initial",children:[(0,t.jsx)(x.Status,{style:{color:"var(--ds-amber-600)"}}),(0,t.jsx)("p",{className:"text-label-14 font-medium",children:"AI Gateway"})]})}),(0,t.jsx)(n.Table.Cell,{className:"pr-0 text-right",children:(0,t.jsx)(M,{teamSlug:l,currency:"ai_gateway_credits",productName:"AI Gateway",miuUnitPrice:s?.billing?.miuUnitPrice??0,miuConsumption:y?.gateway})})]}),(0,t.jsxs)(n.Table.Row,{children:[(0,t.jsx)(n.Table.Cell,{className:"pl-0",children:(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-3 flex-initial",children:[(0,t.jsx)(x.Status,{style:{color:"var(--ds-green-600)"}}),(0,t.jsx)("p",{className:"text-label-14 font-medium",children:"Vercel Agent"})]})}),(0,t.jsx)(n.Table.Cell,{className:"pr-0 text-right",children:(0,t.jsx)(M,{teamSlug:l,currency:"vercel_agent_credits",productName:"Vercel Agent",miuUnitPrice:s?.billing?.miuUnitPrice??0,miuConsumption:y?.agent})})]})]})})}),(0,t.jsx)("div",{className:"border-t border-gray-400"}),a&&!c?(0,t.jsx)(b,{invoice:a,owner:s,teamSlug:l}):c?(0,t.jsx)(b,{invoice:{total:0,currency:"usd"},owner:s,teamSlug:l,isEmptyState:!0}):null]}):null})]}):(0,t.jsx)(t.Fragment,{})}function _(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"usd";return"pro"===t?(0,o.formatInvoiceCurrency)(e.toFixed(2),i):`${(0,o.formatCreditLedgerCount)(e)} MIUs`}e.s(["CreditLedgers",()=>F,"CreditLedgersEnt",()=>L,"CreditLedgersLegacyPro",()=>P],5669196)},6192817,e=>{"use strict";var t=e.i(8711407),i=e.i(3500331),s=e.i(1176592),a=e.i(2466450);let l=(0,s.forwardRef)(function(e,l){let{currency:n="usd",onChange:r,placeholder:d,requireWholeNumbers:o=!1,value:c,...u}=e,[m,x]=(0,s.useState)(!1),g=(0,s.useCallback)(e=>{let t=e.target.value;if(""===t)return r(null);let i=Number(t);o&&(i=Math.floor(i)),r(100*i)},[r,o]),h=(0,s.useMemo)(()=>null===c?"":m?(c/100).toString():(0,a.formatCurrency)(c,n),[n,m,c]);return(0,t.jsx)(i.Input,{onBlur:e=>{x(!1),u.onBlur?.(e)},onChange:g,onFocus:e=>{x(!0),u.onFocus?.(e)},placeholder:(0,a.formatCurrency)(d??1e6,n),ref:l,suffix:n.toUpperCase(),typeName:m?"number":"text",value:h,...u})});e.s(["CurrencyInput",0,l])},263599,e=>{e.v({budgetAmountStack:"index-module__BEO7xW__budgetAmountStack"})},3216120,2032215,4633529,345159,e=>{"use strict";var t=e.i(7909933),i=e.i(277234),s=e.i(4244280),a=e.i(5338940);function l(e,t){if(0===t)return 0;let i=e/t*100;return i>99.5&&i<100?99:Math.round(i)}e.s(["useSpend",0,()=>{let{isReady:e,team:l}=(0,a.useTeam)(),n=(0,t.default)(()=>e&&l?`${s.API_TEAMS}/${l.id}/spend`:null,e=>(0,i.fetchAPI)(e,{throwOnHTTPError:!0}));return{...n,spend:n.data?.data??void 0}}],3216120),e.s(["calculateBudgetPercentage",()=>l],2032215);var n=e.i(8042625);async function r(e,t){return(0,i.fetchAPI)(`${s.API_BUDGETS}${(0,n.encode)({teamId:t})}`,{method:"POST",body:JSON.stringify(e),throwOnHTTPError:!0})}async function d(e,t){return(0,i.fetchAPI)(`${s.API_BUDGETS}/disable/${e}${(0,n.encode)({teamId:t})}`,{method:"POST",body:{},throwOnHTTPError:!0})}e.s(["createOrUpdateBudget",()=>r],4633529),e.s(["disableBudget",()=>d],345159)},7677717,e=>{"use strict";var t=e.i(8711407),i=e.i(5223937),s=e.i(3306538),a=e.i(5468328),l=e.i(4991687),n=e.i(6694387),r=e.i(8674454),d=e.i(8459493),o=e.i(8876434),c=e.i(6239252),u=e.i(7917902),m=e.i(7780974),x=e.i(1717203),g=e.i(7557283),h=e.i(9481787),p=e.i(4844919),f=e.i(1346287),j=e.i(1176592),b=e.i(2504781),y=e.i(3786881),v=e.i(4004502),N=e.i(119294),w=e.i(6352514),S=e.i(7812221),A=e.i(57106),C=e.i(8865193),I=e.i(9588822),E=e.i(6482217);e.i(6483798);var T=e.i(8287059),M=e.i(362928),k=e.i(6143247);function P(e){let{plan:i,className:s}=e;return(0,t.jsxs)("div",{className:(0,k.cn)("flex flex-row items-center justify-start gap-3 flex-initial",s),children:[(0,t.jsx)("span",{className:"text-copy-14 text-gray-900 geist-hide-on-mobile",children:"Custom needs?"}),(0,t.jsx)(A.ButtonLink,{"data-testid":(0,v.tid)("account-settings","billing","contact-sales"),href:S.CONTACT_SALES_DASHBOARD_HREF,onClick:()=>{N.analytics.track(w.AnalyticsEvent.BILLING_CONTACT_SALES_CLICKED,{plan:i})},size:"small",type:"secondary",children:"Contact Sales"})]})}let F=(0,j.memo)((0,I.withStripe)(function(e){let{billing:i,canUpdatePayment:s,canUpdateBillingPlan:a,teamId:l,shouldShowSwitchToNewProCta:n}=e,r=(0,T.useOpenUpgradeModal)(),{data:d}=(0,E.useStripeSources)({enabled:!0}),{trial:o,plan:c,status:u}=i,m="enterprise"===c,x="trialing"===u&&!d?.defaultSource,g=!m&&o;return(0,t.jsx)("div",{className:(0,k.cn)("flex flex-col items-stretch justify-start flex-initial rounded-b bg-background-200 px-6 py-3 mt-auto",n?"":"border-t border-gray-400"),children:function(){if((0,M.isPaymentOverdue)(i)&&!m)return(0,t.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4 flex-initial",children:[a?(0,t.jsx)(C.DowngradeFromProButton,{className:"w-full md:w-auto"}):null,s?(0,t.jsx)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial w-full md:w-auto",children:(0,t.jsx)(A.ButtonLink,{className:"flex-1 md:flex-auto",href:"invoices?status=open",size:"small",type:"error",children:"Pay Overdue Invoice"})}):null]});if(!a)return(0,t.jsx)("p",{className:"text-copy-14 text-gray-900 leading-8",children:"You need additional permissions to manage your team's plan."});if((0,M.isPlanExpired)(i))return(0,t.jsxs)("div",{className:"flex flex-row items-center justify-between gap-4 flex-initial",children:[(0,t.jsx)(A.Link,{href:"/pricing",variant:"highlight",children:"Learn more"}),(0,t.jsx)(b.Button,{onClick:()=>r({teamHint:l,source:"billing"}),size:"small",children:"Reactivate Plan"})]});if(x||g){let e=g?{disabledSteps:["team-members"],forceImmediateUpgrade:!0}:{};return(0,t.jsxs)("div",{className:"flex flex-row items-center justify-between gap-4 flex-initial",children:[n?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{})}):(0,t.jsxs)("div",{className:"flex flex-row items-start justify-start gap-2 flex-initial",children:[(0,t.jsx)(b.Button,{"data-testid":(0,v.tid)("account-settings","billing","upgrade"),onClick:()=>r({source:"billing",teamHint:l,...e}),size:"small",className:"geist-hide-on-mobile",children:"End Trial and Start Pro Plan"}),(0,t.jsx)(b.Button,{"data-testid":(0,v.tid)("account-settings","billing","upgrade"),onClick:()=>r({source:"billing",teamHint:l,...e}),size:"small",className:"geist-show-on-mobile",children:"Start Pro Plan"}),(0,t.jsx)(C.DowngradeFromProButton,{className:"geist-hide-on-mobile"})]}),(0,t.jsx)(P,{plan:c})]})}return"hobby"===c?(0,t.jsxs)("div",{className:"flex flex-row items-center justify-between gap-4 flex-initial",children:[(0,t.jsxs)("p",{className:"text-label-14",children:["Learn more about"," ",(0,t.jsx)(A.Link,{external:!0,href:"/pricing",variant:"highlight",children:"Pricing and Plans"})]}),(0,t.jsx)(b.Button,{"data-testid":(0,v.tid)("account-settings","billing","upgrade"),onClick:()=>r({teamHint:l,source:"billing"}),size:"small",children:"Upgrade"})]}):"pro"===c?(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-4 flex-initial",children:[(0,t.jsx)(C.DowngradeFromProButton,{}),(0,t.jsx)(P,{className:"ml-auto",plan:c})]}):(0,t.jsx)("div",{className:"flex flex-row items-center justify-start gap-4 flex-initial",children:(0,t.jsx)(A.ButtonLink,{href:"/help#issues",prefix:(0,t.jsx)(y.Headset,{}),size:"small",tab:!0,type:"secondary",children:"Contact Support"})})}()})}));var L=e.i(4605757),_=e.i(5669196);function O(e){let{creditLedgers:i,plan:s,owner:a,invoice:l,teamSlug:n,canUpdateBillingPlan:r,isEmptyState:d=!1,isEntMiuFlexibleCommitEnabled:o}=e,c=i.length>1,u=a?.billing?.plan==="enterprise"&&o?(0,t.jsx)(_.CreditLedgersEnt,{creditLedgers:i,owner:a,invoice:l,teamSlug:n,isEmptyState:d}):a?.billing?.planIteration==="plus"?(0,t.jsx)(_.CreditLedgers,{creditLedgers:i,owner:a,invoice:l,teamSlug:n,canUpdateBillingPlan:r,isEmptyState:d}):(0,t.jsx)(_.CreditLedgersLegacyPro,{creditLedgers:i,owner:a});return c?(0,t.jsx)(L.ExpandableSection,{closedHeight:160,trackingAction:m.VercelActivityAction.BillingOverviewShowAllClicked,trackingMeta:{plan:s,section:"upcoming-commitments"},children:u}):u}e.i(4726513);var B=e.i(6222316);let U=(0,t.jsx)("span",{className:"inline-flex relative -top-0.5",children:(0,t.jsx)(s.Badge,{size:"md",variant:"blue",children:"Pro"})});function D(e){let{teamId:i,billing:s}=e,a=(0,T.useOpenUpgradeModal)(),l=s?.status==="trialing"&&s.trial&&s.trial.end>Date.now(),n=!l,r=(0,M.nextBillingCycleStartDateForLegacyPro)(s),d=s?.plusMigrationEnabled&&r;(0,B.useSwitchToNewProPreview)({switchToNewPro:n,teamId:i});let o=l?{title:"Pro is changing",description:"Complete your trial to get $20 in credit towards usage, free viewer seats, and enterprise add-ons.",buttonText:"End Trial and Start Pro plan"}:d?{title:(0,t.jsxs)(t.Fragment,{children:["Your team will switch to the new ",U," plan soon"]}),description:(0,t.jsxs)(t.Fragment,{children:["When your next billing period begins on"," ",(0,t.jsx)("span",{className:"font-medium",children:r}),", your team will switch to the new Pro plan."]}),buttonText:"Review & Switch Now"}:{title:(0,t.jsxs)(t.Fragment,{children:["Switch to the new ",U," plan today"]}),description:"Get early access to a credit-based usage model, additional add-ons, and free viewer seats.",buttonText:"Review & Switch"};return(0,t.jsxs)("div",{className:"flex w-full flex-1 -mt-4 py-4 px-6 flex-col justify-center isolate items-center gap-4 overflow-hidden border-b border-gray-alpha-400",children:[(0,t.jsxs)("div",{className:"flex flex-col max-w-2xl items-center w-full gap-2 z-[1]",children:[(0,t.jsx)("h3",{className:(0,k.cn)("text-label-16 font-medium text-center",{"text-balance":d}),children:o.title}),(0,t.jsxs)("p",{className:(0,k.cn)("text-copy-14 text-center text-gray-alpha-900",{"text-balance":d}),children:[o.description,(0,t.jsx)("br",{}),d?(0,t.jsx)(t.Fragment,{children:"You can also switch now. "}):null,(0,t.jsx)(A.Link,{external:!0,tab:!0,href:"https://vercel.com/pricing",variant:"highlight",children:d?(0,t.jsx)(t.Fragment,{children:"Learn more"}):(0,t.jsx)(t.Fragment,{children:"Learn more about the new pricing model"})})]})]}),(0,t.jsxs)("div",{className:"isolate relative flex items-center justify-center [--status-badge-background-gradient:radial-gradient(50%_50%_at_50%_50%,var(--ds-background-100)_49.5%,var(--ds-blue-100)_100%)]",children:[(0,t.jsx)(b.Button,{className:(0,k.cn)("z-[1]",{"min-w-[168px]":!d,"min-w-[180px]":d}),type:"secondary",size:"small",shape:"rounded",onClick:()=>{a({source:"billing",switchToNewPro:n,teamHint:i,disabledSteps:["team-members"],forceImmediateUpgrade:!!l})},children:o.buttonText}),(0,t.jsx)("div",{className:"absolute size-[592px] rounded-full border border-solid [background:var(--status-badge-background-gradient)] p-6 opacity-35 box-content"}),(0,t.jsx)("div",{className:"absolute size-[432px] rounded-full border border-solid [background:var(--status-badge-background-gradient)] p-6 opacity-35 box-content"}),(0,t.jsx)("div",{className:"absolute size-[208px] rounded-full border border-solid [background:var(--status-badge-background-gradient)] p-6 opacity-35 box-content"})]})]})}var R=e.i(4787360),$=e.i(2689376),z=e.i(5255926),G=e.i(3228096),V=e.i(7171047),W=e.i(509783),H=e.i(2854814),Y=e.i(3216120),q=e.i(2466450),Z=e.i(2032215);function K(e){let{isEmptyState:i=!1}=e,{activeBudget:l,isLoading:n}=(0,H.useActiveBudget)(),{spend:r,isLoading:d}=(0,Y.useSpend)(),o=r?r.currentSpend/100:0,c=l?.fixedBudget||0,u=(0,Z.calculateBudgetPercentage)(o,c),m={100:"var(--ds-red-800)",75:"var(--ds-amber-700)",0:"var(--ds-green-700)"},x=e=>e>=100?"bg-red-100":e>=75?"bg-amber-100":"bg-green-100";return n?(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-4 flex-initial",children:[(0,t.jsx)("div",{className:`flex size-8 items-center justify-center rounded-full border border-gray-alpha-400 ${x(0)}`,children:(0,t.jsx)($.Gauge,{colors:m,size:"tiny",value:0})}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-0 flex-initial",children:[(0,t.jsx)("p",{className:"text-label-13 text-gray-900",children:"On-Demand Budget"}),(0,t.jsx)(z.Skeleton,{height:20,width:100})]})]}):(0,t.jsxs)("div",{className:"flex flex-row items-center justify-between flex-initial w-full",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-4 flex-initial",children:[(0,t.jsx)("div",{className:`flex size-8 items-center justify-center rounded-full border border-gray-alpha-400 ${i?"bg-gray-100":x(u)}`,children:(0,t.jsx)($.Gauge,{colors:m,size:"tiny",value:i?0:u})}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-0 flex-initial",children:[(0,t.jsx)("p",{className:"text-label-13 text-gray-900",children:"On-Demand Budget"}),d?(0,t.jsx)(z.Skeleton,{height:20,width:100}):(0,t.jsx)(t.Fragment,{children:l||i?(0,t.jsx)("p",{className:`text-label-14 font-medium ${i?"text-gray-700":void 0}`,children:i?"••• / •••":`${(0,q.formatCurrency)(100*o)} / ${(0,q.formatCurrency)(100*c)} (${u}%)`}):(0,t.jsx)("p",{className:"text-label-14 font-medium",children:"Disabled"})})]})]}),(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-1 flex-initial geist-hide-on-mobile",children:[l&&(0,t.jsx)(a.Tooltip,{text:"Notifications enabled (web, email, and SMS)",children:(0,t.jsxs)(s.Badge,{variant:"pill",children:[(0,t.jsx)(V.Bell,{color:"gray-900"}),(0,t.jsx)("p",{className:"text-label-12 font-medium",children:"Notifications"})]})}),l?.webhookId&&(0,t.jsx)(a.Tooltip,{text:"Triggers webhook at 50%, 75%, and 100% of budget",children:(0,t.jsxs)(s.Badge,{variant:"pill",children:[(0,t.jsx)(W.Webhook,{color:"gray-900"})," ",(0,t.jsx)("p",{className:"text-label-12 font-medium",children:"Webhook"})]})}),l?.pauseProjects&&(0,t.jsx)(a.Tooltip,{text:"Pauses production deployments when budget reached",children:(0,t.jsxs)(s.Badge,{variant:"pill",children:[(0,t.jsx)(G.Globe,{color:"gray-900"})," ",(0,t.jsx)("p",{className:"text-label-12 font-medium",children:"Pause"})]})})]})]})}var J=e.i(1906681),X=e.i(9318197),Q=e.i(3500331),ee=e.i(6192817),et=e.i(6292193),ei=e.i(263599),es=e.i(2988836),ea=e.i(979715),el=e.i(4712634),en=e.i(9722978);let er={100:"var(--ds-red-800)",75:"var(--ds-amber-700)",0:"var(--ds-blue-700)"};function ed(e){let{dollarAmount:i,dataTestId:s,externalLinkPath:l,gaugeValue:n,title:r,type:d,align:o}=e;return(0,t.jsx)(ea.EntityField,{"data-testid":(0,v.tid)("spend-management",`${s}`),className:"right"===o?"no-top-border":"",children:(0,t.jsxs)("div",{className:(0,en.default)("flex flex-row items-stretch flex-initial","left"===o?"justify-start":"justify-end"),children:["left"===o&&(0,t.jsx)(el.EntityThumbnail,{size:24,children:(0,t.jsx)($.Gauge,{colors:er,size:"small",value:n})}),(0,t.jsxs)("div",{className:(0,en.default)("flex flex-col justify-start gap-1 flex-initial p-4","left"===o?"items-start":"items-end"),children:[(0,t.jsx)("p",{className:"text-label-13 text-gray-900",children:r}),"3-month-avg"===d&&null===i?(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-1 flex-initial",children:[(0,t.jsx)("p",{className:"text-label-14",children:"‒"}),(0,t.jsx)(a.Tooltip,{delay:!1,padding:"6px 12px",position:"bottom",text:"Insufficient historical usage data",children:(0,t.jsx)(es.InformationFillSmall,{})})]}):(0,t.jsx)(A.Link,{external:!0,href:l,children:(0,t.jsx)("p",{className:"text-label-14 font-medium",children:(0,q.formatCurrency)((i??0)*100)})})]}),"right"===o&&(0,t.jsx)(el.EntityThumbnail,{size:24,children:(0,t.jsx)($.Gauge,{colors:er,size:"small",value:n})})]})})}var eo=e.i(4030453),ec=e.i(5063443),eu=e.i(455575),em=e.i(5338940),ex=e.i(588428),eg=e.i(4633529),eh=e.i(3807412),ep=e.i(345159),ef=e.i(6872861),ej=e.i(5807088),eb=e.i(8761240),ey=e.i(4585051),ev=e.i(6891161);function eN(e){let{active:i,budgetAmount:s,save:a,hide:l,pauseProjects:n,webhookConfigured:r,willTriggerImmediately:d,isDisabling:o=!1}=e,{team:c}=(0,em.useTeam)(),u=c?.name??"",m=c?.id??"",x=(0,j.useMemo)(()=>{let e=["Notifications are sent to team owner and billing members."];return r&&e.unshift("A webhook is triggered."),n&&e.unshift("All deployments are paused."),e},[n,r]),[g,h]=(0,j.useState)(!1),p=(0,j.useMemo)(()=>o?(0,t.jsxs)(t.Fragment,{children:["Continuing will"," ",(0,t.jsx)("strong",{style:{fontWeight:500},children:"disable Spend Management"})," ","for the"," ",(0,t.jsxs)("span",{children:[(0,t.jsx)(ey.Avatar,{size:20,style:{verticalAlign:"top"},teamId:m,title:u})," ",(0,t.jsx)("strong",{style:{fontWeight:500},children:u})]})," ","team. This will remove all budget limits and stop the following automated actions:"]}):d?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("strong",{style:{fontWeight:500},children:["Your current spend exceeds $",s]}),". Continuing will immediately cause the following actions on the"," ",(0,t.jsxs)("span",{children:[(0,t.jsx)(ey.Avatar,{size:20,style:{verticalAlign:"top"},teamId:m,title:u})," ",(0,t.jsx)("strong",{style:{fontWeight:500},children:u})]})," ","team:"]}):(0,t.jsxs)(t.Fragment,{children:["Continuing will set a spend amount of"," ",(0,t.jsx)("strong",{style:{fontWeight:500},children:(0,q.formatCurrency)(100*s)})," ","for all projects in the"," ",(0,t.jsxs)("span",{children:[(0,t.jsx)(ey.Avatar,{size:20,style:{verticalAlign:"top"},teamId:m,title:u})," ",(0,t.jsx)("strong",{style:{fontWeight:500},children:u})]})," ","team. If the amount is reached within a billing cycle the following actions will take place:"]}),[o,d,s,m,u]),f=(0,j.useCallback)(async e=>{e.preventDefault(),h(!0);try{await a()}catch(e){l()}finally{h(!1)}},[a,l,h]);return(0,t.jsx)(ev.Modal.Modal,{active:i,onClickOutside:l,children:(0,t.jsxs)("form",{"data-testid":(0,v.tid)("spend-management","trigger-modal"),onSubmit:f,children:[(0,t.jsxs)(ev.Modal.Body,{children:[(0,t.jsx)(ev.Modal.Header,{children:(0,t.jsx)(ev.Modal.Title,{children:"Spend Management"})}),p,(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial my-4",children:x.map(e=>(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-4 flex-initial",children:[(0,t.jsx)(eb.CheckCircleFill,{size:22}),(0,t.jsx)("p",{className:"text-copy-14",children:e})]},e))}),(0,t.jsx)(ev.Modal.Inset,{last:!0,children:(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-6 flex-initial",children:(0,t.jsx)("label",{children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:[(0,t.jsxs)("p",{className:"text-copy-14 text-gray-900",children:["Enter the team name"," ",(0,t.jsx)("strong",{style:{fontWeight:500,overflowWrap:"anywhere"},children:u})," ","to continue:"]}),(0,t.jsx)(Q.Input,{"aria-label":"Team Name","data-testid":(0,v.tid)("spend-management","confirm-input"),disabled:g,name:"teamName",pattern:`\\s*${u}\\s*`,required:!0})]})})})})]}),(0,t.jsxs)(ev.Modal.Actions,{children:[(0,t.jsx)(ev.Modal.Action,{"data-testid":(0,v.tid)("spend-management","cancel-confirm-button"),onClick:l,type:"secondary",children:"Cancel"}),(0,t.jsx)(ev.Modal.Action,{buttonType:"submit","data-testid":(0,v.tid)("spend-management","continue-button"),disabled:g,loading:g,type:"error",children:o?"Disable Spend Management":"Continue"})]})]})})}function ew(){let{isReady:e,team:i}=(0,em.useTeam)(),{isReady:s,value:a}=(0,ex.usePauseTeamProjectsFlag)(),{isLoading:l}=(0,x.default)(),{activeBudget:n,isLoading:r,mutate:d}=(0,H.useActiveBudget)(),{webhookUrl:o,isLoading:c}=(0,eh.useBudgetWebhookUrl)(),{spend:u,isLoading:m}=(0,Y.useSpend)();return e||l||r||c||s||m?i?(0,t.jsx)(eS,{budget:n,showPauseProjectsToggle:a??!1,spend:u,team:i,webhookUrl:o,mutateBudget:d}):null:(0,t.jsx)(ej.default,{height:108})}function eS(e){let{budget:i,team:s,webhookUrl:a,showPauseProjectsToggle:l,spend:n,mutateBudget:r}=e,{can:d}=(0,x.default)(),[o,c]=(0,j.useState)(null),[u,m]=(0,j.useState)(!1),[h,p]=(0,j.useState)(!1),[f,y]=(0,j.useState)(null),{spendManagementEnabled:S,setSpendManagementEnabled:A,budgetAmount:C,setBudgetAmount:I,webhook:E,setWebhook:T,hasUpdatedBudget:M,setHasUpdatedBudget:k,pauseProjects:P,setPauseProjects:F,currentMonthSpend:L,prevMonthSpend:_,threeMonthAvgSpend:O,updateOriginalValues:B}=function(e,t,i){let[s,a]=(0,j.useState)(()=>e?.isActive??!1),[l,n]=(0,j.useState)(()=>e?.fixedBudget??0),[r,d]=(0,j.useState)(()=>i||""),[o,c]=(0,j.useState)(!1),[u,m]=(0,j.useState)(()=>e?.pauseProjects??!0),[x,g]=(0,j.useState)(0),[h,p]=(0,j.useState)(0),[f,b]=(0,j.useState)(null),[y,v]=(0,j.useState)(()=>({spendManagementEnabled:e?.isActive??!1,budgetAmount:e?.fixedBudget??0,webhook:i??"",pauseProjects:e?.pauseProjects??!0})),N=(0,j.useCallback)(()=>{c(s!==y.spendManagementEnabled||l!==y.budgetAmount||r!==y.webhook||u!==y.pauseProjects)},[s,l,r,u,y]);(0,j.useEffect)(()=>{if(e){let t=e.fixedBudget,i=e.pauseProjects??!1;a(!0),n(t),m(i),v(e=>({...e,spendManagementEnabled:!0,budgetAmount:t,pauseProjects:i}))}else v(e=>({...e,spendManagementEnabled:!1,budgetAmount:0,pauseProjects:!0}))},[e]),(0,j.useEffect)(()=>{if(!t)return;let{currentSpend:e,avgSpend:i,prevMonthSpend:s}=t;g(e/100),null!==i&&i>=0&&b(Math.ceil(i/100)),s>0&&p(s/100)},[t]),(0,j.useEffect)(()=>{let e=i||"";d(e),v(t=>({...t,webhook:e}))},[i]),(0,j.useEffect)(()=>{s||e||(n(0),d(""))},[s,e]),(0,j.useEffect)(()=>{N()},[N]);let w=(0,j.useCallback)(()=>{v({spendManagementEnabled:s,budgetAmount:l,webhook:r,pauseProjects:u}),c(!1)},[s,l,r,u]);return{spendManagementEnabled:s,setSpendManagementEnabled:a,budgetAmount:l,setBudgetAmount:n,webhook:r,setWebhook:d,hasUpdatedBudget:o,setHasUpdatedBudget:c,pauseProjects:u,setPauseProjects:m,currentMonthSpend:x,prevMonthSpend:h,threeMonthAvgSpend:f,updateOriginalValues:w}}(i,n,a),U=d(g.Action.Update,g.Resource.Budget),D=(0,eu.useToasts)(),R=(0,j.useCallback)(async()=>{if(i?.id){try{await (0,ep.disableBudget)(i.id,s.id),await r(),D.success("Your Spend Management settings have been turned off.")}catch(e){c(e)}p(!1)}},[i,s.id,D,r]),$=(0,j.useCallback)(e=>0===e?{message:"Must have a spend amount set.",name:"spend_invalid"}:e<0?{message:"Must have positive spend amount.",name:"spend_invalid"}:e>1e6?{message:"Budget too high",name:"budget_invalid"}:null,[]),z=(0,j.useCallback)(async()=>{p(!0),c(null);try{let e=$(C);if(e)return void c(e);let t=await (0,eg.createOrUpdateBudget)({webhookUrl:E,type:"fixed",fixedBudget:C,pauseProjects:P},s.id);t.webhookSecret&&y(t.webhookSecret),await r(),D.success("Your Spend Management settings have been updated.")}catch(e){c(e)}finally{p(!1)}},[C,s.id,D,E,P,$,r]),G=(0,j.useCallback)(async()=>{M&&(p(!0),S?(await z(),B(),N.analytics.track(w.AnalyticsEvent.SPEND_MANAGEMENT_TOGGLE,{enabled:!0,teamId:s.id})):(await R(),I(0),T(""),B(),N.analytics.track(w.AnalyticsEvent.SPEND_MANAGEMENT_TOGGLE,{enabled:!1,teamId:s.id})))},[M,S,z,s.id,R,I,B,T]),V=C-L;return(0,t.jsxs)("div",{className:"m-4 mt-0","data-testid":(0,v.tid)("spend-management","budget-body-content"),children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial",children:[(0,t.jsx)(eC,{budgetAmount:C,canUpdateSpendManagement:U,currentMonthSpend:L,handleSetBudgetAmount:I,handleSetPauseProjects:F,handleSetWebhook:T,handleSetSpendManagementEnabled:A,pauseProjects:P,percentageBudgetUsed:(0,Z.calculateBudgetPercentage)(L,C),prevMonthSpend:_,showPauseProjectsToggle:l,spendManagementEnabled:S,teamSlug:s.slug,threeMonthAvgSpend:O,webhook:E}),o?.message&&(0,t.jsx)("div",{"data-testid":(0,v.tid)("spend-management","error-message"),className:"flex flex-col items-stretch justify-start flex-initial p-3 bg-red-50 border border-red-200 rounded-md",children:(0,t.jsx)(ec.ErrorText,{children:(0,t.jsx)(eo.Error,{error:o})})}),(0,t.jsxs)("div",{className:"flex flex-row items-center justify-between flex-initial",children:[(0,t.jsx)(b.Button,{Component:"a",href:`/${s.slug}/~/settings/notifications`,size:"small",type:"secondary","data-testid":(0,v.tid)("spend-management","manage-notifications-button"),children:"Manage Notifications"}),(0,t.jsx)(b.Button,{"data-testid":(0,v.tid)("spend-management","save-button"),disabled:!U||!M,loading:h,onClick:()=>m(!0),size:"small",children:h?"Saving":"Save"})]})]}),(0,t.jsx)(eN,{active:u,budgetAmount:C,hide:()=>{p(!1),m(!1)},isDisabling:!S&&!!i,pauseProjects:P,save:async()=>{await G(),m(!1)},webhookConfigured:E.length>0,willTriggerImmediately:V<=0}),f?(0,t.jsx)(ef.FormAddWebhookModal,{onClose:()=>y(null),webhook:{secret:f}}):null]})}function eA(e){let{disabled:i,onChange:s,value:a,"data-testid":l}=e;return(0,t.jsxs)("label",{style:{cursor:"pointer"},children:[(0,t.jsx)(X.Spacer,{inline:!0,x:.5}),(0,t.jsx)(J.Toggle,{checked:a,disabled:i,onChange:function(){s(!a)},...l&&{"data-testid":l}})]})}function eC(e){let{budgetAmount:i,canUpdateSpendManagement:s,handleSetBudgetAmount:a,handleSetPauseProjects:l,handleSetWebhook:n,handleSetSpendManagementEnabled:r,pauseProjects:d,prevMonthSpend:o,showPauseProjectsToggle:c,spendManagementEnabled:u,teamSlug:m,threeMonthAvgSpend:x,webhook:g}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:(0,en.default)("flex flex-row items-stretch justify-between gap-4 flex-initial",ei.default.budgetAmountStack),children:[(0,t.jsx)(ed,{dataTestId:"previous-billing-cycle",dollarAmount:o,externalLinkPath:`/${m}/~/usage?range=previous-billing-cycle`,gaugeValue:i&&o?o/i*100:0,title:"Previous Cycle",align:"left"}),(0,t.jsx)(ed,{dataTestId:"average-monthly-spend",dollarAmount:x,externalLinkPath:`/${m}/~/usage?range=last-3-months`,gaugeValue:x&&i?x/i*100:0,title:"3 Month Average",type:"3-month-avg",align:"right"})]}),(0,t.jsxs)("div",{className:(0,en.default)("flex flex-col items-stretch justify-start gap-4 flex-initial pb-4",ei.default.budgetAmountStack),children:[(0,t.jsxs)("div",{className:"flex flex-row items-center justify-between flex-initial",children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-1 flex-initial pr-4",children:[(0,t.jsx)("p",{className:"text-label-14 font-medium",children:"On-Demand Budget"}),(0,t.jsxs)("p",{className:"text-label-14 text-gray-900",children:["Set the on-demand budget towards"," ",(0,t.jsx)(A.Link,{href:"/docs/spend-management#what-does-spend-management-include",variant:"highlight",children:"metered resources"})," ","to trigger notifications, pause production deployments, and trigger a webhook if the amount is reached within the current billing cycle. Learn more about"," ",(0,t.jsx)(A.Link,{external:!0,href:"/docs/spend-management",onClick:()=>N.analytics.track(w.AnalyticsEvent.SPEND_MANAGEMENT),variant:"highlight",children:"Spend Management"}),"."]})]}),(0,t.jsx)(J.Toggle,{checked:u,"data-testid":(0,v.tid)("spend-management","enable-toggle"),disabled:!s,onChange:()=>{r(!u)}})]}),(0,t.jsx)(ee.CurrencyInput,{"aria-label":"Spend Amount",currency:"usd","data-testid":(0,v.tid)("spend-management","amount-input-field"),disabled:!s||!u,onChange:e=>{a(e?e/100:0)},placeholder:0,requireWholeNumbers:!0,required:!0,size:"small",value:100*i})]}),c?(0,t.jsxs)("div",{className:(0,en.default)("flex flex-row items-center justify-between flex-initial pb-4",ei.default.budgetAmountStack),children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-1 flex-initial",children:[(0,t.jsx)("p",{className:"text-label-14 font-medium",children:"Pause Production Deployments"}),(0,t.jsx)("p",{className:"text-label-14 text-gray-900",children:"Pause production deployments for all projects on this team, making them unavailable to visitors."})]}),(0,t.jsx)(eA,{disabled:!s||!u,onChange:l,value:d,"data-testid":(0,v.tid)("spend-management","pause-projects-toggle")})]}):null,(0,t.jsxs)("div",{className:(0,en.default)("flex flex-col items-stretch justify-start gap-4 flex-initial pb-4",ei.default.budgetAmountStack),children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-1 flex-initial",children:[(0,t.jsx)("p",{className:"text-label-14 font-medium",children:"Webhook"}),(0,t.jsxs)("p",{className:"text-label-14 text-gray-900",id:"spend-management-webhook-input",children:["Set a webhook URL to receive a ",(0,t.jsx)(et.InlineCode,{children:"POST"})," request when the budgeted amount is reached. A request will also be sent at the end of each billing cycle, which can be used to resume paused projects."]})]}),(0,t.jsx)(Q.Input,{"aria-labelledby":"spend-management-webhook-input","data-testid":(0,v.tid)("spend-management","webhook-input-field"),disabled:!s||!u,onChange:e=>{n(e.target.value)},placeholder:"https://my-app.com/webhooks",size:"small",value:g,width:"100%"})]})]})}var eI=e.i(7807066);function eE(e){let{preview:i,body:s,defaultExpanded:a=!1,toggleText:l="Configure",className:n="",isEmptyState:r=!1}=e,[d,o]=(0,j.useState)(a),c=()=>{r||o(!d)};return(0,t.jsxs)("div",{className:(0,en.default)("flex flex-col items-stretch justify-start flex-initial border border-gray-400 rounded-md bg-background-200",n),children:[(0,t.jsxs)("div",{onClick:c,onKeyDown:e=>{r||"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),c())},tabIndex:r?-1:0,role:"button","aria-expanded":d,"aria-disabled":r,className:(0,en.default)("flex flex-row items-center justify-between flex-initial p-4 bg-white",r?"cursor-not-allowed":"cursor-pointer",d?"rounded-t-md":"rounded-md"),children:[(0,t.jsx)("div",{className:"flex-1",children:i}),(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-3 flex-initial ml-4 mr-2",children:[(0,t.jsx)("p",{className:`text-label-14 font-medium geist-hide-on-mobile ${r?"text-gray-600":""}`,children:l}),(0,t.jsx)(eI.ChevronRight,{color:r?"gray-600":"gray-900",className:`transition-transform duration-200 ${d?"rotate-90":""}`})]})]}),d&&(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-initial border-t border-gray-alpha-400 bg-gray-50",children:s})]})}function eT(e){let{isEmptyState:i=!1}=e;return(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-3 flex-initial p-6 pt-0",children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-1 flex-initial",children:[(0,t.jsx)("p",{className:"text-heading-16",id:"spend-management",children:(0,t.jsx)(c.SearchContextHighlighter,{children:R.PERSONAL_ACCOUNT_SETTINGS_NAVIGATION_TITLES.billing.spendManagement})}),(0,t.jsx)("p",{className:"text-copy-14 text-gray-1000",children:"Manage your budget for on-demand charges once the included credit is spent, billed at the end of each cycle."})]}),(0,t.jsx)(eE,{preview:(0,t.jsx)(K,{isEmptyState:i}),body:(0,t.jsx)(ew,{}),defaultExpanded:!1,toggleText:"Configure",isEmptyState:i})]})}var eM=e.i(8522580),ek=e.i(9889563),eP=e.i(4177906),eF=e.i(5484396),eL=e.i(2231848),e_=e.i(1272130),eO=e.i(6677203);function eB(e){let{invoice:i,owner:s,teamSlug:a,canReadInvoice:l}=e,n=(0,h.getDashboardHref)("/~/settings/invoices/upcoming",a),r=i&&(0,eP.filterInvoiceItems)(i).length>0,d=s?.billing?.plan==="enterprise",o=i?.lineItems.reduce((e,t)=>{let i=e;return t?.consumption&&t?.group==="managed-infra"&&Number(t.consumption.onDemand)>0&&(i+=Number(t.consumption.onDemand)),i},0);return(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-3 flex-initial p-6 pt-0 pb-4",children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-1 flex-initial pb-0",children:[(0,t.jsx)("p",{className:"text-heading-16",children:"Usage"}),(0,t.jsx)("p",{className:"text-label-14",children:s?.billing?.plan==="pro"?"Additional usage of on-demand resources in the current billing cycle.":"Usage of metered resources beyond your commitment."}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start flex-initial border border-gray-400 rounded-md bg-background-200 mt-2",children:[(0,t.jsx)("div",{className:(0,en.default)("flex flex-col items-stretch justify-start gap-2 flex-initial p-4 rounded-md bg-white",d?"":"rounded-b-none border-b border-gray-400"),children:(0,t.jsxs)("div",{className:"flex flex-row items-center justify-between gap-2 flex-initial",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-4 flex-initial",children:[(0,t.jsx)("div",{className:"flex size-8 items-center justify-center rounded-full border border-gray-alpha-400 bg-gray-100",children:(0,t.jsx)(ek.Dollar,{})}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-0 flex-initial",children:[(0,t.jsx)("p",{className:"text-label-13 text-gray-800",children:s?.billing?.plan==="pro"?"":"On-demand Charges"}),(0,eP.isReseller)(s)?(0,t.jsx)(eL.ResellerBillingNote,{}):l?r?(0,t.jsxs)("div",{className:"flex flex-row items-center justify-between gap-6 md:gap-2 flex-initial",children:[(0,t.jsx)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:(0,t.jsx)("p",{className:"text-label-14 font-medium",children:(0,eP.formatInvoiceCurrency)((o??0).toString(),i.currency)})}),(0,t.jsx)("div",{className:"flex flex-row items-center justify-start gap-4 flex-initial",children:(0,t.jsx)("p",{className:"text-copy-14 text-gray-900 geist-hide-on-mobile",children:(0,eP.formatPaymentByline)(i)})})]}):(0,t.jsxs)("div",{className:"flex flex-row flex-wrap items-center justify-start gap-2 flex-initial min-h-[40px] text-gray-900",children:[(0,t.jsx)(eb.CheckCircleFill,{}),(0,t.jsx)("span",{className:"text-label-14 font-medium text-gray-900",children:"No on-demand charges"})]}):(0,t.jsx)("div",{className:"flex flex-row items-center justify-between gap-6 md:gap-2 flex-initial",children:(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:[(0,t.jsx)("p",{className:"text-label-14 font-medium",children:"Total Due"}),(0,t.jsx)(z.Skeleton,{animated:!1,boxHeight:24,className:"bg-gray-400 !bg-none",height:16,vcenter:!0,width:50})]})})]})]}),(0,t.jsx)("div",{className:"flex flex-row items-stretch justify-start gap-3 flex-initial",children:s?.billing?.plan!=="pro"?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f.ButtonWithTracking,{plan:s?.billing?.plan??"enterprise",event:m.VercelActivityAction.BillingOverviewViewUsageClicked,size:"small",type:"secondary",href:n,className:"geist-hide-on-mobile",children:"Upcoming Invoice"}),(0,t.jsx)(f.ButtonWithTracking,{plan:s?.billing?.plan??"enterprise",event:m.VercelActivityAction.BillingOverviewViewUsageClicked,size:"small",type:"secondary",href:n,className:"geist-show-on-mobile",children:"Details"})]}):null})]})}),i&&s?.billing?.plan==="pro"?(0,t.jsx)(e_.UpcomingCharges,{invoice:i,owner:s,teamSlug:a}):null]})]}),l&&(0,eO.isAwsMarketplaceCustomer)(s)?(0,t.jsx)(eF.default,{children:(0,t.jsxs)(eM.Note,{fill:!0,type:"secondary",children:["To view and manage your billing please visit your"," ",(0,t.jsx)(A.Link,{external:!0,href:"https://us-east-1.console.aws.amazon.com/marketplace/home",variant:"highlight",children:"AWS Marketplace console"}),"."]})}):null]})}var eU=e.i(4141852),eD=e.i(8617276),eR=e.i(9036684),e$=e.i(7219512),ez=e.i(1933683),eG=e.i(9658738),eV=e.i(6107899),eW=e.i(6347389),eH=e.i(5585544),eY=e.i(7586244);let eq=[{icon:eW.Coins,title:"Flexible usage credit",titleShort:"Flexible credit",valueShort:"$20 /mo",valueMedium:"$20 /mo included",valueLong:"$20 /month included",noCheck:!0},{icon:eR.ArrowLeftRight,title:"Fast Data Transfer",valueShort:"1 TB /mo",valueMedium:"1 TB /mo included",valueLong:"1 TB /month included",noCheck:!0},{icon:G.Globe,title:"Edge Requests",valueShort:"10M /mo",valueMedium:"10M /mo included",valueLong:"10M /month included",noCheck:!0},{icon:eH.Users,title:"Team Collaboration"},{icon:eV.PreviewEye,title:"Free Viewer Seats"},{icon:e$.GlobeBox,title:"Global CDN"},{icon:ez.Eye,title:"Observability tools"},{icon:eU.FirewallFlame,title:"Advanced WAF Protection"},{icon:eG.Gauge,title:"Enhanced build machines"},{icon:eD.Servers,title:"On-demand concurrent builds"},{icon:eY.Store,title:"Enterprise-grade paid add-ons"},{icon:ek.Dollar,title:"Spend Management"}];function eZ(e){let{offering:i}=e;return(0,t.jsxs)("li",{className:"flex flex-row w-full h-9 items-center text-left rounded-sm [:where(&:nth-child(odd))]:bg-[--accents-1] p-2 @container",children:[(0,t.jsx)(i.icon,{color:"gray-900"}),(0,t.jsxs)("span",{className:"flex-1 text-copy-14 text-gray-1000 font-medium ml-2 @xs:mr-2",children:[(0,t.jsx)("span",{className:"hidden @2xs:inline",children:i.title}),(0,t.jsx)("span",{className:"@2xs:hidden",children:i.titleShort?i.titleShort:i.title})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[i.valueShort&&(0,t.jsx)("p",{className:"text-label-12 font-medium text-blue-900 @2xs:hidden",children:i.valueShort}),i.valueMedium&&(0,t.jsx)("p",{className:"text-label-12 font-medium text-blue-900 hidden @2xs:block @xs:hidden",children:i.valueMedium}),i.valueLong&&(0,t.jsx)("p",{className:"text-label-12 font-medium text-blue-900 hidden @xs:block",children:i.valueLong}),i.noCheck?null:(0,t.jsx)("div",{className:"hidden @3xs:flex",children:(0,t.jsx)(eb.CheckCircleFill,{color:"blue-900"})})]})]},i.title)}function eK(){return(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-initial min-h-[166px] p-2 pb-0",children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-start gap-2 flex-initial rounded p-4 text-center py-0",children:[(0,t.jsx)(s.Badge,{variant:"blue",children:"Pro"}),(0,t.jsx)("p",{className:"text-heading-16",children:"Upgrade to Pro"}),(0,t.jsx)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial pb-6 text-balance",children:(0,t.jsxs)("p",{className:"text-label-14",children:["Your plan includes a fixed amount of free usage. Unlock on-demand usage, collaboration, and faster builds."," ",(0,t.jsx)("br",{className:"hidden xl:block"}),"Get started with $20 in credit."]})}),(0,t.jsx)("div",{className:"w-full geist-hide-on-mobile",children:(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-between gap-2 flex-initial w-full mb-4 min-[640px]:gap-4",children:[(0,t.jsx)("ul",{className:"flex flex-col w-1/2",children:eq.slice(0,Math.ceil(eq.length/2)).map(e=>(0,t.jsx)(eZ,{offering:e},e.title))}),(0,t.jsx)("ul",{className:"flex flex-col w-1/2",children:eq.slice(Math.ceil(eq.length/2)).map(e=>(0,t.jsx)(eZ,{offering:e},e.title))})]})}),(0,t.jsx)("div",{className:"w-full geist-show-on-mobile",children:(0,t.jsx)("div",{className:"flex flex-row items-stretch justify-between gap-4 flex-initial w-full mb-4",children:(0,t.jsx)("ul",{className:"flex flex-col w-full",children:eq.map(e=>(0,t.jsx)(eZ,{offering:e},e.title))})})})]})})}var eJ=e.i(8839991),eX=e.i(1875382),eQ=e.i(7837522);function e0(e){let{children:i,trackingAction:s,href:a,plan:l,planIteration:n}=e,{track:r}=(0,eQ.useTrackActivity)(),d=(0,eX.useRouter)();return(0,t.jsx)(A.Link,{href:a,style:{textDecoration:"none",color:"inherit"},onClick:e=>{e.preventDefault(),r(s,{plan:l,planIteration:n}),d.push(a)},children:i})}function e1(e){let{teamSlug:a,upcomingCommitmentUsage:l,invoice:n,isEntMiuFlexibleCommitEnabled:r,...d}=e,{account:o,isLoading:m}=(0,u.useAccount)(),{can:f,isLoading:j}=(0,x.default)(),b=j?d.canReadInvoice:f(g.Action.Read,g.Resource.BillingInvoice),y=j?d.canUpdatePayment:f(g.Action.Update,g.Resource.PaymentMethod),v=j?d.canUpdateBillingPlan:f(g.Action.Update,g.Resource.BillingPlan),N=m?d.owner:o,w=N?.billing,S=N?.billing?.status,A=w?.plan??d.plan,C=w?.planIteration,I=(0,h.getDashboardHref)("/~/settings/invoices",a),E=(0,h.getDashboardHref)("/~/usage",a),T="pro"===A&&!["canceled","overdue","expired"].includes(S||"")&&C&&"plus"!==C&&v,P=N&&"id"in N?N.id:void 0,L=(0,k.cn)("divide-gray-200 min-h-[518px] overflow-y-auto",{"![background:radial-gradient(59.56%_73.36%_at_50%_100%,var(--ds-blue-300)_0%,var(--ds-background-100)_100%)]":T});return(0,t.jsxs)(i.Material,{className:L,children:[(0,t.jsxs)(e5,{children:[(0,t.jsxs)("div",{className:"flex flex-row items-center justify-between flex-initial",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:[(0,t.jsx)("p",{className:"text-heading-20",children:(0,t.jsxs)(c.SearchContextHighlighter,{children:[(0,p.default)(A)," Plan"]})}),(0,M.isPlanExpired)(N?.billing)?(0,t.jsx)(s.Badge,{variant:"red-subtle",children:"Expired"}):(0,M.isProTrial)(N?.billing)?(0,t.jsx)(s.Badge,{variant:(0,eJ.trialBadgeVariant)(N),children:"Pro Trial"}):null]}),(0,t.jsx)(e2,{invoicesUrl:I,usageUrl:E,plan:A,planIteration:C,canReadInvoice:b})]}),(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial lg:ml-auto",children:[(0,t.jsx)("p",{className:"text-label-13 text-gray-900 mr-2",children:"pro"===A||"enterprise"===A?`${(0,M.formatBillingCycle)(N)}`:""}),(0,t.jsx)(e4,{canReadInvoice:b,invoicesUrl:I,plan:A,usageUrl:E,className:"hidden lg:flex"})]})]}),"hobby"===A?(0,t.jsx)(eK,{}):"enterprise"===A&&l&&l.creditLedgers.length>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(O,{creditLedgers:l.creditLedgers,plan:A,owner:N,invoice:n,teamSlug:a,canUpdateBillingPlan:!1,isEntMiuFlexibleCommitEnabled:r}),!r&&(0,t.jsx)(eB,{canReadInvoice:b,invoice:n,owner:N,teamSlug:a})]}):"plus"===C?(0,M.isPlanExpired)(N?.billing)?(0,t.jsx)(eT,{}):l&&0!==l.creditLedgers.length?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(O,{creditLedgers:l.creditLedgers,plan:A,owner:N,invoice:n,teamSlug:a,canUpdateBillingPlan:v}),(0,t.jsx)(eT,{})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(O,{creditLedgers:[],plan:A,owner:N,invoice:void 0,teamSlug:a,canUpdateBillingPlan:v,isEmptyState:!0}),(0,t.jsx)(eT,{isEmptyState:!0})]}):(0,t.jsx)(eB,{canReadInvoice:b,invoice:n,owner:N,teamSlug:a}),T&&P?(0,t.jsx)(D,{teamId:P,billing:w}):null,N?.billing?(0,t.jsx)(F,{billing:N.billing,canUpdatePayment:y,canUpdateBillingPlan:v,teamId:P,shouldShowSwitchToNewProCta:T}):null]})}function e4(e){let{canReadInvoice:i,invoicesUrl:s,plan:l,usageUrl:n,className:r}=e;return(0,t.jsxs)("div",{className:(0,en.default)("flex flex-row items-center justify-start gap-2 flex-initial",r),children:[(0,t.jsx)(a.Tooltip,{desktopOnly:!0,forceHide:i,text:"You need additional permissions to view invoices",children:(0,t.jsx)(f.ButtonWithTracking,{className:"flex-1",disabled:!i,event:m.VercelActivityAction.BillingOverviewViewInvoicesClicked,href:s,plan:l,type:"secondary",size:"small",children:"Invoices"})}),(0,t.jsx)(a.Tooltip,{desktopOnly:!0,forceHide:i,text:"You need additional permissions to view usage",children:(0,t.jsx)(f.ButtonWithTracking,{className:"flex-1",disabled:!i,event:m.VercelActivityAction.BillingOverviewViewUsageClicked,href:n,plan:l,type:"secondary",size:"small",children:"Usage"})})]})}function e2(e){let{invoicesUrl:i,usageUrl:s,plan:a,planIteration:c,canReadInvoice:u}=e;return(0,t.jsxs)(l.MenuContainer,{children:[(0,t.jsx)(n.MenuButton,{"aria-label":"Menu",shape:"square",size:"small",svgOnly:!0,type:"secondary",className:"flex lg:hidden",disabled:!u,children:(0,t.jsx)(o.MoreHorizontal,{})}),(0,t.jsxs)(r.Menu,{children:[(0,t.jsx)(d.MenuItem,{children:(0,t.jsx)(e0,{trackingAction:m.VercelActivityAction.BillingOverviewViewInvoicesClicked,href:i,plan:a,planIteration:c,children:"Invoices"})}),(0,t.jsx)(d.MenuItem,{children:(0,t.jsx)(e0,{trackingAction:m.VercelActivityAction.BillingOverviewViewUsageClicked,href:s,plan:a,planIteration:c,children:"Usage"})})]})]})}function e5(e){let{children:i}=e;return(0,t.jsx)("div",{className:"flex flex-col lg:flex-row items-stretch lg:items-center justify-start gap-5 lg:gap-10 flex-initial p-6 w-full pb-4",children:i})}e.s(["BillingOverviewContent",()=>e1],7677717)},548803,e=>{"use strict";var t=e.i(8711407),i=e.i(57106),s=e.i(7917902),a=e.i(4600551),l=e.i(5819220);function n(){let{team:e}=(0,s.useAccount)();if(!e)return null;let a=`/${e.slug}/~/usage`;return(0,t.jsxs)(t.Fragment,{children:["To track your usage go to the ",(0,t.jsx)(i.Link,{href:a,variant:"highlight",children:"Usage"})," page."]})}function r(){return(0,t.jsx)(l.Entity,{filled:!0,children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-6 flex-initial p-2",children:[(0,t.jsx)("div",{className:"flex flex-row items-stretch justify-start gap-2 flex-initial",children:(0,t.jsx)("p",{className:"text-heading-20",children:"Plan"})}),(0,t.jsxs)("p",{className:"text-copy-14",children:["Your team is on the ",(0,t.jsx)(a.FixedPlanBadge,{plan:"enterprise"})," plan as part of an organization."]}),(0,t.jsxs)("p",{className:"text-copy-14",children:["You don't need to set up billing for this team. ",(0,t.jsx)(n,{})]})]})})}e.s(["AdditionalTeamFieldset",()=>r])},9065704,e=>{"use strict";var t=e.i(8711407),i=e.i(1176592),s=e.i(7137884),a=e.i(8517043),l=e.i(1232681),n=e.i(3895030),r=e.i(5255926),d=e.i(2064047),o=e.i(2504781),c=e.i(6347389),u=e.i(7807066),m=e.i(9722978),x=e.i(4004502),g=e.i(1717203),h=e.i(7557283),p=e.i(1877305),f=e.i(4375105),j=e.i(7612113),b=e.i(2831393),y=e.i(9602070),v=e.i(1080526),N=e.i(57106),w=e.i(2471070),S=e.i(1875382);function A(e){let{isAutoRechargeEnabled:o=!1,isUpdatedStripeElementsEnabled:x}=e,{can:A,isLoading:I}=(0,g.default)(),E=A(h.Action.Update,h.Resource.PaymentMethod),T=(0,S.useParams)(),M="string"==typeof T?.teamSlug?T.teamSlug:void 0,{balance:k}=(0,b.useAiCreditsBalance)(),{autoRechargeConfig:P,loading:F}=(0,y.useAiCreditsAutoRecharge)(),{topups:L,loading:_}=(0,w.useAiGatewayCreditTopups)(),O=L?.some(e=>"orb_ledger"===e.provider.type&&"miu"===e.provider.currency)??!1,[B,U]=(0,i.useState)(!1),D=(0,t.jsx)(t.Fragment,{children:"Purchase credit for AI Gateway. These are separate from any credit included in your Pro plan."});return(0,t.jsx)(j.AddCreditsModalProvider,{isUpdatedStripeElementsEnabled:x,isAutoRechargeEnabled:o,children:(0,t.jsx)("div",{id:"ai-credits",children:(0,t.jsxs)(a.Fieldset,{disabled:!E||!(void 0!==k&&!_&&!F),children:[(0,t.jsx)(s.FieldsetContent,{children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial",children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start flex-initial",children:[(0,t.jsx)(p.FieldsetTitle,{id:"ai-credits",children:"AI Gateway Credit"}),(0,t.jsx)(n.FieldsetSubtitle,{children:D})]}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start flex-initial overflow-hidden rounded-md border border-gray-alpha-400",children:[(0,t.jsxs)("div",{className:(0,m.clsx)("flex flex-row items-center justify-between gap-4 flex-initial p-4",o&&"border-b border-gray-alpha-400"),children:[(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-4 flex-initial",children:[(0,t.jsx)("div",{className:"flex size-8 items-center justify-center rounded-full border border-gray-alpha-400 bg-gray-100",children:(0,t.jsx)(c.Coins,{})}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start flex-initial",children:[(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"Current Balance"}),(0,t.jsxs)("p",{className:"text-heading-14",children:["$",Math.max(0,Number(k??0)).toFixed(2)]})]})]}),(0,t.jsx)(f.ViewBalanceAndPurchaseCreditsModal,{type:"on-demand"})]}),o?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Entity,{as:"button",disabled:!E,onClick:()=>U(!B),style:{cursor:"pointer"},className:"hover:bg-transparent",left:(0,t.jsx)(u.ChevronRight,{color:"gray-700",size:20,style:{transition:"transform 200ms ease",transform:B?"rotate(90deg)":"rotate(0deg)"}}),children:(0,t.jsx)(d.Entity.Content,{title:"Auto-reload"})}),B?(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial p-4",children:O&&M?(0,t.jsxs)("p",{children:["Buy with MIU is enabled for AI Gateway. Auto-reload is managed in your"," ",(0,t.jsx)(N.Link,{href:`/${M}/~/settings/billing#plan`,variant:"highlight",children:"billing settings"}),"."]}):(0,t.jsx)(v.AutoRechargeForm,{autoRechargeConfig:P,onCancel:()=>U(!1),onComplete:()=>U(!1)})}):null]}):null]})]})}),(0,t.jsx)(l.FieldsetFooter,{disabled:!1,children:(0,t.jsx)(l.FieldsetFooter.Status,{children:I?(0,t.jsx)(r.Skeleton,{children:(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"You need additional permissions to manage your team's AI Gateway credit."})}):(0,t.jsx)(C,{canUpdateCredits:E})})})]})})})}function C(e){let{canUpdateCredits:i}=e;return(0,t.jsx)(t.Fragment,{children:i?(0,t.jsxs)("p",{className:"text-copy-14 text-gray-900",children:["Credit expires 1 year after purchase. Learn more about"," ",(0,t.jsx)(N.Link,{external:!0,href:"/docs/ai-gateway/pricing",variant:"highlight",children:"AI Gateway Credit"})]}):"You need additional permissions to manage your team's AI Gateway credit."})}function I(){return(0,t.jsx)("div",{id:"ai-credits",children:(0,t.jsxs)(a.Fieldset,{disabled:!0,children:[(0,t.jsx)(s.FieldsetContent,{children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial",children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start flex-initial",children:[(0,t.jsx)(p.FieldsetTitle,{id:"ai-credits",children:"AI Gateway Credit"}),(0,t.jsx)(r.Skeleton,{children:(0,t.jsx)(n.FieldsetSubtitle,{children:"Purchase credit for AI Gateway. These are separate from any credit included in your Pro plan."})})]}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start flex-initial overflow-hidden rounded-md border border-gray-alpha-400",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center justify-between gap-4 flex-initial p-4 border-b border-gray-alpha-400",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-4 flex-initial",children:[(0,t.jsx)("div",{className:"flex size-8 items-center justify-center rounded-full border border-gray-alpha-400 bg-gray-100",children:(0,t.jsx)(c.Coins,{})}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start flex-initial",children:[(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"Current Balance"}),(0,t.jsx)(r.Skeleton,{children:(0,t.jsx)("p",{className:"text-heading-14",children:"$0.00"})})]})]}),(0,t.jsx)(r.Skeleton,{children:(0,t.jsx)(o.Button,{"data-testid":(0,x.tid)("ai-credits","add-funds"),disabled:!0,type:"default",size:"small",children:"Buy Credit"})})]}),(0,t.jsx)(d.Entity,{as:"button",disabled:!0,style:{cursor:"pointer"},className:"hover:bg-transparent",left:(0,t.jsx)(u.ChevronRight,{color:"gray-700",size:20,style:{transition:"transform 200ms ease",transform:"rotate(0deg)"}}),children:(0,t.jsx)(d.Entity.Content,{title:"Auto-reload"})})]})]})}),(0,t.jsx)(l.FieldsetFooter,{disabled:!1,children:(0,t.jsx)(l.FieldsetFooter.Status,{children:(0,t.jsx)(r.Skeleton,{children:(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"You need additional permissions to manage your team's AI Gateway credit."})})})})]})})}e.s(["AiCreditsFieldset",()=>A,"AiCreditsSkeleton",()=>I])},9961680,e=>{"use strict";var t=e.i(8711407),i=e.i(1176592),s=e.i(8517043),a=e.i(7137884),l=e.i(1232681),n=e.i(3895030),r=e.i(5255926),d=e.i(2064047),o=e.i(2504781),c=e.i(6347389),u=e.i(7807066),m=e.i(4004502),x=e.i(1717203),g=e.i(7557283),h=e.i(1877305),p=e.i(7608222),f=e.i(87116),j=e.i(2596253),b=e.i(8951690),y=e.i(8863362),v=e.i(2471070),N=e.i(57106),w=e.i(1875382);function S(){let{can:e,isLoading:S}=(0,x.default)(),C=e(g.Action.Update,g.Resource.PaymentMethod),I=(0,w.useParams)(),E="string"==typeof I?.teamSlug?I.teamSlug:void 0,{balance:T,loading:M}=(0,f.useVercelAgentCreditsBalance)(),{autoRechargeConfig:k,loading:P}=(0,j.useVercelAgentCreditsAutoRecharge)(),{topups:F,loading:L}=(0,v.useVercelAgentCreditTopups)(),_=F?.some(e=>"orb_ledger"===e.provider.type&&"miu"===e.provider.currency)??!1,O=!M&&!P&&!L,[B,U]=(0,i.useState)(!1),{openModal:D,modals:R}=(0,y.useAddCreditsModal)(),$=Math.max(0,Number(T??0)).toFixed(2);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{id:"vercel-agent-credits",children:(0,t.jsxs)(s.Fieldset,{disabled:!C||!O,children:[(0,t.jsx)(a.FieldsetContent,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(h.FieldsetTitle,{id:"vercel-agent-credits",children:`${p.VERCEL_AGENT_NAME} Credit`}),(0,t.jsx)(n.FieldsetSubtitle,{children:`Purchase credit to keep ${p.VERCEL_AGENT_NAME} running for your team.`})]}),(0,t.jsxs)("div",{className:"overflow-hidden rounded-md border border-gray-alpha-400",children:[(0,t.jsxs)("div",{className:"flex gap-4 p-4 items-center justify-between border-b border-gray-alpha-400",children:[(0,t.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,t.jsx)("div",{className:"flex size-8 items-center justify-center rounded-full border border-gray-alpha-400 bg-gray-100",children:(0,t.jsx)(c.Coins,{})}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("p",{className:"text-gray-900 text-sm font-normal",children:"Current Balance"}),M?(0,t.jsx)(r.Skeleton,{children:(0,t.jsx)("p",{className:"text-gray-900 text-sm font-semibold",children:"$0.00"})}):(0,t.jsxs)("p",{className:"text-gray-1000 text-sm font-semibold",children:["$",$]})]})]}),(0,t.jsx)(o.Button,{"data-testid":(0,m.tid)("vercel-agent-credits","add-funds"),disabled:!C||M,type:"default",size:"small",onClick:()=>D("team-settings"),children:"Buy Credit"})]}),(0,t.jsx)(d.Entity,{as:"button",disabled:!C||!O,onClick:()=>{C&&O&&U(e=>!e)},style:{cursor:"pointer"},className:"hover:bg-transparent",left:(0,t.jsx)(u.ChevronRight,{color:"gray-700",size:20,style:{transition:"transform 200ms ease",transform:B?"rotate(90deg)":"rotate(0deg)"}}),children:(0,t.jsx)(d.Entity.Content,{title:"Auto-reload"})}),B?(0,t.jsx)("div",{className:"space-y-4 p-4 pb-0",children:_&&E?(0,t.jsxs)("p",{className:"mb-4",children:["Buy with MIU is enabled for ",p.VERCEL_AGENT_NAME,". Auto-reload is managed in your"," ",(0,t.jsx)(N.Link,{href:`/${E}/~/settings/billing#plan`,variant:"highlight",children:"billing settings"}),"."]}):(0,t.jsx)(b.AutoRechargeForm,{autoRechargeConfig:k,onCancel:()=>U(!1),onComplete:()=>U(!1)})}):null]})]})}),(0,t.jsx)(l.FieldsetFooter,{disabled:!1,children:(0,t.jsx)(l.FieldsetFooter.Status,{children:S?(0,t.jsx)(r.Skeleton,{children:(0,t.jsxs)("p",{className:"text-gray-900 text-sm font-normal",children:["You need additional permissions to manage your team's"," ",p.VERCEL_AGENT_NAME," credit."]})}):(0,t.jsx)(A,{canUpdateCredits:C})})})]})}),R]})}function A(e){let{canUpdateCredits:i}=e;return i?(0,t.jsxs)("p",{className:"text-gray-900 text-sm font-normal",children:["Credit expires 1 year after purchase and can only be used for"," ",p.VERCEL_AGENT_NAME,"."]}):(0,t.jsxs)("p",{className:"text-gray-900 text-sm font-normal",children:["You need additional permissions to manage your team's"," ",p.VERCEL_AGENT_NAME," credit."]})}function C(){return(0,t.jsx)("div",{id:"vercel-agent-credits",children:(0,t.jsxs)(s.Fieldset,{disabled:!0,children:[(0,t.jsx)(a.FieldsetContent,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(h.FieldsetTitle,{id:"vercel-agent-credits",children:`${p.VERCEL_AGENT_NAME} Credit`}),(0,t.jsx)(r.Skeleton,{children:(0,t.jsx)(n.FieldsetSubtitle,{children:`Purchase credit to keep ${p.VERCEL_AGENT_NAME} running for your team.`})})]}),(0,t.jsxs)("div",{className:"overflow-hidden rounded-md border border-gray-alpha-400",children:[(0,t.jsxs)("div",{className:"flex gap-4 px-4 items-center justify-between border-b border-gray-alpha-400",children:[(0,t.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,t.jsx)("div",{className:"flex size-8 items-center justify-center rounded-full border border-gray-alpha-400 bg-gray-100",children:(0,t.jsx)(c.Coins,{})}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("p",{className:"text-gray-900 text-sm font-normal",children:"Current Balance"}),(0,t.jsx)(r.Skeleton,{children:(0,t.jsx)("p",{className:"text-gray-900 text-sm font-semibold",children:"$0.00"})})]})]}),(0,t.jsx)(r.Skeleton,{children:(0,t.jsx)(o.Button,{"data-testid":(0,m.tid)("vercel-agent-credits","add-funds"),disabled:!0,type:"default",size:"small",children:"Buy Credit"})})]}),(0,t.jsx)(d.Entity,{as:"button",disabled:!0,style:{cursor:"pointer"},className:"hover:bg-transparent",left:(0,t.jsx)(u.ChevronRight,{color:"gray-700",size:20,style:{transition:"transform 200ms ease",transform:"rotate(0deg)"}}),children:(0,t.jsx)(d.Entity.Content,{title:"Auto-reload"})})]})]})}),(0,t.jsx)(l.FieldsetFooter,{disabled:!1,children:(0,t.jsx)(l.FieldsetFooter.Status,{children:(0,t.jsx)(r.Skeleton,{children:(0,t.jsxs)("p",{className:"text-gray-900 text-sm font-normal",children:["You need additional permissions to manage your team's"," ",p.VERCEL_AGENT_NAME," credit."]})})})})]})})}e.s(["VercelAgentCreditsFieldset",()=>S,"VercelAgentCreditsSkeleton",()=>C])},9894301,e=>{"use strict";var t=e.i(8711407),i=e.i(1176592),s=e.i(8248823),a=e.i(2504781),l=e.i(7137884),n=e.i(4030453),r=e.i(5063443),d=e.i(8517043),o=e.i(1232681),c=e.i(3671642),u=e.i(5323212),m=e.i(3895030),x=e.i(455575),g=e.i(57106),h=e.i(4004502),p=e.i(9070994),f=e.i(4244280),j=e.i(7917902),b=e.i(1119178),y=e.i(6060673),v=e.i(1717203),N=e.i(7557283),w=e.i(5633797),S=e.i(2466450),A=e.i(6214931),C=e.i(6192817),I=e.i(6998974),E=e.i(1877305),T=e.i(5807088),M=e.i(562525),k=e.i(2348990),P=e.i(6677203);let F=new Date("2023-12-03T00:00:00Z").getTime();function L(){let e=(0,j.useAccount)(),{isLoading:i}=(0,v.default)();return!e||e.isLoading||!e.user||i?(0,t.jsx)(T.default,{}):(0,t.jsx)(O,{})}let _=new Intl.NumberFormat("en-US").format;function O(){var e;let T=(0,j.useAccount)(),{can:L}=(0,v.default)(),{data:O}=(0,y.useTeamProjects)(),{user:B,team:U}=T,D=U||B,R=(0,P.isAwsMarketplaceCustomer)(D),$=D?.billing?.controls,[z,G]=(0,i.useState)(null),[V,W]=(0,i.useState)(!1),[H,Y]=(0,i.useState)(100*($?.analyticsSpendLimitInDollars||w.ANALYTICS_DATA.spendDefault)),[q,Z]=(0,i.useState)($?.analyticsSampleRateInPercent||w.ANALYTICS_DATA.sampleRateDefault),K=(0,x.useToasts)(),J=(e=D?.billing,{batch:e?.invoiceItems?.analyticsUsage?.batch??1e4,price:e?.invoiceItems?.analyticsUsage?.price??65}),X=(0,i.useMemo)(()=>{if(!O||0===O.length||U?.billing?.plan==="enterprise")return!0;for(let e of O)if((0,k.isSpeedInsightsEnabled)(e)&&!(e.createdAt>F)&&e.speedInsights?.enabledAt&&e.speedInsights.enabledAt<=F)return!1;return!0},[O,U]),Q=(0,I.billingFeatureSupported)(D,"speedInsights.sampling"),ee=Q?A.TEAM_SETTINGS_NAVIGATION_TITLES.billing.analyticsSampling:"Speed Insights Cost Limit",et=(0,i.useCallback)(async e=>{e.preventDefault();try{G(null),W(!0);let e=new URLSearchParams(U?{teamId:U.id}:{});await (0,p.default)(`${f.API_SPEED_INSIGHTS_SETTINGS}?${e}`,{method:"PATCH",body:JSON.stringify({spendLimit:null!==H?H/100:null,sampleRate:Q?q:void 0})}),await T.mutate(),K.success(`Your ${ee} settings have been updated.`)}catch(e){G((0,s.normalizeError)(e))}finally{W(!1)}},[U,H,Q,q,T,K,ee]);if(X)return null;let ei=L(N.Action.Update,N.Resource.AnalyticsSampling)&&!R,es=L(N.Action.Read,N.Resource.AnalyticsSampling),ea=(D?.billing?.invoiceItems?.analytics?.quantity||0)>0;return(0,t.jsx)("div",{id:"analytics-sampling",children:(0,t.jsx)("form",{onSubmit:(0,b.promiseToCallback)(et),children:(0,t.jsxs)(d.Fieldset,{disabled:!ei,children:[(0,t.jsxs)(l.FieldsetContent,{disabled:!ei||!ea,children:[(0,t.jsx)(E.FieldsetTitle,{id:A.TEAM_SETTINGS_NAVIGATION_TITLES.billing.analyticsSampling,children:ee}),Q?(0,t.jsx)(m.FieldsetSubtitle,{children:"Control Speed Insights usage with sampling, limiting the amount of Data Points collected, reducing your monthly cost."}):(0,t.jsx)(m.FieldsetSubtitle,{children:"Control Speed Insights usage with a cost limit, reducing your monthly cost."}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row items-start justify-start gap-3 flex-initial",children:[(0,t.jsx)("div",{style:{width:`${(0,S.formatCurrency)(100*w.ANALYTICS_DATA.spendMaximum,D?.billing?.currency).toString().length+10}ch`},children:es?(0,t.jsx)(C.CurrencyInput,{"aria-label":"Cost Limit",currency:D?.billing?.currency,disabled:V||!ei||!ea,label:"Cost Limit",max:w.ANALYTICS_DATA.spendMaximum,min:w.ANALYTICS_DATA.spendMinimum,onChange:e=>{null!==e?e/100>=w.ANALYTICS_DATA.spendMinimum&&e/100<=w.ANALYTICS_DATA.spendMaximum&&Y(e):Y(null)},placeholder:100*w.ANALYTICS_DATA.spendDefault,readOnly:V,requireWholeNumbers:!0,required:!0,value:H,width:"100%"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.Label,{value:"Cost Limit"}),(0,t.jsx)(M.default,{})]})}),Q?(0,t.jsx)("div",{children:es?(0,t.jsx)(u.Select,{disabled:V||!ei||!ea,label:"Sampling Percentage",onChange:e=>Z(Number.parseInt(e.target.value)),value:q,children:[10,20,30,40,50,60,70,80,90,100].map(e=>(0,t.jsxs)("option",{value:e,children:[e,"%"]},`sample-${e}`))}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.Label,{value:"Sampling Percentage"}),(0,t.jsx)(M.default,{width:128})]})}):null]}),es&&Q?(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-6 flex-initial pt-6",children:[(0,t.jsx)("hr",{className:"geist-hr-reset"}),(0,t.jsxs)("span",{className:"text-copy-14",children:[(0,t.jsx)("span",{className:"text-heading-14",children:(0,S.formatCurrency)(J.price,D?.billing?.currency)})," ","per ",_(J.batch)," Data Points"]})]}):null]})]}),(0,t.jsxs)(o.FieldsetFooter,{disabled:!1,highlight:!ei||!ea,children:[(0,t.jsx)(o.FieldsetFooter.Status,{children:function(e){let{error:i,isAwsMpCustomer:s,canUpdateSpeedInsights:a,featureName:l}=e;return i?.message?(0,t.jsx)(r.ErrorText,{children:(0,t.jsx)(n.Error,{error:i})}):s?`Contact your sales rep to manage your team's ${l.toLowerCase()} percentage and cost limits.`:a?(0,t.jsxs)("span",{children:["The cost limit will apply to all Speed Insights projects.",(0,t.jsx)("br",{}),"Projects using ",(0,t.jsx)("code",{children:"@vercel/speed-insights"})," package must control sampling in code."," ",(0,t.jsx)(g.Link,{external:!0,href:"/docs/speed-insights/migrating-from-legacy",variant:"highlight",children:"Learn how"}),".",(0,t.jsx)("br",{}),"This sampling rate will only apply to projects that are not using the package."]}):`You need additional permissions to manage your team's ${l.toLowerCase()} percentage and cost limits.`}({error:z,isAwsMpCustomer:R,canUpdateSpeedInsights:ei,featureName:ee})}),ei&&ea?(0,t.jsx)(o.FieldsetFooter.Actions,{children:(0,t.jsx)(a.Button,{"data-testid":(0,h.tid)("account-settings","billing","analytics-save"),disabled:!H,loading:V,size:"small",width:V?100:80,children:V?"Saving":"Save"})}):null]})]})})})}e.s(["default",()=>L])},1373644,e=>{"use strict";var t=e.i(8711407),i=e.i(1176592),s=e.i(7137884),a=e.i(4030453),l=e.i(8517043),n=e.i(1232681),r=e.i(6891161),d=e.i(3895030),o=e.i(455575),c=e.i(8522580),u=e.i(1906681),m=e.i(8735244),x=e.i(8042625),g=e.i(7722264),h=e.i(57106),p=e.i(277234),f=e.i(4244280),j=e.i(7917902),b=e.i(1717203),y=e.i(7557283),v=e.i(413518),N=e.i(1877305),w=e.i(5807088);function S(){let e=(0,j.useAccount)(),i=(0,b.default)(),s=(0,v.useBillingSubscription)(e.team?.slug);return!e.team||i.isLoading||s.isLoading?(0,t.jsx)(w.default,{extraHeight:38}):(0,t.jsx)(A,{})}function A(){let{team:e}=(0,j.useAccount)(),{data:w}=(0,v.useBillingSubscription)(e?.slug),S=(0,i.useMemo)(()=>w?.products.find(e=>"flags-explorer"===e.slug),[w?.products]),A=!!(S?.entitlement?.createdAt&&!S.entitlement.expiredAt),C=!!(S?.entitlement?.createdAt&&S.entitlement.expiredAt),I=!!(S?.entitlement?.expiredAt&&S.entitlement.expiredAt<Date.now()),{can:E}=(0,b.default)(),{upgradeModal:T,openUpgradeModal:M,isSubmitting:k}=function(e){let{isEnabled:s,isFeatureExpired:l,isFeaturePreviouslyEnabled:n}=e,d=(0,o.useToasts)(),[c,u]=(0,i.useState)(!1),[m,b]=(0,i.useState)(null),[y,N]=(0,i.useState)(!1),{team:w}=(0,j.useAccount)(),S=w?.id,A=(0,v.useBillingSubscription)(w?.slug),C=()=>{y||(u(!1),b(null))},I=(0,i.useCallback)(async e=>{let{isReEnabling:i}=e;b(null),N(!0),i&&d.success("Enabling unlimited overrides for Flags Explorer.");try{let e=s?`${f.API_FLAGS_EXPLORER}/disable`:`${f.API_FLAGS_EXPLORER}/enable`;await (0,p.fetchAPI)(`${e}${(0,x.encode)({teamId:S})}`,{method:"POST",throwOnHTTPError:!0,headers:{"content-type":"application/json"}}),await A.mutate(),s?d.success("Disabled unlimited overrides for Flags Explorer."):d.success("Enabled unlimited overrides for Flags Explorer."),u(!1)}catch(e){if((0,g.isError)(e))b(e),i&&d.error({text:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"text-heading-14",children:"Error:"})," ",e.message]})});else throw e}finally{N(!1)}},[s,d,N,u,A,S]);return{openUpgradeModal:()=>{if(!l&&n&&!s){u(!1),I({isReEnabling:!0});return}u(!0)},upgradeModal:(0,t.jsxs)(r.Modal.Modal,{active:c,onClickOutside:()=>C(),children:[(0,t.jsxs)(r.Modal.Body,{children:[(0,t.jsx)(r.Modal.Header,{children:(0,t.jsx)(r.Modal.Title,{children:"Flags Explorer"})}),s?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.Modal.P,{children:"You are about to disable unlimited feature flag overrides for your team."}),(0,t.jsx)(r.Modal.P,{children:"Once disabled, at the end of your team's billing period, your team will revert to the standard plan limit of 150 overrides per month across all projects."}),(0,t.jsx)(r.Modal.P,{children:(0,t.jsx)("b",{children:"Disable unlimited overrides."})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.Modal.P,{children:"Unlock unlimited overrides within the Flags Explorer for your team."}),(0,t.jsxs)(r.Modal.P,{children:["The Flags Explorer is part of the Vercel Toolbar and allows you to easily view and override feature flags without leaving your browser tab."," ",(0,t.jsx)(h.Link,{external:!0,href:"/docs/feature-flags/flags-explorer",variant:"highlight",children:"Learn More"})]}),(0,t.jsx)(r.Modal.P,{children:(0,t.jsx)("b",{children:"Enable unlimited overrides for 250 USD per month."})}),(0,t.jsx)("p",{className:"text-label-12 text-gray-900 text-right",children:"* Plus applicable tax and fees"})]}),m?(0,t.jsx)(a.Error,{error:m}):null]}),(0,t.jsxs)(r.Modal.Actions,{children:[(0,t.jsx)(r.Modal.Action,{buttonType:"button",onClick:()=>C(),type:"secondary",children:"Cancel"}),(0,t.jsx)(r.Modal.Action,{buttonType:"submit",loading:y,onClick:()=>void I({}),children:s?"Disable":"Pay & Enable"})]})]}),isSubmitting:y}}({isEnabled:A,isFeatureExpired:I,isFeaturePreviouslyEnabled:C}),P=E(y.Action.Update,y.Resource.FlagsExplorerSubscription),F=!P,L=(0,i.useMemo)(()=>P?(0,t.jsxs)(t.Fragment,{children:["Learn more about ",(0,t.jsx)(h.Link,{external:!0,href:"/docs/feature-flags/flags-explorer",variant:"highlight",children:"Flags Explorer"})]}):(0,t.jsx)(t.Fragment,{children:"You need additional permissions to manage your team's Flags Explorer."}),[P]);return(0,t.jsxs)(t.Fragment,{children:[T,(0,t.jsxs)(l.Fieldset,{disabled:F,children:[(0,t.jsxs)(s.FieldsetContent,{children:[(0,t.jsx)(N.FieldsetTitle,{children:"Flags Explorer"}),(0,t.jsx)(d.FieldsetSubtitle,{children:"Unrestricted feature flag testing through the Vercel Toolbar, enabling your team to validate multiple configurations across environments without leaving your application."}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-3 flex-initial",children:[(0,t.jsx)("div",{className:"flex flex-row items-stretch justify-start flex-initial",children:(0,t.jsx)(u.Toggle,{"aria-label":"Toggle unlimited overrides",checked:A,direction:"switch-first",disabled:k,label:"Toggle unlimited overrides",onChange:()=>M(),size:"large",children:(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-2 flex-initial",children:[k?(0,t.jsx)(m.Spinner,{color:"var(--accents-5)",size:20}):null,"Enable unlimited overrides"]})})}),S?.entitlement?.expiredAt?(0,t.jsxs)(c.Note,{children:["Your access to flags explorer will be disabled on"," ",new Date(S.entitlement.expiredAt).toDateString()]}):null]})]}),(0,t.jsx)(n.FieldsetFooter,{children:(0,t.jsx)(n.FieldsetFooter.Status,{children:L})})]})]})}e.s(["BillingFlagsExplorer",()=>S])},9885791,e=>{"use strict";var t=e.i(8711407),i=e.i(2504781),s=e.i(7137884),a=e.i(8517043),l=e.i(1232681),n=e.i(6891161),r=e.i(3895030),d=e.i(455575),o=e.i(57106),c=e.i(1176592),u=e.i(8042625),m=e.i(9070994),x=e.i(4244280),g=e.i(5338940),h=e.i(1119178),p=e.i(6998157),f=e.i(1877305),j=e.i(5807088),b=e.i(8851095),y=e.i(3349273),v=e.i(9358876),N=e.i(1717203),w=e.i(7557283);function S(){let{team:e,isReady:i}=(0,g.useTeam)();return i&&e?(0,t.jsx)(b.SafeSuspense,{loading:(0,t.jsx)(j.default,{height:108}),error:null,children:(0,t.jsx)(A,{team:e})}):(0,t.jsx)(j.default,{height:108})}function A(e){let n,{team:g}=e,[j,b]=(0,c.useState)(!1),[v,S]=(0,c.useState)(!1),A=(0,d.useToasts)(),I=`/teams/${g.slug}/settings/drains`,{data:E}=(0,p.useDrains)({teamIdOrSlug:g.slug}),{deleteDrain:T}=(0,y.useDeleteDrain)(g.slug),{isLoading:M,can:k}=(0,N.default)(),P=k(w.Action.Delete,w.Resource.Drain),F=E.drains.filter(e=>"self-served"===e.source.kind),L=new Set(E.drains.map(e=>"integration"===e.source.kind?e.source.integrationConfigurationId:void 0).filter(Boolean)),_=L.size,O=F.length+_,B=M||!P||0===O;B&&(M||P||(n="Additional permissions required to remove drains"),0===O&&(n="No drains to remove"));let U=async()=>{S(!0);try{await Promise.all([...Array.from(L).map(async e=>{let t=`${x.API_INTEGRATION_CONTROLLER}/configuration/${e}${(0,u.encode)({teamId:g.id})}`;await (0,m.default)(t,{method:"DELETE"})}),...F.map(e=>T({id:e.id}))]),A.success("Drains removed successfully")}catch(e){A.error("Failed to remove drains")}finally{S(!1),b(!1)}};return(0,t.jsxs)("div",{children:[(0,t.jsxs)(a.Fieldset,{children:[(0,t.jsxs)(s.FieldsetContent,{children:[(0,t.jsx)(f.FieldsetTitle,{children:"Drains"}),(0,t.jsx)(r.FieldsetSubtitle,{children:(0,t.jsxs)("p",{className:"text-copy-14 text-gray-900",children:["Forward Logs, Traces, Speed Insights, and Analytics to third-party providers or your own custom endpoints. Managed from"," ",(0,t.jsx)(o.Link,{href:I,target:"_self",type:"highlight",children:"Team Settings"}),"."]})}),(0,t.jsxs)("div",{className:"flex flex-row items-center justify-between flex-initial border-accent-2 m-1 rounded border p-4",children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start flex-initial",children:[(0,t.jsx)("p",{className:"text-heading-14",children:"Drains are automatically enabled for pro and enterprise users."}),(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:n||"Remove all active drains to stop billing"})]}),O>0&&(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-initial",children:(0,t.jsx)(i.Button,{type:"error",disabled:B,onClick:()=>b(!0),children:"Remove All"})})]})]}),(0,t.jsx)(l.FieldsetFooter,{children:(0,t.jsx)(l.FieldsetFooter.Status,{children:(0,t.jsxs)("span",{children:["Learn more about"," ",(0,t.jsx)(o.Link,{external:!0,href:"/docs/drains#usage-and-pricing",variant:"highlight",children:"Drains"})]})})})]}),(0,t.jsx)(C,{active:j,isLoading:v,count:{drains:F.length,integrations:_},onClick:(0,h.promiseToCallback)(U),onClose:()=>b(!1)})]})}function C(e){let{onClose:i,onClick:s,active:a,isLoading:l,count:r}=e,d="",{drains:o,integrations:c}=r;return o>0&&(d=(0,v.pluralize)("drain",o,!0)),c>0&&(d=`${d?`${d} & `:""}${(0,v.pluralize)("integration",c,!0)}`),(0,t.jsxs)(n.Modal.Modal,{active:a,onClickOutside:i,width:"500px",children:[(0,t.jsxs)(n.Modal.Body,{children:[(0,t.jsx)(n.Modal.Header,{children:(0,t.jsx)(n.Modal.Title,{children:"Delete All Drains"})}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-3 flex-initial",children:[(0,t.jsxs)("p",{className:"text-copy-14",children:[d," will be permanently removed from your account."]}),(0,t.jsx)("p",{className:"text-copy-14",children:"Are you sure you want to continue?"})]})]}),(0,t.jsxs)(n.Modal.Actions,{children:[(0,t.jsx)(n.Modal.Action,{loading:l,onClick:i,type:"secondary",children:"Cancel"}),(0,t.jsx)(n.Modal.Action,{type:"error",loading:l,onClick:s,children:"Yes, I'm sure"})]})]})}e.s(["DrainCard",()=>S])},7308098,e=>{"use strict";var t=e.i(9171423),i=e.i(4244280),s=e.i(8248823);let a=async e=>{let{settings:a,teamId:l}=e;try{let e=await (0,t.fetchApi)(`${i.API_MONITORING_SETTINGS}?teamId=${encodeURIComponent(l)}`,{method:"PATCH",body:a,throwOnHTTPError:!0});if(e&&"object"==typeof e&&"isEnabled"in e)return{kind:"ok",...e};throw Error("Failed to update monitoring settings")}catch(e){return{kind:"error",error:(0,s.normalizeError)(e)}}};function l(e,t){return!!e&&(t?.isEnabled||!!e.enabledInvoiceItems?.monitoring?.enabled)}e.s(["getMonitoringEnabled",()=>l,"updateMonitoringSettings",0,a])},5738038,e=>{"use strict";var t=e.i(8711407),i=e.i(1176592),s=e.i(7137884),a=e.i(8517043),l=e.i(1232681),n=e.i(3895030),r=e.i(1906681),d=e.i(455575),o=e.i(57106),c=e.i(4004502),u=e.i(7917902),m=e.i(1717203),x=e.i(7557283),g=e.i(2175076),h=e.i(7308098),p=e.i(6214931),f=e.i(2466450),j=e.i(6493958),b=e.i(6464673),y=e.i(5807088),v=e.i(1877305);function N(){let{isLoading:e,data:i}=(0,g.useMonitoringSettings)();return e||i?.isEnabled?e?(0,t.jsx)(y.default,{}):(0,t.jsx)(w,{settings:i}):null}function w(e){let{settings:g}=e,N=(0,u.useAccount)(),{team:w}=N,S=(0,m.default)(),[A,C]=(0,i.useState)(()=>(0,h.getMonitoringEnabled)(N.team,g)),I=(0,d.useToasts)(),{can:E}=S,T=E(x.Action.Update,x.Resource.MonitoringSettings),M=(0,i.useMemo)(()=>{if(T){let{basePrice:e,metricsPrice:t,batch:i,threshold:s}=function(e){let{price:t}=e?.invoiceItems?.monitoring??{price:1e3},{price:i,batch:s,threshold:a}=e?.invoiceItems?.monitoringMetric??{price:120,batch:1e6,threshold:25e4};return{basePrice:t,metricsPrice:i,batch:s,threshold:a}}(w?.billing);return`${(0,f.formatCurrency)(e,w?.billing?.currency)} for the first ${(0,j.countFormatter)(s,"display")} data points, then ${(0,f.formatCurrency)(t,w?.billing?.currency)} per ${(0,j.countFormatter)(i,"long")} data points.`}return"You need additional permissions to manage your team's Monitoring settings."},[T,w]),k=(0,i.useCallback)(async e=>{if(w){C(e);let t=await (0,h.updateMonitoringSettings)({teamId:w.id,settings:{isEnabled:e}});"error"===t.kind&&(C(!e),I.error(t.error.message))}},[w,I]);return w?N.isLoading||S.isLoading?(0,t.jsx)(y.default,{}):(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(a.Fieldset,{disabled:!T,children:[(0,t.jsxs)(s.FieldsetContent,{disabled:!T,children:[(0,t.jsx)(v.FieldsetTitle,{children:p.TEAM_SETTINGS_NAVIGATION_TITLES.billing.monitoring}),(0,t.jsxs)(n.FieldsetSubtitle,{children:["Monitoring is a query editor that allows you to visualize errors, debug bandwidth issues, and monitor usage and web traffic for the past ",(0,b.getMaxRetention)(w).days," days."," ",T?(0,t.jsxs)(t.Fragment,{children:["Learn more about"," ",(0,t.jsx)(o.Link,{external:!0,href:"/docs/observability/monitoring",variant:"highlight",children:"Monitoring"})]}):null]}),(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:[(0,t.jsx)(r.Toggle,{checked:A,"data-testid":(0,c.tid)("billing","monitoring","toggle"),onChange:()=>{w.billing?.plan==="enterprise"&&k(!A)},size:"large"}),(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:A?"Disable":"Enable"})]})]}),(0,t.jsx)(l.FieldsetFooter,{disabled:!1,highlight:!T,children:(0,t.jsx)(l.FieldsetFooter.Status,{children:(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:M})})})]})}):null}e.s(["BillingMonitoring",()=>N])},7631992,e=>{"use strict";var t=e.i(8711407),i=e.i(2504781),s=e.i(7137884),a=e.i(8517043),l=e.i(1232681),n=e.i(3895030),r=e.i(1906681),d=e.i(57106),o=e.i(1717203),c=e.i(7557283),u=e.i(4004502),m=e.i(1176592),x=e.i(6728635),g=e.i(2630141),h=e.i(854682),p=e.i(8548383),f=e.i(5568858),j=e.i(1877305),b=e.i(5807088),y=e.i(7114658),v=e.i(1918911),N=e.i(7719396);let w=p.ADD_ON_PERMISSIONS.observabilityBase,S=(0,p.getAddOnDisplayName)("observabilityBase"),A=p.ADD_ON_DESCRIPTIONS.observabilityBase,C=p.ADD_ON_LEARN_MORE_LINKS.observabilityBase,I=p.ADD_ON_IDS.observabilityBase;function E(){let e=(0,g.useOpenEnableModal)(),{ready:p,hasObservabilityPlusSubscribed:E}=(0,h.useHasObservabilityPlus)(),{disableObservabilityPlus:T,ObservabilityPlusModal:M,enableObservabilityPlus:k}=(0,f.useToggleObservabilityPlus)({analyticsEventSource:"billing",skipPostConfirm:!1}),{excludedProjects:P,isObservabilityPlusForProjectsFlagEnabled:F}=(0,y.useObservabilityPlusForProjects)(),{can:L}=(0,o.default)(),_=L(c.Action.Read,w),O=L(c.Action.Update,w),B=L(c.Action.Create,w),U=_&&O&&B,D=(0,m.useCallback)(()=>{E?T?.():e({from:"billing",via:"billing"})},[e,T,E]);return p?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(a.Fieldset,{disabled:!U,children:[(0,t.jsxs)(s.FieldsetContent,{disabled:!U,children:[(0,t.jsx)(j.FieldsetTitle,{children:S}),(0,t.jsx)(n.FieldsetSubtitle,{children:A}),(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:[(0,t.jsx)(r.Toggle,{checked:E,"data-testid":(0,u.tid)("billing",I,"toggle"),onChange:D,size:"large"}),(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:E?"Downgrade":"Upgrade"})]}),F?(0,t.jsx)(i.Button,{className:"flex flex-row items-center px-4 text-[var(--accents-5)] hover:text-[var(--geist-foreground)]",onClick:()=>{k?.(),(0,N.trackAddOnEvent)({eventName:"open_update_modal",addOn:"observabilityBase",source:"billing-settings-add-ons"})},type:"tertiary",variant:"unstyled",typeName:"button",children:(0,t.jsxs)("div",{className:"flex flex-row items-center justify-center gap-1",children:[P?.length?`${P.length} project${1===P.length?"":"s"} excluded`:"Manage projects",(0,t.jsx)(v.ChevronUpDown,{})]})}):null]})]}),(0,t.jsx)(l.FieldsetFooter,{disabled:!1,highlight:!U,children:(0,t.jsx)(l.FieldsetFooter.Status,{children:U?(0,t.jsxs)(t.Fragment,{children:["Learn more about ",(0,t.jsx)(d.Link,{external:!0,href:C,target:"_blank",variant:"highlight",children:S})]}):"You need additional permissions to manage your team's Observability Plus subscription."})})]}),(0,t.jsx)(x.EnableModal,{}),M]}):(0,t.jsx)(b.default,{})}e.s(["BillingObservability",()=>E])},409125,e=>{e.v({budgetAmountStack:"index-module__GYcspG__budgetAmountStack",chevron:"index-module__GYcspG__chevron",detailsEntityDivider:"index-module__GYcspG__detailsEntityDivider",detailsEntityForm:"index-module__GYcspG__detailsEntityForm",detailsEntityTopSpacer:"index-module__GYcspG__detailsEntityTopSpacer",spendManagementEntity:"index-module__GYcspG__spendManagementEntity",spendManagementEntityDetailsActive:"index-module__GYcspG__spendManagementEntityDetailsActive",spendMangementEntity:"index-module__GYcspG__spendMangementEntity",webhookText:"index-module__GYcspG__webhookText"})},1640782,e=>{"use strict";var t=e.i(8711407),i=e.i(1176592),s=e.i(2504781),a=e.i(7137884),l=e.i(4030453),n=e.i(5063443),r=e.i(8517043),d=e.i(1232681),o=e.i(2689376),c=e.i(3895030),u=e.i(1906681),m=e.i(5468328),x=e.i(455575),g=e.i(57106),h=e.i(7807066),p=e.i(9722978),f=e.i(509783),j=e.i(4004502),b=e.i(119294),y=e.i(6352514),v=e.i(5338940),N=e.i(588428),w=e.i(1717203),S=e.i(7557283),A=e.i(979715),C=e.i(4712634),I=e.i(5819220),E=e.i(4633529),T=e.i(2854814),M=e.i(3216120),k=e.i(4787360),P=e.i(3807412),F=e.i(345159),L=e.i(6872861),_=e.i(5807088),O=e.i(1877305),B=e.i(8761240),U=e.i(4585051),D=e.i(6891161),R=e.i(3500331);function $(e){let{active:s,budgetAmount:a,save:l,hide:n,pauseProjects:r,webhookConfigured:d,willTriggerImmediately:o}=e,{team:c}=(0,v.useTeam)(),u=c?.name??"",m=c?.id??"",x=(0,i.useMemo)(()=>{let e=["Notifications are sent to team owner and billing members."];return d&&e.unshift("A webhook is triggered."),r&&e.unshift("All deployments are paused."),e},[r,d]),[g,h]=(0,i.useState)(!1),p=(0,i.useMemo)(()=>o?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("strong",{style:{fontWeight:500},children:["Your current spend exceeds $",a]}),". Continuing will immediately cause the following actions on the"," ",(0,t.jsxs)("span",{children:[(0,t.jsx)(U.Avatar,{size:20,style:{verticalAlign:"top"},teamId:m,title:u})," ",(0,t.jsx)("strong",{style:{fontWeight:500},children:u})]})," ","team:"]}):(0,t.jsxs)(t.Fragment,{children:["Continuing will set a spend amount of"," ",(0,t.jsxs)("strong",{style:{fontWeight:500},children:["$",a]})," for all projects in the"," ",(0,t.jsxs)("span",{children:[(0,t.jsx)(U.Avatar,{size:20,style:{verticalAlign:"top"},teamId:m,title:u})," ",(0,t.jsx)("strong",{style:{fontWeight:500},children:u})]})," ","team. If the amount is reached within a billing cycle the following actions will take place:"]}),[o,a,m,u]),f=(0,i.useCallback)(async e=>{e.preventDefault(),h(!0);try{await l()}catch{n()}finally{h(!1)}},[l,n,h]);return(0,t.jsx)(D.Modal.Modal,{active:s,onClickOutside:n,children:(0,t.jsxs)("form",{"data-testid":(0,j.tid)("spend-management","trigger-modal"),onSubmit:f,children:[(0,t.jsxs)(D.Modal.Body,{children:[(0,t.jsx)(D.Modal.Header,{children:(0,t.jsx)(D.Modal.Title,{children:"Spend Management"})}),p,(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial",style:{margin:"1em 0"},children:x.map(e=>(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-4 flex-initial",children:[(0,t.jsx)(B.CheckCircleFill,{size:22}),(0,t.jsx)("p",{className:"text-copy-14",children:e})]},e))}),(0,t.jsx)(D.Modal.Inset,{last:!0,children:(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-6 flex-initial",children:(0,t.jsx)("label",{children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:[(0,t.jsxs)("p",{className:"text-copy-14 text-gray-900",children:["Enter the team name"," ",(0,t.jsx)("strong",{style:{fontWeight:500,overflowWrap:"anywhere"},children:u})," ","to continue:"]}),(0,t.jsx)(R.Input,{"aria-label":"Team Name","data-testid":(0,j.tid)("spend-management","confirm-input"),disabled:g,name:"teamName",pattern:`\\s*${u}\\s*`,required:!0})]})})})})]}),(0,t.jsxs)(D.Modal.Actions,{children:[(0,t.jsx)(D.Modal.Action,{"data-testid":(0,j.tid)("spend-management","cancel-confirm-button"),onClick:n,type:"secondary",children:"Cancel"}),(0,t.jsx)(D.Modal.Action,{buttonType:"submit","data-testid":(0,j.tid)("spend-management","continue-button"),disabled:g,loading:g,type:"error",children:"Continue"})]})]})})}var z=e.i(9318197),G=e.i(9429910),V=e.i(8432052),W=e.i(6192817),H=e.i(6292193),Y=e.i(409125);let q={100:"var(--ds-red-800)",75:"var(--ds-amber-700)",0:"var(--ds-blue-700)"};function Z(e){let{disabled:i,onChange:s,value:a,handleSetUpdatedBudget:l}=e;return(0,t.jsxs)("label",{style:{cursor:"pointer"},children:[(0,t.jsx)("span",{className:"text-[14px] leading-[20px] font-medium",children:a?"Enabled":"Disabled"}),(0,t.jsx)(z.Spacer,{inline:!0,x:.5}),(0,t.jsx)(u.Toggle,{checked:a,disabled:i,onChange:function(){s(!a),l(!0)},size:"large"})]})}function K(e){let{budgetAmount:i,currentMonthSpend:s,handleSetBudgetAmount:a,handleSetPauseProjects:l,handleSetUpdatedBudget:n,handleSetWebhook:r,percentageBudgetUsed:d,pauseProjects:o=!0,prevMonthSpend:c,showPauseProjectsToggle:u,spendManagementEnabled:x,teamSlug:g,threeMonthAvgSpend:h,webhook:f}=e;return(0,t.jsxs)(V.EntityForm,{className:Y.default.detailsEntityForm,title:"",children:[(0,t.jsx)("div",{className:Y.default.detailsEntityTopSpacer}),(0,t.jsxs)(I.Entity,{children:[(0,t.jsx)(J,{dataTestId:"current-billing-cycle",dollarAmount:s,externalLinkPath:`/${g}/~/usage`,gaugeValue:i?d:0,title:"Current Billing Cycle"}),(0,t.jsx)("div",{className:Y.default.detailsEntityDivider}),(0,t.jsx)(J,{dataTestId:"previous-billing-cycle",dollarAmount:c,externalLinkPath:`/${g}/~/usage?range=previous-billing-cycle`,gaugeValue:i&&c?c/i*100:0,title:"Previous Billing Cycle"}),(0,t.jsx)("div",{className:Y.default.detailsEntityDivider}),(0,t.jsx)(J,{dataTestId:"average-monthly-spend",dollarAmount:h,externalLinkPath:`/${g}/~/usage?range=last-3-months`,gaugeValue:h&&i?h/i*100:0,title:"3 Month Average Spend",type:"3-month-avg"})]}),(0,t.jsxs)("div",{className:(0,p.default)("flex flex-row items-center justify-between flex-initial pt-4 h-[55px]",u?void 0:Y.default.budgetAmountStack,u?"pb-0":"pb-4"),children:[(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-1 flex-initial",children:[(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"Set amount"}),(0,t.jsx)(m.Tooltip,{delay:!1,maxWidth:"288px",padding:"6px 12px",position:"bottom",text:"Set the metered usage amount, including bandwidth, functions, and storage to trigger notifications and an optional webhook if the amount is reached within a billing cycle.",children:(0,t.jsx)(G.InformationFill,{})})]}),(0,t.jsx)(W.CurrencyInput,{"aria-label":"Spend Amount",currency:"usd","data-testid":(0,j.tid)("spend-management","amount-input-field"),disabled:!x,onChange:e=>{a(e?e/100:0),n(!!e)},placeholder:0,requireWholeNumbers:!0,required:!0,size:"small",value:i?100*i:null,width:"156px"})]}),u?(0,t.jsxs)("div",{className:(0,p.default)("flex flex-row items-center justify-between flex-initial pt-2 pb-4",Y.default.budgetAmountStack),children:[(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-1 flex-initial",children:[(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"Pause production deployments"}),(0,t.jsx)(m.Tooltip,{delay:!1,maxWidth:"288px",padding:"6px 12px",position:"bottom",text:"When enabled, production deployments for all projects on this team will be paused when the spend amount is reached.",children:(0,t.jsx)(G.InformationFill,{})})]}),(0,t.jsx)(Z,{disabled:!x,handleSetUpdatedBudget:n,onChange:l,value:o})]}):null,(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial py-4",children:[(0,t.jsxs)("p",{className:"text-copy-14",id:"spend-management-webhook-input",children:["Set a webhook URL, to receive a ",(0,t.jsx)(H.InlineCode,{children:"POST"})," request when the amount is reached. A ",(0,t.jsx)(H.InlineCode,{children:"POST"})," request will also be sent at the end of each billing cycle, which can be used to resume paused projects."]}),(0,t.jsx)(R.Input,{"aria-labelledby":"spend-management-webhook-input","data-testid":(0,j.tid)("spend-management","webhook-input-field"),disabled:!x,onChange:e=>{r(e.target.value),n(!!e.target.value)},placeholder:"https://my-app.com/webhooks",size:"small",value:f,width:"100%"})]})]})}function J(e){let{dollarAmount:i,dataTestId:s,externalLinkPath:a,gaugeValue:l,title:n,type:r}=e;return(0,t.jsx)(A.EntityField,{"data-testid":(0,j.tid)("spend-management",`${s}`),children:(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-between flex-initial",children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-1 flex-initial",children:[(0,t.jsx)("p",{className:"text-[12px] font-medium leading-[24px] text-gray-800",children:n}),"3-month-avg"===r&&null===i?(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-1 flex-initial",children:[(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"‒"}),(0,t.jsx)(m.Tooltip,{delay:!1,padding:"6px 12px",position:"bottom",text:"Insufficient historical usage data",children:(0,t.jsx)(G.InformationFill,{})})]}):(0,t.jsx)(g.Link,{external:!0,href:a,children:(0,t.jsxs)("p",{className:"text-[16px] leading-[24px] font-medium text-gray-1000",children:["$",i]})})]}),(0,t.jsx)(C.EntityThumbnail,{size:24,children:(0,t.jsx)(o.Gauge,{colors:q,size:"small",value:l})})]})})}var X=e.i(2032215);let Q={100:"var(--ds-red-800)",75:"var(--ds-amber-700)",0:"var(--ds-blue-700)"};function ee(){let{isReady:e,team:i}=(0,v.useTeam)(),{isReady:s,value:a}=(0,N.usePauseTeamProjectsFlag)(),{isLoading:l}=(0,w.default)(),{activeBudget:n,isLoading:r}=(0,T.useActiveBudget)(),{webhookUrl:d,isLoading:o}=(0,P.useBudgetWebhookUrl)(),{spend:c,isLoading:u}=(0,M.useSpend)();return e||l||r||o||s||u?i?(0,t.jsx)(ei,{budget:n,showPauseProjectsToggle:a??!1,spend:c,team:i,webhookUrl:d}):null:(0,t.jsx)(_.default,{height:108})}function et(e){let{error:i,canUpdateSpendManagement:s}=e;return i?.message?(0,t.jsx)(n.ErrorText,{children:(0,t.jsx)(l.Error,{error:i})}):s?(0,t.jsxs)("span",{children:["Learn more about"," ",(0,t.jsx)(g.Link,{external:!0,href:"/docs/spend-management",onClick:()=>b.analytics.track(y.AnalyticsEvent.SPEND_MANAGEMENT),variant:"highlight",children:"Spend Management"})]}):(0,t.jsx)("span",{children:"You need additional permissions to manage your team's spend management configuration."})}function ei(e){let{budget:l,team:n,webhookUrl:v,showPauseProjectsToggle:N,spend:T}=e,{can:M}=(0,w.default)(),[P,_]=(0,i.useState)(null),[B,U]=(0,i.useState)(!1),[D,R]=(0,i.useState)(!1),[z,G]=(0,i.useState)(!1),[V,W]=(0,i.useState)(!1),[H,q]=(0,i.useState)(0),[Z,J]=(0,i.useState)(""),[ee,ei]=(0,i.useState)(!1),[es,ea]=(0,i.useState)(!0),[el,en]=(0,i.useState)(0),[er,ed]=(0,i.useState)(0),[eo,ec]=(0,i.useState)(null),[eu,em]=(0,i.useState)(null),ex=M(S.Action.Update,S.Resource.Budget),eg=!l&&!D,eh=(0,x.useToasts)();(0,i.useEffect)(()=>{if(!T)return;let{currentSpend:e,avgSpend:t,prevMonthSpend:i}=T;en(e/100),null!==t&&t>=0&&ec(Math.ceil(t/100)),i>0&&ed(i/100)},[T]),(0,i.useEffect)(()=>{D?U(!0):(U(!1),q(0),J(""))},[D]),(0,i.useEffect)(()=>{l&&(R(!0),q(l.fixedBudget),ea(l.pauseProjects??!1))},[l]),(0,i.useEffect)(()=>{v?J(v):J("")},[v]);let ep=(0,i.useCallback)(async()=>{if(l?.id){try{await (0,F.disableBudget)(l.id,n.id),eh.success("Your Spend Management settings have been turned off.")}catch(e){_(e)}W(!1)}},[l,n.id,eh]),ef=(0,i.useCallback)(async()=>{W(!0),_(null);try{if(0===H)_({message:"Must have a spend amount set.",name:"spend_invalid"});else if(H<0)_({message:"Must have positive spend amount.",name:"spend_invalid"});else if(H>1e6)_({message:"Budget too high",name:"budget_invalid"});else{let e=await (0,E.createOrUpdateBudget)({webhookUrl:Z,type:"fixed",fixedBudget:H,pauseProjects:es},n.id);e.webhookSecret&&em(e.webhookSecret),eh.success("Your Spend Management settings have been updated.")}}catch(e){_(e)}finally{W(!1)}},[H,n.id,eh,Z,es]),ej=(0,i.useCallback)(async()=>{ee&&(W(!0),D?(await ef(),ei(!1),b.analytics.track(y.AnalyticsEvent.SPEND_MANAGEMENT_TOGGLE,{enabled:!0,teamId:n.id})):(await ep(),q(0),J(""),ei(!1),b.analytics.track(y.AnalyticsEvent.SPEND_MANAGEMENT_TOGGLE,{enabled:!1,teamId:n.id})))},[ee,D,ef,n.id,ep]),eb=`$${el} / ${H} (${(0,X.calculateBudgetPercentage)(el,H)}%)`,ey=H-el;return(0,t.jsxs)("div",{children:[(0,t.jsxs)(r.Fieldset,{disabled:!ex,children:[(0,t.jsxs)(a.FieldsetContent,{disabled:!ex,children:[(0,t.jsx)(O.FieldsetTitle,{id:k.PERSONAL_ACCOUNT_SETTINGS_NAVIGATION_TITLES.billing.spendManagement,children:k.PERSONAL_ACCOUNT_SETTINGS_NAVIGATION_TITLES.billing.spendManagement}),(0,t.jsxs)(c.FieldsetSubtitle,{children:["Set a spend amount towards"," ",(0,t.jsx)(g.Link,{href:"/docs/spend-management#what-does-spend-management-include",variant:"highlight",children:"metered resources"}),". Configure notifications, set a webhook, or choose to pause the production deployment for all your team’s projects when the amount is reached."]}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start flex-initial",children:[(0,t.jsx)(I.Entity,{actions:(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-2 flex-initial",children:[v?(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-1 flex-initial",children:[(0,t.jsx)(f.Webhook,{color:"gray-700"}),(0,t.jsx)("p",{className:`text-copy-14 text-gray-900 ${Y.default.webhookText}`,children:"Webhook"})]}):null,(0,t.jsx)(u.Toggle,{checked:D,"data-testid":(0,j.tid)("spend-management","toggle"),disabled:!ex,label:"toggle spend management",onChange:()=>{R(!D),ei(!0),ea(!D)},size:"large",stopPropagation:!0})]}),as:"button",checkbox:(0,t.jsx)(h.ChevronRight,{className:Y.default.chevron,color:"gray-700",size:20,style:{transition:"transform 200ms ease",transform:B?"rotate(90deg)":"rotate(0deg)"}}),className:(0,p.clsx)(Y.default.spendManagementEntity,{[Y.default.spendManagementEntityDetailsActive]:B}),"data-testid":(0,j.tid)("spend-management","button"),disabled:!ex,height:74,onClick:()=>{U(!B)},thumbnail:(0,t.jsx)(C.EntityThumbnail,{size:24,children:D?(0,t.jsx)(m.Tooltip,{position:"bottom",text:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("p",{className:"text-copy-14",children:["$",ey>0?ey:0]}),(0,t.jsx)("p",{className:"text-copy-14",children:"Remaining"})]}),children:(0,t.jsx)(o.Gauge,{colors:Q,size:"small",value:H?(0,X.calculateBudgetPercentage)(el,H):0})}):(0,t.jsx)(o.Gauge,{colors:Q,size:"small",value:0})}),children:(0,t.jsx)(A.EntityField,{description:D?"Spend Management Enabled":"Spend Management Disabled",height:40,title:D?eb:""})}),B?(0,t.jsx)(K,{budgetAmount:H,currentMonthSpend:el,handleSetBudgetAmount:q,handleSetPauseProjects:ea,handleSetUpdatedBudget:ei,handleSetWebhook:J,pauseProjects:es,percentageBudgetUsed:(0,X.calculateBudgetPercentage)(el,H),prevMonthSpend:er,showPauseProjectsToggle:N,spendManagementEnabled:D,teamSlug:n.slug,threeMonthAvgSpend:eo,webhook:Z}):null,(0,t.jsxs)("div",{className:"flex flex-row items-center justify-between flex-initial pt-4",children:[(0,t.jsx)(c.FieldsetSubtitle,{children:"Manage your notifications"}),(0,t.jsx)(s.Button,{Component:"a",href:`/${n.slug}/~/settings/notifications`,size:"small",type:"secondary",width:eg?80:100,children:"Manage"})]})]})]}),(0,t.jsxs)(d.FieldsetFooter,{disabled:!1,highlight:!ex,children:[(0,t.jsx)(d.FieldsetFooter.Status,{children:(0,t.jsx)(et,{canUpdateSpendManagement:ex,error:P})}),ex?(0,t.jsx)(d.FieldsetFooter.Actions,{children:(0,t.jsx)(s.Button,{"data-testid":(0,j.tid)("spend-management","save-button"),disabled:!ee,loading:V,onClick:()=>G(!0),size:"small",width:V?100:80,children:V?"Saving":"Save"})}):null]})]}),(0,t.jsx)($,{active:z,budgetAmount:H,hide:()=>{W(!1),G(!1)},pauseProjects:es,save:async()=>{await ej(),G(!1)},webhookConfigured:Z.length>0,willTriggerImmediately:ey<=0}),eu?(0,t.jsx)(L.FormAddWebhookModal,{onClose:()=>em(null),webhook:{secret:eu}}):null]})}e.s(["SpendManagement",()=>ee,"SpendManagementFieldSet",()=>ei],1640782)},5474546,e=>{e.v({hr:"fieldset-module__DpKbhG__hr"})},1392520,e=>{"use strict";var t=e.i(8711407),i=e.i(7137884),s=e.i(8517043),a=e.i(1232681),l=e.i(3895030),n=e.i(1906681),r=e.i(57106),d=e.i(1176592),o=e.i(4004502),c=e.i(6352514),u=e.i(119294),m=e.i(5338940),x=e.i(1717203),g=e.i(7557283),h=e.i(5903121),p=e.i(6450656),f=e.i(1649649),j=e.i(1877305),b=e.i(5807088),y=e.i(5474546);function v(){let{team:e}=(0,m.useTeam)(),{currency:v="USD"}=e?.billing??{},N=(0,x.default)(),{plan:w}=(0,f.useIsWebAnalyticsBilling)(),[S,A]=(0,d.useState)(null),{can:C}=N,I=C(g.Action.Update,g.Resource.WebAnalytics);return"pro"!==w?null:!e||N.isLoading?(0,t.jsx)(b.default,{}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(s.Fieldset,{disabled:!I,children:[(0,t.jsxs)(i.FieldsetContent,{disabled:!I,children:[(0,t.jsx)(j.FieldsetTitle,{children:"Web Analytics"}),(0,t.jsxs)(l.FieldsetSubtitle,{children:["Monitor the traffic to your project in real-time, including the number of visitors, the pages they view, and their origin."," ",I?(0,t.jsxs)(t.Fragment,{children:["Learn more about"," ",(0,t.jsx)(r.Link,{external:!0,href:"/docs/analytics",variant:"highlight",children:"Web Analytics"})]}):null]}),(0,t.jsx)("hr",{className:y.default.hr}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial",children:[(0,t.jsx)("div",{children:(0,t.jsxs)("h5",{className:"text-heading-16 whitespace-nowrap",children:["Web Analytics Plus"," ",(0,t.jsx)("span",{style:{color:"var(--accents-4)"},children:"(Add-on)"})]})}),(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:(0,p.withPricing)("{plusDescription}",{offering:"plus",currency:v})}),(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:[(0,t.jsx)(n.Toggle,{checked:!1,"data-testid":(0,o.tid)("billing","web-analytics","toggle"),onChange:()=>{u.analytics.track(c.AnalyticsEvent.ANALYTICS_UPSELL_CLICKED,{currentPlan:w,teamId:e.id,type:"billing"}),A("billing")},size:"large"}),(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"Enable"})]})]})]}),(0,t.jsx)(a.FieldsetFooter,{disabled:!1,highlight:!I,children:(0,t.jsx)(a.FieldsetFooter.Status,{children:(0,t.jsxs)("span",{children:["Learn more about"," ",(0,t.jsx)(r.Link,{external:!0,href:"/docs/analytics/limits-and-pricing",variant:"highlight",children:"Limits & Pricing"})," ","for Web Analytics."]})})})]}),(0,t.jsx)(h.UpgradeModal,{onClose:()=>A(null),source:S})]})}e.s(["BillingWebAnalytics",()=>v])},6339657,e=>{e.v({list:"index-module__i7X2-G__list"})},380805,e=>{"use strict";var t=e.i(8711407),i=e.i(8522580),s=e.i(7917902),a=e.i(364898),l=e.i(4496450),n=e.i(5164288);e.s(["useToggleSecurityPlus",0,e=>{let{team:r,mutate:d}=(0,s.useAccount)(),o={...function(e){let{team:s,refresh:a}=e,r=(0,t.jsxs)(t.Fragment,{children:["By disabling Security Plus, you will immediately loose access to advanced metrics. Firewall rules which use Security Plus features will be deactivated.",(0,t.jsx)("br",{}),(0,t.jsx)("br",{}),(0,t.jsx)(i.Note,{type:"warning",children:"Data collected while Security Plus was disabled will not be visible if you re-enable it."}),(0,t.jsx)("br",{})]}),d={name:"securityPlus",price:1e3,enable:async()=>{s&&(await (0,n.patchSecurityPlusConfiguration)({team:s,enableTeam:!0}),await a())},enableSteps:{confirm:{lineItems:[{name:"Security Plus",price:"from_invoice_item"}],nonProratedCustomCopy:(0,t.jsxs)(t.Fragment,{children:[" ","and your credit card will be charged ",(0,t.jsx)("b",{children:"immediately"}),"."]}),customCopy:(0,t.jsxs)(t.Fragment,{children:[" ","Charges for on-demand events will be billed to your credit card as accrued."]})}},disableSteps:{disable:{customDisableCopy:(0,t.jsxs)(t.Fragment,{children:[r,"Disabling will take effect now, regardless of your billing cycle."]})}},disable:async()=>{s&&(await (0,n.patchSecurityPlusConfiguration)({team:s,enableTeam:!1}),await a())}};return s?.billing?.plan==="enterprise"&&(0,l.isLegacyPlanIteration)(s?.billing?.planIteration)&&(d.disableSteps.disable.customDisableModal=(0,t.jsxs)(t.Fragment,{children:[r,"Please reach out to your account executive to disable Security Plus."]})),d}({team:r,source:e.analyticsEventSource,refresh:d}),...e,isEnabled:()=>null!==r&&(0,n.isSecurityPlusEnabled)({team:r})},{isEnabled:c,openEnableOrUpdateModal:u,openDisableModal:m,AddOnModal:x,formattedPrice:g}=(0,a.useTogglePaidAddOn)(o);return{addOn:o,isSecurityPlusEnabled:c,enableSecurityPlus:u,disableSecurityPlus:m,SecurityPlusModal:x,pricingCopy:`${g} / month`}}])},7383949,e=>{"use strict";var t=e.i(8711407),i=e.i(7137884),s=e.i(8517043),a=e.i(4597921),l=e.i(57106),n=e.i(1877305),r=e.i(9068719),d=e.i(9983553),o=e.i(4670733),c=e.i(7308098),u=e.i(364898),m=e.i(277234),x=e.i(4244280);let g=e=>async t=>{let{team:i}=t,s=i?new URLSearchParams({teamId:i.id}):"";return(0,m.fetchAPI)(`${x.API_STRIPE_MONITORING}?${s.toString()}`,{method:"PUT",body:JSON.stringify({monitoring:e}),throwOnHTTPError:!0})};var h=e.i(2175076);let p={surveyName:"Disable Monitoring User Feedback",surveySlug:"disable-monitoring-user-feedback",surveySteps:[{title:"Monitoring has been disabled",description:"Any reasons for disabling monitoring?",fields:[{type:"select",id:"reasons-why",label:"Any reasons for disabling monitoring?",selectMultiple:!0,options:[{id:"just-looking-around",label:"I was just looking around"},{id:"not-working-as-expected",label:"It is not working as expected"},{id:"missing-features",label:"Missing features"},{id:"too-expensive",label:"Too expensive"},{id:"prefer-another-product",label:"I prefer another product"},{id:"other",label:"Other (please explain on the next page)"}]}]},{title:"Monitoring has been disabled",fields:[{type:"text",id:"explanation-detailed",instructions:"Please add any other feedback you have.",label:"Enter feedback here",size:"long"},{type:"text",id:"email",instructions:"If you'd like to hear from our team, enter your email below.",label:"Enter email",size:"short"}]}]},f={name:"monitoring",price:1e3,enable:g(!0),disable:g(!1),enableSteps:{confirm:{lineItems:[{name:"Monitoring with 250k data points",price:"from_invoice_item"},{name:"On-Demand data points",shortDescription:(0,t.jsx)("span",{className:"text-sm text-gray-800",children:"Billed after 250k data points"}),price:120,priceDescriptor:"/ month per million data points"}],nonProratedCustomCopy:(0,t.jsxs)(t.Fragment,{children:[" ","and your credit card will be charged ",(0,t.jsx)("b",{children:"immediately"}),"."]})}},disableSteps:{disable:{customDisableCopy:"Disabling it will prevent your team members from accessing it in the dashboard. You will no longer be able to visualize your bandwidth, errors, performance, and traffic across projects."},exitSurvey:p}};var j=e.i(5568858),b=e.i(6333530),y=e.i(4450694),v=e.i(5338940),N=e.i(9477971),w=e.i(1360174),S=e.i(1176592),A=e.i(6318858),C=e.i(7957251),I=e.i(2064047),E=e.i(2504781),T=e.i(6881349),M=e.i(2107254),k=e.i(9736132),P=e.i(6339657),F=e.i(8042625),L=e.i(1574218);let _={name:"analytics",price:1e3,enable:function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return async t=>{let{addOnValue:i,team:s}=t;if(!i||!s)throw Error(L.IS_DEV?"`addOnValue` or `team` not found in `generateEnableOrDisableSpeedInsightFunction`":"Error enabling Speed Insights");await Promise.all(i.map(t=>{let{id:i}=t;return(0,m.fetchAPI)(`${x.API_SPEED_INSIGHTS_TOGGLE}${(0,F.encode)({projectId:i,teamId:s.id})}`,{method:"POST",body:{value:e},throwOnHTTPError:!0})}))}}(!0),enableSteps:{configure:{instructions:"Add at least one project to enable Speed Insights on.",content:function(e){let{addOnValue:i=[],setAddOnValue:s}=e,[a,l]=(0,S.useState)(!1),[n,r]=(0,S.useState)(""),d=(0,S.useCallback)(e=>{let t=e.target.value;(0,w.default)(()=>r(t),500)},[]),{data:o,isLoading:c}=(0,M.default)({search:n,latestDeployments:null},{});return(0,S.useEffect)(()=>{o?l(!1):l(!0)},[o]),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-3 flex-initial",children:[(0,t.jsxs)(T.Combobox,{clearable:!1,onChange:e=>{if(e&&o){let t=o.projects.find(t=>t.id===e);t&&s([...i,t])}},placeholder:"Search Projects…",value:n,children:[(0,t.jsx)(T.Combobox.Input,{disabled:c||a,onChange:d}),(0,t.jsx)(T.Combobox.List,{children:o?.projects.map(e=>{let s=i.some(t=>t.id===e.id);return(0,t.jsx)(T.Combobox.Option,{disabled:s,suffix:s?(0,t.jsx)(A.Check,{className:"ml-auto",size:20}):null,value:e.id,children:e.name},e.id)})})]}),i.length>0?(0,t.jsx)(I.Entity.List,{className:P.default.list,children:i.map(e=>(0,t.jsxs)(I.Entity,{padding:2,children:[(0,t.jsx)(I.Entity.Content,{fill:!0,title:(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-2 flex-initial pl-1",children:[(0,t.jsx)(k.FrameworkAvatar,{project:e}),(0,t.jsx)("p",{className:"text-[14px] leading-[20px] font-medium",children:e.name})]})}),(0,t.jsx)(I.Entity.Content,{title:(0,t.jsx)(E.Button,{"aria-label":`Remove project ${e.name}`,onClick:()=>{var t;return t=e.id,void s(i.filter(e=>e.id!==t))},shape:"circle",size:"small",svgOnly:!0,type:"tertiary",children:(0,t.jsx)(C.MinusCircle,{color:"gray-700"})})})]},e.id))}):null]})}},confirm:{lineItems:[],nonProratedCustomCopy:(0,t.jsxs)(t.Fragment,{children:[" ","and your credit card will be charged ",(0,t.jsx)("b",{children:"immediately"}),"."]})},postConfirmProjectList:{description:"Speed Insights was added to your plan. You can view your insights on the Speed Insights page for each of your projects.",ctaCopy:"View",ctaHrefBase:"/speed-insights"}}};var O=e.i(6000680);let B=e=>async t=>{let{team:i}=t,s=(0,F.encode)({teamId:i?.slug||i?.id,business:"vercel"});return(await (0,m.fetchAPI)(`${x.API_BILLING}/subscription/${e?"add-products":"remove-products"}${s}`,{method:"POST",body:JSON.stringify({productAliases:["hipaaAddon"]}),throwOnHTTPError:!0,returnStatus:!0})).body},U={name:"hipaaAddon",price:35e3,enable:B(!0),disable:B(!1),enableSteps:{confirm:{lineItems:[{name:"HIPAA BAA",price:"from_invoice_item"}],nonProratedCustomCopy:(0,t.jsxs)(t.Fragment,{children:[" ","and your credit card will be charged ",(0,t.jsx)("b",{children:"immediately"}),"."]}),customCopy:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("br",{}),(0,t.jsx)("br",{})," Your action confirms acceptance of Vercel's"," ",(0,t.jsx)(l.Link,{external:!0,href:"/legal/baa",variant:"highlight",children:"Business Associate Agreement"})," ","and related terms."]})},postConfirmConfiguration:{instructions:(0,t.jsx)(t.Fragment,{children:"You now have an active Business Associate Agreement (BAA) with Vercel."}),content:(0,t.jsx)(t.Fragment,{})}},disableSteps:{disable:{customDisableCopy:"Disabling will end your HIPAA Business Associate Agreement with Vercel. This will take effect at the end of your current billing period."}}},D=e=>async t=>{let{team:i}=t,s=(0,F.encode)({teamId:i?.slug||i?.id,business:"vercel"});return(await (0,m.fetchAPI)(`${x.API_BILLING}/subscription/${e?"add-products":"remove-products"}${s}`,{method:"POST",body:JSON.stringify({productAliases:["saml"]}),throwOnHTTPError:!0,returnStatus:!0})).body},R={name:"saml",price:3e4,enable:D(!0),disable:D(!1),enableSteps:{confirm:{lineItems:[{name:"SAML SSO",price:"from_invoice_item"}],nonProratedCustomCopy:(0,t.jsxs)(t.Fragment,{children:[" ","and your credit card will be charged ",(0,t.jsx)("b",{children:"immediately"}),"."]})},postConfirmConfiguration:{instructions:(0,t.jsx)(t.Fragment,{children:"You now have SAML SSO enabled for your team."}),content:(0,t.jsx)(t.Fragment,{})}},disableSteps:{disable:{customDisableCopy:"Disabling will remove SAML SSO access for your team. This will take effect at the end of your current billing period."}}};var $=e.i(6891161),z=e.i(8161149),G=e.i(3487134),V=e.i(6161994),W=e.i(2720056),H=e.i(9668517);let Y={name:"microfrontendsProject",price:25e3,enable:()=>Promise.resolve(),enableSteps:{confirm:{lineItems:[]}},disableSteps:{disable:{}}};function q(e){let{active:i,closeModal:s}=e,{data:a,isLoading:n}=(0,V.useMicrofrontendsGroups)(),r=(0,H.useTeamSlug)(),d=a?.groups.flatMap(e=>e.projects).sort((e,t)=>e.name.localeCompare(t.name))??[];return n?null:(0,t.jsxs)($.Modal.Modal,{active:i,onClickOutside:()=>s(),style:{maxHeight:"540px"},width:"540px",children:[(0,t.jsxs)($.Modal.Body,{children:[(0,t.jsx)($.Modal.Title,{children:"Microfrontends Projects"}),(0,t.jsxs)("div",{className:"flex flex-col gap-4 mt-4",children:[d.length>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("p",{className:"text-copy-14",children:["You have ",d.length," microfrontends project",1===d.length?"":"s",". 2 projects are included in your plan for free. Manage your microfrontends projects by visiting the settings page for each project."]}),(0,t.jsx)(I.Entity.List,{children:d.map(e=>(0,t.jsx)(I.Entity,{left:(0,t.jsx)(W.ProjectAvatar,{project:e,size:24}),right:(0,t.jsx)(l.ButtonLink,{href:`/${r}/${e.name}/settings/microfrontends`,type:"secondary",children:"View"}),children:e.name},e.id))})]}):null,0===d.length?(0,t.jsx)(z.EmptyState.Root,{className:"bg-background-200",description:"You have no microfrontends projects. 2 projects are included in your plan for free.",icon:(0,t.jsx)(G.Microfrontends,{size:20}),title:"No Microfrontends Projects",children:(0,t.jsx)(l.ButtonLink,{href:`/${r}/~/settings/microfrontends/new`,type:"secondary",children:"Create Microfrontends Group"})}):null]})]}),(0,t.jsx)($.Modal.Actions,{children:(0,t.jsx)($.Modal.Action,{onClick:s,type:"secondary",children:"Close"})})]})}var Z=e.i(1438473),K=e.i(7909933),J=e.i(6441512);let X={name:"bulkRedirect",price:5e3,enable:()=>Promise.resolve(),enableSteps:{confirm:{lineItems:[]}},disableSteps:{disable:{}}};function Q(e){let{active:i,closeModal:s}=e,{data:a,isLoading:n}=function(e,t){let{enabled:i,overWriteTeamSlug:s}=(void 0)??{},{isReady:a,team:l}=(0,v.useTeam)(s),n=a&&(i??!0);return(0,K.default)(()=>n?`/api/v2/dashboard/projects${(0,F.encode)({teamId:l?.id,bulkRedirects:"true"})}`:null,async e=>(0,m.fetchAPI)(e,{throwOnHTTPError:!0}),{revalidateOnFocus:!1,dedupingInterval:1e4,...void 0})}(),r=(0,H.useTeamSlug)(),d=a?.projects?.sort((e,t)=>e.name.localeCompare(t.name))??[];return n?null:(0,t.jsxs)($.Modal.Modal,{active:i,onClickOutside:()=>s(),style:{maxHeight:"540px"},width:"540px",children:[(0,t.jsxs)($.Modal.Body,{children:[(0,t.jsx)($.Modal.Title,{children:"Bulk Redirects Projects"}),(0,t.jsxs)("div",{className:"flex flex-col gap-4 mt-4",children:[d.length>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("p",{className:"text-copy-14",children:["You have ",d.length," bulk redirects project",1===d.length?"":"s",". Manage your bulk redirects projects by visiting the settings page for each project."]}),(0,t.jsx)(I.Entity.List,{children:d.map(e=>(0,t.jsx)(I.Entity,{left:(0,t.jsx)(W.ProjectAvatar,{project:e,size:24}),right:(0,t.jsx)(l.ButtonLink,{href:`/${r}/${e.name}/settings/advanced#bulk-redirects`,type:"secondary",children:"View"}),children:e.name},e.id))})]}):null,0===d.length?(0,t.jsx)(z.EmptyState.Root,{className:"bg-background-200",description:"You have no projects with additional bulk redirects configured.",icon:(0,t.jsx)(Z.ArrowRight,{size:20}),title:"No Projects with Additional Bulk Redirects Configured",children:(0,t.jsx)(l.ButtonLink,{href:`/${r}`,type:"secondary",children:"View Projects"})}):null]})]}),(0,t.jsx)($.Modal.Actions,{children:(0,t.jsx)($.Modal.Action,{onClick:s,type:"secondary",children:"Close"})})]})}var ee=e.i(380805),et=e.i(2789918),ei=e.i(5819220),es=e.i(979715),ea=e.i(8432052),el=e.i(7807066),en=e.i(5169576),er=e.i(5468328),ed=e.i(6450656),eo=e.i(7719396),ec=e.i(603174),eu=e.i(9722978);function em(e){let{children:i,addOn:s}=e,[a,l]=(0,S.useState)(!1);return(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start flex-initial",children:[(0,t.jsx)(ei.Entity,{as:"button",className:"p-2",checkbox:(0,t.jsx)(el.ChevronRight,{color:"gray-700",size:16,style:{transition:"transform 200ms ease",transform:a?"rotate(90deg)":"rotate(0deg)"}}),onClick:()=>{l(e=>!e),a||(0,eo.trackAddOnEvent)({eventName:"more_details",addOn:s,source:"billing-settings-add-ons"})},children:(0,t.jsx)(es.EntityField,{title:"More Details"})}),a?(0,t.jsx)(ea.EntityForm,{className:ec.default.innerDropdown,title:"",children:i}):null]})}function ex(){let e=[{included:{content:(0,ed.withPricing)("{reportingWindow} viewable history"),tooltip:(0,ed.withPricing)("See data from the past {reportingWindow}.")},addon:{content:(0,ed.withPricing)("{reportingWindow} viewable history",{offering:"plus"}),tooltip:(0,ed.withPricing)("See data from the past {reportingWindow}.",{offering:"plus"})}},{included:{content:"Custom Events with 2 properties",tooltip:"Track custom events to gain better insights."},addon:{content:"Custom Events with 8 properties",tooltip:"Track custom events to gain better insights."}},{included:{content:"-"},addon:{content:"UTM Parameters support",tooltip:"Filter visitors according to the UTM parameters."}}];return(0,t.jsxs)(em,{addOn:"webAnalytics",children:[(0,t.jsxs)("div",{className:(0,eu.default)("flex flex-row items-stretch justify-start flex-initial",ec.default.webAnalyticsTableRow),children:[(0,t.jsx)("p",{className:`text-[14px] leading-[20px] font-medium ${ec.default.webAnalyticsTableCell}`,children:"Included in your plan"}),(0,t.jsx)("p",{className:`text-[14px] leading-[20px] font-medium ${ec.default.webAnalyticsTableCell}`,children:"Web Analytics Plus"})]}),e.map((e,i)=>{let{included:s,addon:a}=e;return(0,t.jsxs)("div",{className:(0,eu.default)("flex flex-row items-stretch justify-start flex-initial",ec.default.webAnalyticsTableRow),children:[s.tooltip?(0,t.jsx)(er.Tooltip,{boxAlign:"left",className:ec.default.webAnalyticsTableCell,position:"bottom",text:s.tooltip,children:(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-2 flex-initial",children:[(0,t.jsx)("p",{className:"text-copy-14",children:s.content}),(0,t.jsx)(en.Information,{})]})}):(0,t.jsx)("div",{className:(0,eu.default)("flex flex-col items-stretch justify-start flex-initial",ec.default.webAnalyticsTableCell),children:(0,t.jsx)("p",{className:"text-copy-14",children:s.content})}),a.tooltip?(0,t.jsx)(er.Tooltip,{boxAlign:"left",className:ec.default.webAnalyticsTableCell,position:"bottom",text:a.tooltip,children:(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-2 flex-initial",children:[(0,t.jsx)("p",{className:"text-copy-14",children:a.content}),(0,t.jsx)(en.Information,{})]})}):(0,t.jsx)("div",{className:(0,eu.default)("flex flex-col items-stretch justify-start flex-initial",ec.default.webAnalyticsTableCell),children:(0,t.jsx)("p",{className:"text-copy-14",children:a.content})})]},i)})]})}function eg(e){let{team:m}=e,x=m.billing?.plan,g=m.billing?.planIteration,p=m.billing?.plan==="hobby",w="pro"===x&&"plus"===g,A=(0,a.useServerFlag)("show-security-plus-toggle",!1),{isADPEnabled:C,enableADP:I,disableADP:E,ADPModal:T,pricingCopy:M}=(0,r.useToggleAdvancedDeploymentProtection)("billing-settings-add-ons"),{isMonitoringEnabled:k,enableMonitoring:P,disableMonitoring:F,MonitoringModal:L,pricingCopy:B}=(e=>{let t=(0,h.useMonitoringSettings)(),{value:i}=(0,o.useMonitoringExitSurveyFlag)();i||delete f.disableSteps.exitSurvey;let s={...f,analyticsEventSource:e,isEnabled:e=>(0,c.getMonitoringEnabled)(e,t.data)},{isEnabled:a,openEnableOrUpdateModal:l,openDisableModal:n,AddOnModal:r,formattedPrice:d}=(0,u.useTogglePaidAddOn)(s);return{addOn:s,isMonitoringEnabled:a,enableMonitoring:l,disableMonitoring:n,MonitoringModal:r,pricingCopy:`${d} / month`}})("billing-settings-add-ons"),{isObservabilityPlusEnabled:D,enableObservabilityPlus:$,disableObservabilityPlus:z,ObservabilityPlusModal:G,pricingCopy:V,configureUIText:W}=(0,j.useToggleObservabilityPlus)({analyticsEventSource:"billing-settings-add-ons"}),{isWebAnalyticsPlusEnabled:H,enableWebAnalyticsPlus:Z,disableWebAnalyticsPlus:K,WebAnalyticsPlusModal:ei,pricingCopy:es}=(0,O.useToggleWebAnalyticsPlus)({source:"billing-settings-add-ons"}),ea=(e=>{let{team:i}=(0,v.useTeam)(),{data:s}=(0,y.useSpeedInsightsEnabledProjects)(),a={..._,analyticsEventSource:e,isEnabled:e=>(s?.projects.length??0)>0||!!e?.enabledInvoiceItems?.analytics?.enabled,enableSteps:{..._.enableSteps,postConfirmConfiguration:{instructions:null,content:(0,t.jsx)(N.ProjectList,{addOn:"analytics",ctaCopy:"View",ctaHrefBase:"/speed-insights",description:"The following project(s) have Speed Insights enabled. To add another project, navigate to your project's Speed Insights page.",team:i})}},disableSteps:{disable:{customDisableModal:(0,t.jsx)(N.ProjectList,{addOn:"analytics",ctaCopy:"View",ctaHrefBase:"/speed-insights",description:"To remove the add-on, visit the Speed Insights page for each of your enabled projects.",team:i})}}},{isEnabled:l,openEnableOrUpdateModal:n,openDisableModal:r,AddOnModal:d,formattedPrice:o}=(0,u.useTogglePaidAddOn)(a);return{addOn:a,isSpeedInsightsEnabled:l,enableSpeedInsights:n,disableSpeedInsights:r,SpeedInsightsModal:d,pricingCopy:`${o} / month per project`}})("billing-settings-add-ons"),el=(0,d.useToggleConcurrentBuilds)("billing-settings-add-ons"),en=(0,b.useTogglePreviewDeploymentSuffix)("billing-settings-add-ons"),{isSamlSsoAddonEnabled:er,enableSamlSsoAddon:ed,disableSamlSsoAddon:eo,SamlSsoAddonModal:eu,pricingCopy:em}=(e=>{let{source:t,skipPostConfirm:i,onStart:s,onClose:a,onSuccess:l}=e,n={...R,onStart:s,onClose:a,onSuccess:l,analyticsEventSource:t};i&&delete n.enableSteps.postConfirmProjectList;let{isEnabled:r,openEnableOrUpdateModal:d,openDisableModal:o,AddOnModal:c,formattedPrice:m}=(0,u.useTogglePaidAddOn)(n);return{addOn:n,isSamlSsoAddonEnabled:r,enableSamlSsoAddon:d,disableSamlSsoAddon:o,SamlSsoAddonModal:c,pricingCopy:`${m} / month`}})({source:"billing-settings-add-ons"}),{isHipaaAddonEnabled:eg,enableHipaaAddon:eh,disableHipaaAddon:ep,HipaaAddonModal:ef,pricingCopy:ej}=(e=>{let{source:t,skipPostConfirm:i,onStart:s,onClose:a,onSuccess:l}=e,n={...U,onStart:s,onClose:a,onSuccess:l,analyticsEventSource:t};i&&delete n.enableSteps.postConfirmProjectList;let{isEnabled:r,openEnableOrUpdateModal:d,openDisableModal:o,AddOnModal:c,formattedPrice:m}=(0,u.useTogglePaidAddOn)(n);return{addOn:n,isHipaaAddonEnabled:r,enableHipaaAddon:d,disableHipaaAddon:o,HipaaAddonModal:c,pricingCopy:`${m} / month`}})({source:"billing-settings-add-ons"}),{enableMicrofrontends:eb,MicrofrontendsModal:ey,pricingCopy:ev}=(e=>{let{team:i}=(0,v.useTeam)(),s={...Y,analyticsEventSource:e},{formattedPrice:a}=(0,u.useTogglePaidAddOn)(s),{MicrofrontendsModal:l,viewMicrofrontendsModal:n}=function(){let[e,i]=(0,S.useState)(!1),s=(0,S.useCallback)(()=>{i(!1)},[i]);return{MicrofrontendsModal:(0,S.useMemo)(()=>(0,t.jsx)(q,{active:e,closeModal:s}),[e,s]),viewMicrofrontendsModal:(0,S.useCallback)(()=>{i(!0)},[i])}}();return{addOn:s,isMicrofrontendsEnabled:!0,enableMicrofrontends:n,disableMicrofrontends:n,MicrofrontendsModal:l,pricingCopy:`${a} / month per project`}})("billing-settings-add-ons"),{isBulkRedirectsEnabled:eN,enableBulkRedirects:ew,BulkRedirectsModal:eS,pricingCopy:eA}=(e=>{let i={...X,analyticsEventSource:e},{formattedPrice:s}=(0,u.useTogglePaidAddOn)(i),{BulkRedirectsModal:l,viewBulkRedirectsModal:n}=function(){let[e,i]=(0,S.useState)(!1),s=(0,S.useCallback)(()=>{i(!1)},[i]);return{BulkRedirectsModal:(0,S.useMemo)(()=>(0,t.jsx)(Q,{active:e,closeModal:s}),[e,s]),viewBulkRedirectsModal:(0,S.useCallback)(()=>{i(!0)},[i])}}(),r=(0,a.useServerFlag)("enable-bulk-redirects-v1",!1),{data:d}=(0,J.useBulkRedirectsSettings)();return{addOn:i,isBulkRedirectsEnabled:r,enableBulkRedirects:n,disableBulkRedirects:n,BulkRedirectsModal:l,pricingCopy:`${s} / month / additional ${(d?.chunkSize??25e3).toLocaleString()} redirects`}})("billing-settings-add-ons"),{isSecurityPlusEnabled:eC,enableSecurityPlus:eI,disableSecurityPlus:eE,SecurityPlusModal:eT,pricingCopy:eM}=(0,ee.useToggleSecurityPlus)({analyticsEventSource:"billing-settings-add-ons"});return(0,t.jsx)("div",{children:(0,t.jsx)(s.Fieldset,{children:(0,t.jsxs)(i.FieldsetContent,{className:"!pb-0",children:[(0,t.jsx)(n.FieldsetTitle,{children:"Add-Ons"}),(0,t.jsx)("hr",{className:"my-6 -mx-6"}),(0,t.jsxs)("div",{className:ec.default.categorySection,children:[(0,t.jsx)("h3",{className:"text-heading-16",children:"Analytics"}),(0,t.jsxs)("div",{className:"flex flex-col divide-y divide-gray-alpha-400",children:[(0,t.jsx)(et.PaidAddOn,{addOn:"analytics",disable:ea.disableSpeedInsights,enableOrUpdate:ea.enableSpeedInsights,isEnabled:ea.isSpeedInsightsEnabled,modal:ea.SpeedInsightsModal,pricingCopy:ea.pricingCopy,team:m,allowUpgrade:!0}),(0,t.jsx)(et.PaidAddOn,{addOn:"observabilityBase",configureUIText:W,disable:z,enableOrUpdate:$,isEnabled:D,modal:G,pricingCopy:V,team:m,allowUpgrade:!0}),(0,t.jsx)(et.PaidAddOn,{addOn:"webAnalytics",disable:K,enableOrUpdate:Z,isEnabled:H,modal:ei,pricingCopy:es,team:m,allowUpgrade:!0,children:(0,t.jsx)(ex,{})})]})]}),(0,t.jsx)("hr",{className:"mt-4 mb-6 -mx-6"}),(0,t.jsxs)("div",{className:ec.default.categorySection,children:[(0,t.jsx)("h3",{className:"text-heading-16",children:"Build & Deployment"}),(0,t.jsxs)("div",{className:"flex flex-col divide-y divide-gray-alpha-400",children:[(0,t.jsx)(et.PaidAddOn,{addOn:"passwordProtection",disable:E,enableOrUpdate:I,isEnabled:C,modal:T,pricingCopy:M,team:m,allowUpgrade:!0}),w&&!el.isConcurrentBuildsEnabled||p?null:(0,t.jsx)(et.PaidAddOn,{addOn:"concurrentBuilds",disable:el.disableConcurrentBuilds,enableOrUpdate:el.enableConcurrentBuilds,isEnabled:el.isConcurrentBuildsEnabled,modal:el.ConcurrentBuildsModal,pricingCopy:el.pricingCopy,team:m,allowUpgrade:!0}),(0,t.jsx)(et.PaidAddOn,{addOn:"previewDeploymentSuffix",disable:en.disablePreviewDeploymentSuffix,enableOrUpdate:en.enablePreviewDeploymentSuffix,isEnabled:en.isPreviewDeploymentSuffixEnabled,modal:en.PreviewDeploymentSuffixModal,pricingCopy:en.pricingCopy,team:m,allowUpgrade:!0}),k?(0,t.jsx)(et.PaidAddOn,{addOn:"monitoring",disable:F,enableOrUpdate:P,isEnabled:k,modal:L,pricingCopy:B,team:m,allowUpgrade:!0}):null,(0,t.jsx)(et.PaidAddOn,{addOn:"microfrontendsProject",disable:eb,enableOrUpdate:eb,isEnabled:!0,modal:ey,pricingCopy:ev,team:m,allowUpgrade:!0,showEnableDisableToggle:!1}),eN?(0,t.jsx)(et.PaidAddOn,{addOn:"bulkRedirect",disable:ew,enableOrUpdate:ew,isEnabled:!0,modal:eS,pricingCopy:eA,team:m,allowUpgrade:!0,showEnableDisableToggle:!1}):null]})]}),A?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("hr",{className:"mt-4 mb-6 -mx-6"}),(0,t.jsxs)("div",{className:ec.default.categorySection,children:[(0,t.jsx)("h3",{className:"text-heading-16",children:"Security"}),(0,t.jsx)("div",{className:"flex flex-col divide-y divide-gray-alpha-400",children:(0,t.jsx)(et.PaidAddOn,{addOn:"securityPlus",disable:eE,enableOrUpdate:eI,isEnabled:eC,modal:eT,pricingCopy:eM,team:m,allowUpgrade:!0})})]})]}):null,w?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("hr",{className:"mt-4 mb-6 -mx-6"}),(0,t.jsxs)("div",{className:ec.default.categorySection,children:[(0,t.jsx)("h3",{className:"text-heading-16",children:"Enterprise"}),(0,t.jsxs)("div",{className:"flex flex-col divide-y divide-gray-alpha-400",children:[(0,t.jsx)(et.PaidAddOn,{addOn:"hipaaAddon",disable:ep,enableOrUpdate:eh,isEnabled:eg,modal:ef,pricingCopy:ej,team:m,allowUpgrade:!0,descriptionOverride:eg?(0,t.jsxs)(t.Fragment,{children:[m.name," has an active"," ",(0,t.jsx)(l.Link,{external:!0,href:"/legal/baa",variant:"highlight",children:"Business Associate Agreement (BAA)"})," ","with Vercel."]}):"Enter into a Business Associate Agreement (BAA) with Vercel to enable storing, processing, or transmitting Protected Health Information (PHI) in compliance with HIPAA."}),(0,t.jsx)(et.PaidAddOn,{addOn:"saml",disable:eo,enableOrUpdate:ed,isEnabled:er,modal:eu,pricingCopy:em,team:m,allowUpgrade:!0})]})]})]}):null]})})})}e.s(["PaidAddOns",()=>eg],7383949)},3326095,e=>{"use strict";var t=e.i(8711407),i=e.i(1176592),s=e.i(7432042),a=e.i(3306538),l=e.i(2504781),n=e.i(7137884),r=e.i(4030453),d=e.i(5063443),o=e.i(8517043),c=e.i(1232681),u=e.i(6891161),m=e.i(8522580),x=e.i(5255926),g=e.i(3895030),h=e.i(5468328),p=e.i(455575),f=e.i(57106),j=e.i(5338940),b=e.i(277234),y=e.i(4244280),v=e.i(1717203),N=e.i(7557283),w=e.i(119294),S=e.i(6352514),A=e.i(199192),C=e.i(2988836),I=e.i(4860345),E=e.i(1877305),T=e.i(9089592),M=e.i(4956623),k=e.i(9789132),P=e.i(7909933),F=e.i(4697349);let L=(0,F.createServerReference)("401889157f99e222bd2e66bc6245ac9993863f332f",F.callServer,void 0,F.findSourceMapURL,"getImageOptimizationPrices");var _=e.i(4496450);let O=e=>{let t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e);return t.endsWith(".00")?t.slice(0,-3):t},B=e=>{let t=new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e),i=t.endsWith(".00")?t.slice(0,-3):t;return`${i} MIU`};function U(e){let{loading:i,errorLoading:s,desc:a,tooltip:l,cost:n,format:r}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("p",{className:"text-copy-14 text-gray-900 flex items-center gap-1",children:[a,(0,t.jsx)(h.Tooltip,{text:l,children:(0,t.jsx)(C.InformationFillSmall,{color:"gray-900"})})]}),s?(0,t.jsx)("p",{className:"text-copy-14 text-gray-900 text-right",children:"-"}):i||void 0===n?(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsx)(x.Skeleton,{height:10,width:35})}):(0,t.jsx)("p",{className:"text-copy-14 text-gray-900 text-right",children:r(n)})]})}function D(e){let{now:i,team:a}=e,l=new Date(i-(0,s.default)("1d")),n=new Date(i-(0,s.default)("31d")),r={dedupingInterval:(0,s.default)("1d")},d=a?.id||void 0,o=(0,P.default)(d??null,L,{dedupingInterval:(0,s.default)("1h")}),c=a?.billing?.plan!=="enterprise"||(0,_.isLegacyPlanIteration)(a.billing.planIteration)?O:B,u=n.toISOString(),g=l.toISOString(),h=(0,T.useLegacyImageUsage)({teamId:d,from:u,to:g}),p=(0,k.getOldPriceEstimate)(h.data,a?.billing?.plan),f=(0,I.useNewUsageMetrics)({metric:"image_transformations_preview",teamId:d,from:n.toISOString(),to:l.toISOString(),format:"scalar",views:{count:{groupBy:["billableRegion"]}},userAgent:"vercel-site.usage-estimate.image-transformations-preview"},r),j=(0,I.useNewUsageMetrics)({metric:"data_cache_reads",teamId:d,from:n.toISOString(),to:l.toISOString(),filterBy:{origin:["IMAGE_OPTIMIZATION_PREVIEW"]},format:"scalar",views:{count:{groupBy:["billableRegion"]}},userAgent:"vercel-site.usage-estimate.image-cache-reads"},r),b=(0,I.useNewUsageMetrics)({metric:"data_cache_writes",teamId:d,from:n.toISOString(),to:l.toISOString(),filterBy:{origin:["IMAGE_OPTIMIZATION_PREVIEW"]},format:"scalar",views:{count:{groupBy:["billableRegion"]}},userAgent:"vercel-site.usage-estimate.image-cache-writes"},r),{newPrice:y,imageOptimizationTransformation:v,imageOptimizationCacheRead:N,imageOptimizationCacheWrite:w}=(0,M.getNewPriceEstimate)(o.data,f.data,j.data,b.data,a?.billing?.plan),S=o.isLoading||f.isLoading||j.isLoading||b.isLoading,C=!!(o.error||f.error||j.error||b.error);return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"mt-2 flex flex-col gap-2",children:[C||h.error?(0,t.jsx)(m.Note,{type:"error",className:"-mx-2",children:"Failed to load estimate. Please try again later."}):null,(0,t.jsxs)("details",{className:"group -mx-2 overflow-hidden rounded border ",children:[(0,t.jsxs)("summary",{className:"flex cursor-pointer list-none items-center justify-between p-3 transition-opacity hover:opacity-80 [&::-webkit-details-marker]:hidden",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"transition-transform group-open:rotate-90",children:(0,t.jsx)(A.ChevronRightSmall,{})}),(0,t.jsx)("p",{className:"text-[14px] leading-[20px] font-medium text-gray-1000",children:"New Cost Estimate*"})]}),(0,t.jsx)("p",{className:"text-[14px] leading-[20px] font-medium text-gray-1000 flex items-center gap-1",children:C?(0,t.jsx)(t.Fragment,{children:"-"}):S||void 0===y?(0,t.jsx)(x.Skeleton,{height:18,width:30}):`~ ${c(y)}`})]}),(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:"col-span-2 border-t bg-background-100 p-3 pl-9 tabular-nums space-y-2",children:(0,t.jsxs)("div",{className:"grid grid-cols-[2fr,1fr] gap-x-4 gap-y-1",children:[(0,t.jsx)(U,{loading:o.isLoading||f.isLoading,errorLoading:!!(o.error||f.error),cost:v,desc:"Image Transformations",format:c,tooltip:"Incurred on cache MISS or STALE"}),(0,t.jsx)(U,{loading:o.isLoading||j.isLoading,errorLoading:!!(o.error||j.error),cost:N,desc:"Image Cache Reads",format:c,tooltip:"Incurred on cache HIT (global only)"}),(0,t.jsx)(U,{loading:o.isLoading||b.isLoading,errorLoading:!!(o.error||b.error),cost:w,desc:"Image Cache Writes",format:c,tooltip:"Incurred on cache MISS or STALE"})]})})})]}),(0,t.jsxs)("details",{className:"group -mx-2 overflow-hidden rounded border",children:[(0,t.jsxs)("summary",{className:"flex cursor-pointer list-none items-center justify-between bg-background-200 p-3 text-gray-1000 transition-opacity hover:opacity-80 dark:text-gray-900 [&::-webkit-details-marker]:hidden",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"transition-transform group-open:rotate-90",children:(0,t.jsx)(A.ChevronRightSmall,{})}),(0,t.jsx)("p",{className:"text-[14px] leading-[20px] font-medium text-inherit",children:"Old Cost Estimate*"})]}),(0,t.jsx)("p",{className:"text-[14px] leading-[20px] font-medium text-inherit flex items-center gap-1",children:void 0===p?(0,t.jsx)(x.Skeleton,{height:18,width:30}):`~ ${c(p)}`})]}),(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:"col-span-2 border-t bg-background-200 p-3 pl-9 tabular-nums space-y-2",children:(0,t.jsx)("div",{className:"grid grid-cols-[2fr,1fr] gap-x-4 gap-y-1",children:(0,t.jsx)(U,{loading:h.isLoading,errorLoading:!!h.error,cost:p,desc:"Source Images",format:c,tooltip:"Unique Source Images"})})})})]}),(0,t.jsx)("p",{className:"text-copy-14 text-gray-800 mt-2",children:"* Price estimate is based on your team's activity over the last 30 days and may not reflect current or actual usage."}),(0,t.jsx)("p",{className:"text-copy-14 text-gray-800 mt-2",children:"By clicking to accept, you agree to the new pricing for this product, notwithstanding any terms in your written agreement, and authorize Vercel to invoice you for any additional fees incurred by your use after the change."}),a?.billing?.plan==="enterprise"&&(0,_.isLegacyPlanIteration)(a.billing.planIteration)?(0,t.jsx)(m.Note,{className:"-mx-2 mt-2",type:"cyan",children:"To enable, please contact your account executive."}):null]})})}function R(e){let{isDisabled:i,error:s}=e;return s?.message?(0,t.jsx)(d.ErrorText,{children:(0,t.jsx)(r.Error,{error:s})}):i?(0,t.jsx)("span",{children:"You need additional permissions to manage your team's Image Optimization price."}):(0,t.jsxs)("span",{children:["Learn more about"," ",(0,t.jsx)(f.Link,{external:!0,href:"https://vercel.com/docs/image-optimization",onClick:()=>w.analytics.track(S.AnalyticsEvent.IMAGE_OPTIMIZATION_NEW_PRICE_LEARN_MORE),variant:"highlight",children:"Image Optimization"})]})}function $(){let{team:e,isReady:r,mutate:d}=(0,j.useTeam)(),{can:x}=(0,v.default)(),h=x(N.Action.Update,N.Resource.Team),A=x(N.Action.Update,N.Resource.ImageOptimizationNewPrice),C=r&&h&&A,I=!!e?.enableImageOptimizationNewPrice,T=(0,p.useToasts)(),[M,k]=(0,i.useState)(null),[P,F]=(0,i.useState)(!1),[L,O]=(0,i.useState)(!1),[B,U]=(0,i.useState)(Date.now());if((0,i.useEffect)(()=>{let e="#image-optimization-new-price";window.location.hash===e&&document.querySelector(e)?.scrollIntoView()},[]),e?.billing?.plan==="hobby")return null;let $=r&&e?.enableImageOptimizationNewPrice;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(o.Fieldset,{disabled:!C,children:[(0,t.jsxs)(n.FieldsetContent,{disabled:!C,children:[(0,t.jsx)(E.FieldsetTitle,{suffix:$?void 0:(0,t.jsx)(a.Badge,{variant:"teal-subtle",children:"New Pricing available"}),children:"Image Optimization"}),(0,t.jsx)(g.FieldsetSubtitle,{children:"On-demand image optimization for device-specific adjustments, edge caching, and format conversion for optimal performance."}),$?(0,t.jsxs)(m.Note,{type:"secondary",children:[(0,t.jsx)("strong",{className:"font-semibold",children:"New pricing enabled"}),(0,t.jsx)("br",{}),"You are using the new pricing model based on image transformations, cache reads, and cache writes."]}):(0,t.jsxs)(m.Note,{action:(0,t.jsx)(l.Button,{className:"mr-2",disabled:!C||I,loading:L,onClick:()=>{Date.now()-B>(0,s.default)("1h")&&U(Date.now()),F(!0)},children:"Review Cost Estimate"}),children:[(0,t.jsx)("strong",{className:"font-semibold",children:"Move to the new pricing"}),(0,t.jsx)("br",{}),"See your cost estimate and move to the new pricing, based on image transformations, cache reads, and cache writes."]})]}),(0,t.jsx)(c.FieldsetFooter,{disabled:!1,highlight:!C,children:(0,t.jsx)(c.FieldsetFooter.Status,{children:(0,t.jsx)(R,{error:M,isDisabled:!C})})})]}),(0,t.jsxs)(u.Modal.Modal,{active:P,onClickOutside:()=>{w.analytics.track(S.AnalyticsEvent.IMAGE_OPTIMIZATION_NEW_PRICE_CONFIRMATION_CLOSE),F(!1)},width:"500px",children:[(0,t.jsxs)(u.Modal.Body,{className:"tailwind",children:[(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-initial modal-content",children:(0,t.jsx)(u.Modal.Title,{children:"Review Image Optimization Pricing"})}),(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsxs)("p",{className:"py-2",children:["Move to our new pricing model, which charges for image transformations, cache reads, and cache writes, instead of source images."," ",(0,t.jsx)(f.Link,{external:!0,href:"https://vercel.com/docs/image-optimization/limits-and-pricing",variant:"highlight",children:"Learn more"})]}),(0,t.jsx)(D,{now:B,team:e})]})]}),(0,t.jsxs)(u.Modal.Actions,{children:[(0,t.jsx)(u.Modal.Action,{onClick:async()=>{w.analytics.track(S.AnalyticsEvent.IMAGE_OPTIMIZATION_NEW_PRICE_CONFIRMATION_CANCEL),await d(),F(!1)},type:"secondary",children:"Cancel"}),(0,t.jsx)(u.Modal.Action,{disabled:e?.billing?.plan==="enterprise"&&(0,_.isLegacyPlanIteration)(e.billing.planIteration),loading:L,onClick:async()=>{O(!0);try{await (0,b.fetchAPI)(`${y.API_TEAMS}/${e?.id||""}`,{throwOnHTTPError:!0,method:"PATCH",body:{enableImageOptimizationNewPrice:!0}}),T.success("New pricing enabled successfully")}catch(e){k(e)}finally{await d(),O(!1),F(!1),w.analytics.track(S.AnalyticsEvent.IMAGE_OPTIMIZATION_NEW_PRICE_ENABLED,{enabled:!0})}},children:"Accept"})]})]})]})}e.s(["ImageOptimizationNewPrice",()=>$],3326095)},8837189,e=>{"use strict";var t=e.i(8711407),i=e.i(1176592),s=e.i(7137884),a=e.i(8517043),l=e.i(1232681),n=e.i(3895030),r=e.i(1906681),d=e.i(455575),o=e.i(57106),c=e.i(5338940),u=e.i(1717203),m=e.i(7557283),x=e.i(4004502),g=e.i(9171423),h=e.i(4244280),p=e.i(8248823);async function f(e){let{settings:t,teamId:i}=e;try{let e=await (0,g.fetchApi)(`${h.API_INTEGRATION_CONTROLLER}/marketplace/${encodeURIComponent(i)}/settings`,{method:"PATCH",body:t,throwOnHTTPError:!0});if(e&&"object"==typeof e)return{kind:"ok",settings:e.settings};throw Error("Failed to update marketplace settings")}catch(e){return{kind:"error",error:(0,p.normalizeError)(e)}}}var j=e.i(6214931),b=e.i(6468432),y=e.i(1900289),v=e.i(5807088),N=e.i(1877305);function w(){let{isLoading:e,team:i}=(0,c.useTeam)(),{isLoading:s,data:a}=(0,y.useMarketplaceSettings)();return e||(0,b.isEnterprise)(i)?e||s?(0,t.jsx)(v.default,{}):(0,t.jsx)(S,{settings:a}):null}function S(e){let{settings:g}=e,h=(0,d.useToasts)(),{team:p,isLoading:y}=(0,c.useTeam)(),{can:w,isLoading:S}=(0,u.default)(),[A,C]=(0,i.useState)(g?.bypassCardGate??!1),I=w(m.Action.Update,m.Resource.MarketplaceSettings),E=(0,i.useCallback)(async e=>{if(p){C(e);let t=await f({teamId:p.id,settings:{bypassCardGate:e}});"error"===t.kind&&(C(!e),h.error(t.error.message))}},[p,h]);return p?y||S?(0,t.jsx)(v.default,{}):(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(a.Fieldset,{disabled:!I,children:[(0,t.jsxs)(s.FieldsetContent,{disabled:!I,children:[(0,t.jsx)(N.FieldsetTitle,{id:"vercel-marketplace-settings",children:j.TEAM_SETTINGS_NAVIGATION_TITLES.billing.marketplace}),(0,t.jsx)(n.FieldsetSubtitle,{children:"Manage how your team uses the Marketplace"}),(0,t.jsxs)("div",{className:"flex flex-row items-center justify-between gap-2 flex-initial p-4 rounded-md border border-gray-alpha-400",children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start flex-initial",children:[(0,t.jsx)("p",{className:"text-heading-14",children:"Allow installations without a credit card."}),(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"Allow members to install Marketplace integrations without having a card on file. Invoices will be emailed for collection and be due in 30 days."})]}),(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-initial",children:(0,t.jsx)(r.Toggle,{checked:A,"data-testid":(0,x.tid)("billing","marketplace","cc-gate","toggle"),disabled:!I,onChange:()=>{(0,b.isEnterprise)(p)&&I&&E(!A)},size:"large"})})]})]}),(0,t.jsx)(l.FieldsetFooter,{disabled:!1,highlight:!I,children:(0,t.jsx)(l.FieldsetFooter.Status,{children:(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:I?(0,t.jsxs)(t.Fragment,{children:["Learn more about ",(0,t.jsx)(o.Link,{external:!0,href:"/docs/integrations/install-an-integration/product-integration",target:"_blank",variant:"highlight",children:"Vercel Marketplace"})]}):"You need additional permissions to manage your team's Marketplace settings."})})})]})}):null}e.s(["BillingMarketplace",()=>w],8837189)},4853468,e=>{"use strict";var t=e.i(8711407),i=e.i(7137884),s=e.i(8517043),a=e.i(1232681),l=e.i(3895030),n=e.i(1906681),r=e.i(57106),d=e.i(7557283),o=e.i(1717203),c=e.i(4004502),u=e.i(1176592),m=e.i(8548383),x=e.i(380805),g=e.i(1877305),h=e.i(5807088),p=e.i(5338940),f=e.i(5164288);let j=m.ADD_ON_PERMISSIONS.securityPlus,b=(0,m.getAddOnDisplayName)("securityPlus"),y=m.ADD_ON_DESCRIPTIONS.securityPlus,v=m.ADD_ON_LEARN_MORE_LINKS.securityPlus,N=m.ADD_ON_IDS.securityPlus;function w(){let{team:e,isReady:m}=(0,p.useTeam)(),{enableSecurityPlus:w,disableSecurityPlus:S,SecurityPlusModal:A}=(0,x.useToggleSecurityPlus)({analyticsEventSource:"billing"}),C=(0,o.useCanAct)(j,[d.Action.Read,d.Action.Update,d.Action.Create],"every"),I=null!==e&&(0,f.isSecurityPlusEnabled)({team:e}),E=(0,u.useCallback)(()=>{I?S?.():w?.()},[w,S,I]);return m&&e?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(s.Fieldset,{disabled:!C,children:[(0,t.jsxs)(i.FieldsetContent,{disabled:!C,children:[(0,t.jsx)(g.FieldsetTitle,{children:b}),(0,t.jsx)(l.FieldsetSubtitle,{children:y}),(0,t.jsx)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:[(0,t.jsx)(n.Toggle,{checked:I,"data-testid":(0,c.tid)("billing",N,"toggle"),onChange:E,size:"large"}),(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:I?"Disable":"Enable"})]})})]}),(0,t.jsx)(a.FieldsetFooter,{disabled:!1,highlight:!C,children:(0,t.jsx)(a.FieldsetFooter.Status,{children:C?(0,t.jsxs)(t.Fragment,{children:["Learn more about ",(0,t.jsx)(r.Link,{external:!0,href:v,target:"_blank",variant:"highlight",children:b})]}):"You need additional permissions to manage your team's Security Plus subscription."})})]}),A]}):(0,t.jsx)(h.default,{})}e.s(["BillingSecurityPlus",()=>w])}]);

//# debugId=ca72a613-4ec4-b3dc-c922-cd00fd3bdfcd
//# sourceMappingURL=fe68139b3e4c619f.js.map