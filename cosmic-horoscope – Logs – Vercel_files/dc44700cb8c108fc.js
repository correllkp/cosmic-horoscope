;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="26f3abff-c3a4-7195-61da-0b86da3562ab")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,5797737,e=>{e.v({"fade-in":"custom-buttons-module__8sUwva__fade-in",fadeIn:"custom-buttons-module__8sUwva__fadeIn",turborepo:"custom-buttons-module__8sUwva__turborepo"})},8643060,e=>{e.v({border:"card-module__zTCk9W__border",cardSection:"card-module__zTCk9W__cardSection",footer:"card-module__zTCk9W__footer",noPadding:"card-module__zTCk9W__noPadding"})},6785390,e=>{e.v({details:"details-module__eTEHoW__details"})},9444673,e=>{e.v({noPadding:"legacy-env-variables-form-module__E3lP-W__noPadding",removeButton:"legacy-env-variables-form-module__E3lP-W__removeButton",removeButtonCell:"legacy-env-variables-form-module__E3lP-W__removeButtonCell",row:"legacy-env-variables-form-module__E3lP-W__row",table:"legacy-env-variables-form-module__E3lP-W__table",valueTextarea:"legacy-env-variables-form-module__E3lP-W__valueTextarea"})},6693189,e=>{e.v({details:"settings-module__zQ1M-G__details",disabled:"settings-module__zQ1M-G__disabled",input:"settings-module__zQ1M-G__input",installCommandDescription:"settings-module__zQ1M-G__installCommandDescription",label:"settings-module__zQ1M-G__label",settings:"settings-module__zQ1M-G__settings"})},3310008,e=>{e.v({active:"file-tree-module__O8ws-G__active",dir:"file-tree-module__O8ws-G__dir",dirName:"file-tree-module__O8ws-G__dirName",file:"file-tree-module__O8ws-G__file",fileName:"file-tree-module__O8ws-G__fileName",icon:"file-tree-module__O8ws-G__icon",indent:"file-tree-module__O8ws-G__indent",selected:"file-tree-module__O8ws-G__selected",statusIcon:"file-tree-module__O8ws-G__statusIcon",tree:"file-tree-module__O8ws-G__tree"})},2100205,e=>{e.v({modalBody:"root-directory-modal-module__NKgClG__modalBody"})},2329301,e=>{e.v({monorepoManagerLogo:"main-import-module__GKZ5_a__monorepoManagerLogo"})},8228513,e=>{e.v({gradientOverlay:"page-with-gradient-module__0esGHW__gradientOverlay",importPageAdjustment:"page-with-gradient-module__0esGHW__importPageAdjustment",main:"page-with-gradient-module__0esGHW__main",newTitle:"page-with-gradient-module__0esGHW__newTitle"})},5746939,e=>{e.v({cardContent:"index-module__9CNWmG__cardContent",configureProjectContent:"index-module__9CNWmG__configureProjectContent",createTeamStep:"index-module__9CNWmG__createTeamStep",headerSpacer:"index-module__9CNWmG__headerSpacer",mainContent:"index-module__9CNWmG__mainContent",narrative:"index-module__9CNWmG__narrative",newMain:"index-module__9CNWmG__newMain",newMainContentWrapper:"index-module__9CNWmG__newMainContentWrapper",screenStyle:"index-module__9CNWmG__screenStyle",sidebarContainer:"index-module__9CNWmG__sidebarContainer"})},5187772,e=>{"use strict";var t=e.i(8711407),i=e.i(1176592),l=e.i(9722978),a=e.i(512540),r=e.i(5140444),n=e.i(5338940),s=e.i(1875382),o=e.i(1717203),d=e.i(7557283),c=e.i(6232213),u=e.i(1177040),m=e.i(746850),p=e.i(8522445),f=e.i(7385039),h=e.i(9982408),v=e.i(1991452),x=e.i(5468328),y=e.i(7045101),g=e.i(7562527),j=e.i(5797737),_=e.i(4298944),w=e.i(6038905),b=e.i(9187364),E=e.i(8248823),N=e.i(8230165),C=e.i(3496900),S=e.i(57106),T=e.i(4585051),I=e.i(3306538),P=e.i(2504781),k=e.i(6881349),O=e.i(3500331),R=e.i(3671642),D=e.i(8522580),A=e.i(5255926),L=e.i(9318197),G=e.i(1906681),M=e.i(455575),V=e.i(4004502),$=e.i(119294),F=e.i(6352514),W=e.i(6198010),U=e.i(5433449),B=e.i(2988836),z=e.i(4450569),H=e.i(7374478),Y=e.i(8643060);function J(e){let{footer:i,border:a=!0,noPadding:r,children:n,className:s,...o}=e;return(0,t.jsx)("div",{className:(0,l.clsx)(Y.default.cardSection,{footer:i,[Y.default.footer]:i,[Y.default.border]:a,[Y.default.noPadding]:r},s),...o,children:n})}var q=e.i(2560270),K=e.i(3603926),Q=e.i(6785390);let X=(0,i.memo)(function(e){let{title:a,children:r,className:n,onClick:s,"data-testid":o,open:d,disableAnimation:c,...u}=e,m=(0,i.useRef)(!1),[p,f]=(0,i.useState)(!1),h=d??p;return(0,i.useEffect)(()=>{m.current=!0},[]),(0,t.jsx)(K.AnimatedDiv,{friction:30,immediate:c||!m.current,initialHeight:"auto",tension:290,children:(0,t.jsxs)("details",{className:(0,l.clsx)(Q.default.details,n),open:h,...u,children:[(0,t.jsxs)("summary",{"data-testid":o??(0,V.tid)("details","summary"),onClick:e=>{s&&(e.preventDefault(),s(e),f(!h))},children:[(0,t.jsx)(q.ChevronDown,{color:"gray-700",size:20}),a]}),r]})})});var Z=e.i(9334091),ee=e.i(5376191),et=e.i(9512272),ei=e.i(187815),el=e.i(9444673);let ea=(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-between gap-2 flex-initial flex-wrap",children:[(0,t.jsxs)("p",{className:"text-copy-14 text-gray-900",children:[(0,t.jsx)("strong",{children:"TIP:"})," Paste a .env above to populate the form"]}),(0,t.jsxs)("p",{className:"text-copy-14 text-gray-900",children:["Learn more about"," ",(0,t.jsx)(S.Link,{external:!0,href:"/docs/environment-variables",type:"highlight",children:"Environment Variables"})]})]}),er=(0,t.jsxs)("p",{className:"text-copy-14",children:["You are using a System Environment Variable."," ",(0,t.jsx)(S.Link,{external:!0,href:"/docs/environment-variables/system-environment-variables",type:"highlight",children:"Learn More"})]}),en=e=>{let{onSubmit:l,envName:a,setEnvName:r,envValue:n,setEnvValue:s,error:o,hideLabels:d,onBulkAdd:c,onRemove:u,description:m=e=>e?er:ea,disabled:p,explicitId:f}=e,h=(0,i.useRef)(null),v=(0,i.useMemo)(()=>(0,et.isSystemEnv)(a),[a]),y=(0,i.useCallback)(async e=>{e?.preventDefault(),await l?.(),h.current?.focus()},[l]),g=(0,i.useCallback)(async e=>{"Enter"!==e.key||e.shiftKey||await y(e)},[y]),j=(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-1 flex-initial",children:["Value",(0,t.jsx)(x.Tooltip,{text:"Encrypted at rest",children:(0,t.jsx)(B.InformationFillSmall,{})})]});return(0,t.jsx)("form",{onSubmit:e=>void y(e),children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial",children:[(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-2 flex-initial",children:[(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-1",children:(0,t.jsx)(O.Input,{"aria-label":"Key",disabled:!r||p,error:r?o:null,label:d?void 0:"Key",onChange:e=>r?.(e.target.value||""),onPaste:e=>{let t=e.clipboardData.getData("text"),i=Object.entries((0,ei.parseEnv)(t));0!==i.length&&(c?.(i),e.preventDefault())},placeholder:"EXAMPLE_NAME",ref:e=>{h.current=e},value:a,width:"100%"})}),(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-1",children:v?(0,t.jsx)(O.Input,{"aria-label":"Value",disabled:!0,label:d?void 0:j,placeholder:"Populated by System",value:"",width:"100%"}):(0,t.jsx)(Z.Textarea,{explicitId:f,"aria-label":"Value",className:el.default.valueTextarea,disabled:!s||p,error:o,label:d?void 0:j,onChange:e=>s?.(e.target.value||""),onKeyDown:e=>void g(e),placeholder:"I9JU23NF394R6HH",spellCheck:"false",value:n,width:"100%"})}),l?(0,t.jsx)(P.Button,{disabled:!a||!n,style:{marginTop:d?void 0:"32px"},typeName:"submit",children:"Add"}):null,u?(0,t.jsx)(P.Button,{"aria-label":"Remove",disabled:p,onClick:u,shape:"square",style:{marginTop:d?void 0:"32px"},svgOnly:!0,type:"secondary",children:(0,t.jsx)(ee.Minus,{})}):null]}),m?(0,t.jsx)(t.Fragment,{children:m(v)}):null]})})};var es=e.i(4307275),eo=e.i(8042625),ed=e.i(277234),ec=e.i(4244280),eu=e.i(7691989),em=e.i(6178534),ep=e.i(8188735);async function ef(e){let{repo:t,teamId:i,isPrivate:l}=e,a=`${ec.API_INTEGRATION_CONTROLLER}/github-create-repo${(0,eo.encode)({teamId:i})}`;return(0,ed.fetchAPI)(a,{method:"POST",body:JSON.stringify({name:t,private:l}),throwOnHTTPError:!0})}async function eh(e){let{repo:t,teamId:i,isPrivate:l}=e,a=`${ec.API_INTEGRATION_CONTROLLER}/gitlab/create-project${(0,eo.encode)({teamId:i})}`;return(0,ed.fetchAPI)(a,{method:"POST",body:JSON.stringify({name:t,private:l}),throwOnHTTPError:!0})}async function ev(e){let{repo:t,teamId:i,isPrivate:l}=e,a=`${ec.API_INTEGRATION_CONTROLLER}/bitbucket/create-project${(0,eo.encode)({teamId:i})}`;return(0,ed.fetchAPI)(a,{method:"POST",body:JSON.stringify({name:t,private:l}),throwOnHTTPError:!0})}async function ex(e){let{type:t,repo:i,teamId:l,isPrivate:a}=e;switch(t){case"github":return(await ef({repo:i,teamId:l,isPrivate:a})).id;case"gitlab":return(await eh({repo:i,teamId:l,isPrivate:a})).projectId;case"bitbucket":return(await ev({repo:i,teamId:l,isPrivate:a})).uuid;default:throw Error("Unsupported `type`.")}}var ey=e.i(5394280),eg=e.i(693385);async function ej(e){let{projectIdOrName:t,teamId:i}=e;return(0,ed.fetchAPI)(`${(0,ec.API_PROJECTS_VERSION)("v7")}/${encodeURIComponent(t)}${(0,eo.encode)({teamId:i})}`,{method:"DELETE",throwOnHTTPError:!0})}async function e_(e){let{teamId:t,projectName:i,type:l,host:a,ref:r,sha:n,repoId:s,owner:o,slug:d,source:c="import"}=e;return(0,ed.fetchAPI)(`${(0,ec.API_DEPLOYMENTS)("v13")}${(0,eo.encode)({teamId:t,skipAutoDetectionConfirmation:1})}`,{method:"POST",body:JSON.stringify({gitSource:{type:l,ref:r||"master",sha:n||void 0,repoId:"github"===l||"github-limited"===l||"github-custom-host"===l?s:void 0,host:"github-custom-host"===l?a:void 0,projectId:"gitlab"===l?s:void 0,owner:"bitbucket"===l?o:void 0,slug:"bitbucket"===l?d:void 0},name:i,target:"production",source:c}),throwOnHTTPError:!0})}async function ew(e){let{projectName:t,environmentVariables:i,teamId:l,projectSettings:a,gitRepository:r}=e;try{return await (0,ed.fetchAPI)(`${(0,ec.API_PROJECTS_VERSION)("v6")}${(0,eo.encode)({teamId:l,withUserCredentials:1})}`,{method:"POST",body:JSON.stringify({name:t,environmentVariables:i,gitRepository:r,...a}),throwOnHTTPError:!0})}catch(e){throw"invalid_build_command"===e.code||"invalid_output_directory"===e.code?e.step="buildSettings":e.key&&e.key.startsWith("environmentVariables")?e.step="envs":("invalid_project_name"===e.code||"name"===e.key)&&(e.step="projectName"),e}}async function eb(e){let{teamId:t,source:i,clone:l,isPrivate:a,projectName:r,projectSettings:n,envs:s,domains:o,deployHook:d,clonedRepoId:c,setClonedRepoId:u,setData:m,projectIdFromQuery:p}=e;if(!p)try{throw await (0,eu.getProjectInfo)({name:r,teamId:t}),Error(`Project "${r}" already exists, please use a new name.`)}catch(e){if(404!==e.status)throw e.step="projectName",e}let f=async()=>{if(!l)return i.repoId;if(c)return c;let e=l.owner?`${l.owner}/${l.repo}`:`${l.repo}`;return u(c=await ex({teamId:t,type:l.type,repo:e,isPrivate:a})),await (0,ey.pushRepo)({type:l.type,source:i.source,target:e,teamId:t}),c},h=null,v=async()=>{let e=l||i,a={type:"github-custom-host"===e.type?"github":e.type,repo:e.owner?`${e.owner}/${e.repo}`:`${e.repo}`,host:e.host,sourceless:!0};if(p){try{await (0,et.addEnvs)(p,s.map(e=>({...e,name:e.key})),t||void 0)}catch(e){if("ENV_ALREADY_EXISTS"===e.code){await Promise.all(s.map(async e=>{await (0,et.legacyRemoveEnv)(p,e,t||void 0)}));try{await (0,et.addEnvs)(p,s.map(e=>({...e,name:e.key})),t||void 0)}catch(e){throw e.step="envs",e}}else throw e.step="envs",e}try{await (0,ep.default)(p,t,n)}catch(e){throw e.step="buildSettings",e}await (e=>{let{id:t,teamId:i,gitRepository:l}=e;return(0,ed.fetchAPI)(`${(0,ec.API_PROJECTS_VERSION)("v9")}/${t}/link${(0,eo.encode)({teamId:i,withUserCredentials:1})}`,{method:"POST",body:JSON.stringify({type:l.type,repo:l.repo}),throwOnHTTPError:!0})})({id:p,teamId:t,gitRepository:a}),h=await (0,eu.getProject)({id:p,teamId:t})}else{let e=(0,et.addEncryptedEnvs)(s.map(e=>({...e,name:e.key})));h=await ew({projectName:r,environmentVariables:e,teamId:t,projectSettings:n,gitRepository:a})}m({projectName:r}),d&&await (0,em.createDeployHook)(h,t,d,l?"master":i.ref||"master")},x=async e=>{let a=await e_({teamId:t,projectName:r,type:l?l.type:i.type,host:l?l.host:i.host,ref:l?null:i.ref,sha:l?null:i.sha,repoId:e,owner:l?l.owner:i.owner,slug:l?l.repo:i.repo,source:l?"clone/repo":"import"});return a?(m({deployment:a.url}),a.id):null},y=async()=>{let e=h;o&&e&&await Promise.all(o.map(i=>(0,eg.addProjectDomain)({domain:i,project:{id:e.id},team:t?{id:t}:null}).catch(e=>{console.error("Failed to add domain to project:",e)})))},g=await f();return await v(),await y(),x(g)}var eE=e.i(6693189),eN=e.i(9042029),eC=e.i(5527477),eS=e.i(4298868),eT=e.i(1719521),eI=e.i(7743427),eP=e.i(7047540);let ek=(0,i.memo)(()=>(0,t.jsx)("div",{className:"jsx-660195507e5fa6fe line",children:(0,t.jsx)(eP.default,{id:"660195507e5fa6fe",children:".line.jsx-660195507e5fa6fe{border-top:1px solid var(--accents-2);margin:12px 20px}"})}));var eO=e.i(3207250),eR=e.i(4588064),eD=e.i(2280665),eA=e.i(901210),eL=e.i(5432439),eG=e.i(9192668),eM=e.i(6475061),eV=e.i(8492314),e$=e.i(4030453),eF=e.i(6891161),eW=e.i(3322724),eU=e.i(7909933),eB=e.i(2111701);let ez=(e,t)=>e.type===t.type?e.name>t.name?1:-1:"dir"!==e.type?1:-1;async function eH(e){let t=await (0,ed.fetchAPI)(e,{throwOnHTTPError:!0});return t.tree?.filter(e=>!e.name.startsWith(".")&&"dir"===e.type).sort(ez)??null}function eY(e){let{type:t,owner:i,repo:l,ref:a="",rootPath:r="",slug:n="",errorOn404:s=!1}=e;return(0,eU.default)(()=>t&&i&&l?function(e,t,i){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",n="gitlab"===e?encodeURIComponent(t):t,s="gitlab"===e?encodeURIComponent(i):i;return`${ec.API_INTEGRATION_CONTROLLER}/${e}/file-tree/${n}/${s}${(0,eo.encode)({rootPath:a,slug:r,ref:l,withUserCredentials:"1"})}`}(t,i,l,a,r,n):null,async e=>{let t,i=eH(e);try{t=await i}catch(e){if(!s&&404===e.status)return null;throw e}return t},{revalidateOnReconnect:!1,revalidateOnFocus:!1,dedupingInterval:1e4,refreshInterval:0})}eY.prefetch=async e=>{let t,{type:i,owner:l,repo:a,ref:r="",rootPath:n="",slug:s=""}=e;if(!i||!l||!a)return;let o=`${ec.API_INTEGRATION_CONTROLLER}/${i}/file-tree/${l}/${a}${(0,eo.encode)({rootPath:n,slug:s,ref:r,withUserCredentials:"1"})}`,d=(0,ed.fetchAPI)(o,{throwOnHTTPError:!0});try{t=await d}catch(e){404!==e.status&&console.error(e)}t&&(0,eB.mutate)(o,t.tree?.filter(e=>!e.name.startsWith(".")&&"dir"===e.type).sort(ez),!1)};var eJ=e.i(4345845),eq=e.i(296955),eK=e.i(3959677),eQ=e.i(5371931),eX=e.i(9222994);function eZ(e){let{type:l,slug:a}=e,r=(0,i.useMemo)(()=>a.split("/").pop(),[a]),n=null,s="#";switch(l){case"github":n=(0,t.jsx)(eK.default,{height:16,width:16}),s="https://github.com/"+a;break;case"gitlab":n=(0,t.jsx)(eQ.default,{height:16,width:16}),s="https://gitlab.com/"+a;break;case"bitbucket":n=(0,t.jsx)(eX.default,{height:16,width:16}),s="https://bitbucket.org/"+a}return(0,t.jsx)(S.Link,{href:s,tab:!0,children:(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2",style:{flex:"0 1 auto"},children:[(0,t.jsx)("div",{style:{width:16,height:16},children:n}),(0,t.jsx)("span",{className:"text-[14px] leading-[20px] font-medium geist-ellipsis",style:{lineHeight:"30px"},children:r})]})})}function e0(e){let{Icon:i,text:l}=e;return(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-4 geist-hide-on-mobile",style:{flex:"0 1 auto"},children:[(0,t.jsx)(i,{size:20}),(0,t.jsx)("span",{className:"text-[14px] font-medium leading-[32px] geist-ellipsis",style:{whiteSpace:"nowrap"},children:l})]})}function e1(e){let{gitType:i,repo:l,branch:a,directory:r}=e;return(0,t.jsxs)(t.Fragment,{children:[i&&l?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(eZ,{slug:l,type:i})}):null,a?(0,t.jsx)(e0,{Icon:eJ.GitBranch,text:a}):null,r?(0,t.jsx)(e0,{Icon:eq.FolderClosed,text:r}):null]})}function e2(e){return(0,t.jsx)("div",{className:"flex flex-row items-center justify-center flex-initial",children:(0,t.jsx)(e1,{...e})})}var e4=e.i(6939507),e9=e.i(2259462),e3=e.i(8876434),e5=e.i(199192),e8=e.i(8735244),e6=e.i(1848296),e7=e.i(4147070),te=e.i(3310008);let tt=i.default.createContext([0,""]);function ti(){return(0,i.useContext)(tt)}tt.displayName="FileTreeContext";let{Provider:tl}=tt,ta=i.default.createContext(["",()=>{}]);function tr(){return(0,i.useContext)(ta)}ta.displayName="SelectedContext";let tn=e=>{let{selected:i}=e;return i?(0,t.jsx)(e5.ChevronRightSmall,{className:"rotate-90"}):(0,t.jsx)(e5.ChevronRightSmall,{})},ts=e=>{let{selected:i,setSelected:l,children:a}=e;return(0,t.jsx)("div",{className:te.default.tree,children:(0,t.jsx)(ta.Provider,{value:[i,l],children:(0,t.jsx)(tl,{value:[0,""],children:a})})})},to=i.default.memo(e=>{let{name:l,open:a,children:r,defaultOpen:n,onToggle:s,framework:o,loading:d,rootLevel:c}=e,[u,m]=tr(),[p,f]=ti(),h=(0,i.useRef)(!1),v=u===(f=(f?f+"/":"")+l),x=!v&&u.startsWith(f+"/"),[y,g]=(0,i.useState)(n||v||!1),j=x||(void 0===a?y:a),_=(0,i.useCallback)(()=>{h.current=!0;let e=!0;!v&&(m(f),j&&(e=!1)),e&&(s&&s(!j),g(!j))},[j,v,f,s,m]),w=(0,i.useCallback)(e=>{"Enter"===e.key&&_()},[_]);return(0,t.jsxs)("li",{className:te.default.dir,children:[(0,t.jsxs)("a",{className:v?te.default.selected:void 0,onClick:_,onKeyPress:w,title:l,children:[(0,t.jsxs)("span",{className:"flex items-center",children:[(0,t.jsx)("span",{className:te.default.indent,style:{width:25*p,...c&&{marginRight:-25}}}),!c&&(0,t.jsx)("span",{className:te.default.statusIcon,children:(0,t.jsx)(tn,{selected:j})}),(0,t.jsx)("span",{className:te.default.icon,children:(0,t.jsx)(e6.RadioGroup,{label:l,onChange:()=>{},value:v?l:"",children:(0,t.jsx)(z.default,{children:(0,t.jsx)(e6.RadioGroup.Item,{value:l,children:l})})})})]}),(0,t.jsxs)("span",{className:"flex size-[24px] items-center justify-center",children:[d?(0,t.jsx)(e8.Spinner,{}):null,!d&&o?(0,t.jsx)(td,{framework:o}):null]})]}),(0,t.jsx)(K.AnimatedDiv,{allowOverview:!0,friction:30,immediate:!h.current,tension:290,children:(0,t.jsx)("ul",{style:{height:j?void 0:0},children:(0,t.jsx)(tl,{value:[p+1,f],children:r})})})]})});function td(e){let{framework:i}=e,l=(0,e7.useFrameworkLogo)({logo:i.logo,darkModeLogo:i.darkModeLogo});return(0,t.jsx)("img",{alt:"Framework logo",height:24,src:l,width:24})}to.displayName="Folder";let tc=i.default.memo(e=>{let{name:i,active:a,type:r="file",...n}=e,[s]=ti();return(0,t.jsx)("li",{className:(0,l.clsx)(te.default.file,{[te.default.active]:a}),children:(0,t.jsxs)("a",{...n,children:[(0,t.jsx)("span",{className:te.default.indent,style:{width:25*s}}),(0,t.jsx)("span",{className:te.default.icon,style:{top:13},children:"lambda"===r?(0,t.jsx)(e4.Lambda,{size:22}):(0,t.jsx)(e9.File,{size:22})}),(0,t.jsx)("span",{className:te.default.fileName,title:"string"==typeof i?i:"",children:i})]})})});tc.displayName="File";let tu=i.default.memo(()=>{let[e]=ti();return(0,t.jsx)("li",{style:{pointerEvents:"none"},children:(0,t.jsxs)("a",{children:[(0,t.jsx)("span",{className:te.default.indent,style:{width:25*e}}),(0,t.jsx)("span",{className:te.default.icon,children:(0,t.jsx)(e3.MoreHorizontal,{})}),(0,t.jsx)("span",{className:te.default.fileName,children:"Additional files not shown"})]})})});tu.displayName="Cutoff";var tm=e.i(2100205),tp=e.i(6913536);function tf(e){let{isDir:l,rootLevel:a,type:r,owner:n,repo:s,branch:o,rootPath:d,teamSlug:c,framework:u,allFrameworks:m,...p}=e,[f]=tr(),h=ti()[1],v=(0,g.useRepoQuery)(),x=(h?h+"/":"")+p.name,{data:y}=(0,eR.default)({provider:r,owner:n,name:s,customGitHost:"github-custom-host"===r?v?.host:void 0}),j=f===x||f.startsWith(x+"/"),[_,w]=(0,i.useState)(!1),b=_||j,{data:E}=eY(b?{type:r,owner:n,repo:s,ref:o,rootPath:d,slug:c}:{}),N=(0,i.useMemo)(()=>{let e=0;return E?.reduce((t,i)=>"dir"===i.type?[...t,i]:e<10?(e+=1,[...t,i]):t.find(e=>e.cutoff)?t:[...t,{cutoff:!0}],[])},[E]),{data:C}=(0,eO.default)((0,tp.default)(v,y?.defaultBranch,d)),S=C?.framework.slug,T=void 0===S&&l&&!a&&!u,I=(0,i.useMemo)(()=>m.find(e=>e.slug===S)||null,[m,S]);return(0,t.jsx)(to,{...p,framework:I,loading:b&&void 0===E||T,rootLevel:a,children:N?.map(e=>"dir"===e.type?(0,t.jsx)(tf,{allFrameworks:m,branch:o,framework:u||I,isDir:!0,name:e.name,onToggle:w,owner:n,repo:s,rootPath:d?d+"/"+e.name:e.name,teamSlug:c,type:r},e.name):e.cutoff?(0,t.jsx)(tu,{}):(0,t.jsx)(tc,{name:e.name},e.name))||null})}let th=e=>{let{active:l,onCancel:a,onContinue:r,frameworks:o,initialPath:d=""}=e,c=(0,eW.useIsMobile)(),u="./"===d,m=d.startsWith("/")?d.substring(1):d,[p,f]=(0,i.useState)(u?"":m),{team:h}=(0,n.useTeam)(),v=(0,g.useRepoQuery)(),[x,y]=(0,i.useState)(null),j=p||"",_=v?.name+(j?"/"+j:""),w=(0,i.useCallback)(()=>{y(null)},[]),b={type:v?.type,owner:v?.owner,repo:v?.name,rootPath:p,slug:h?.slug,ref:v?.branch};!function(e){let{type:t,owner:l,repo:a,ref:r,rootPath:n,slug:o}=e,d=(0,s.useSearchParams)();(0,i.useEffect)(()=>{if(n){let e=n.split("/"),i="";eY.prefetch({type:t,owner:l,ref:r,repo:a,slug:o});for(let n=0;n<e.length;n++){let s=e[n];eY.prefetch({type:t,owner:l,repo:a,ref:r,rootPath:i+s,slug:o}),i+=s+"/"}}},[d])}(b);let{data:E}=eY(b);return(0,t.jsxs)(eF.Modal.Modal,{active:l,onAnimationDone:w,onClickOutside:a,width:"480px",children:[(0,t.jsx)(eF.Modal.Body,{className:tm.default.modalBody,padding:!1,children:(0,t.jsx)("main",{children:(0,t.jsx)("form",{className:"form",onSubmit:async e=>{e?.preventDefault()},children:(0,t.jsxs)(z.default,{children:[(0,t.jsxs)(J,{border:!1,style:{paddingBottom:"0"},children:[(0,t.jsx)("h1",{className:"text-heading-24 text-center",children:"Root Directory"}),(0,t.jsx)("p",{className:"text-copy-14 mt-4 text-center text-gray-900 text-balanced",children:"Select the directory where your source code is located. To deploy a monorepo, create separate projects for other directories in the future."}),(0,t.jsx)(e2,{branch:v?.branch||"",gitType:v?.type||"",repo:v?.fullName||""}),x?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(L.Spacer,{y:.5}),(0,t.jsx)(e$.Error,{error:x})]}):null,(0,t.jsx)(L.Spacer,{y:1})]}),(0,t.jsx)("div",{style:{borderTop:"1px solid var(--accents-2)",flex:"1 1 auto",overflowX:"hidden",overflowY:"auto",height:c?"auto":270},children:(0,t.jsx)(ts,{selected:_,setSelected:e=>{let t=v?.name.split("/").length;f(e.split("/").slice(t).join("/"))},children:v?(0,t.jsx)(tf,{allFrameworks:o,branch:v.branch,isDir:!0,name:v.name,nameSlug:(0,t.jsxs)(t.Fragment,{children:[v.name," ",(0,t.jsx)("span",{style:{color:"var(--accents-5)"},children:"(root)"})]}),open:!0,owner:v.owner,repo:v.name,rootLevel:!0,teamSlug:h?.slug,type:v.type}):null})})]})})})}),(0,t.jsxs)(eF.Modal.Actions,{children:[(0,t.jsx)(eF.Modal.Action,{"data-testid":(0,V.tid)("root-directory-modal","cancel"),onClick:a,type:"secondary",children:"Cancel"}),(0,t.jsx)(eF.Modal.Action,{"data-testid":(0,V.tid)("root-directory-modal","continue"),disabled:null===E,onClick:async()=>{$.analytics.track(F.AnalyticsEvent.PROJECT_CREATION_SELECTED_ROOT_DIRECTORY,{version:3}),r(p)},children:"Continue"})]})]})};e.i(2148360);var tv=e.i(7259833),tx=e.i(8334396);function ty(e){let{gitType:i}=e,{text:l,openModal:a,scopedTeam:r}=(0,tv.useUpgradeToProButton)({trialBehavior:"choose",buttonText:{desired:"Start a Pro Trial",fallback:"Upgrade to Pro"}});return r?.billing?.plan!=="hobby"?null:(0,t.jsxs)(D.Note,{action:(0,t.jsx)(P.Button,{onClick:()=>a({source:"import",disabledSteps:["team-members"]}),size:"small",children:l}),fill:!0,label:!1,type:"success",children:["You are attempting to import a Git repository from a private"," ",(0,tx.getGitProviderNameAndOrg)(i),". To collaborate with your team members, a Pro subscription is required."]})}var tg=e.i(4909757),tj=e.i(7102400),t_=e.i(2138061),tw=e.i(458149);let tb=(e,t)=>e.reduce((e,i)=>((e[i[t]]=e[i[t]]||[]).push(i),e),{});function tE(e){let{field:l,name:a,description:r,framework:n,deploying:s,projectSettings:o,setProjectSettings:d,defaultValue:c="",shouldOverride:u,setShouldOverride:m,disabled:p}=e,f=(0,i.useRef)(null),h=(0,t.jsx)(G.Toggle,{checked:u[l],disabled:p||s,icon:{checked:(0,t.jsx)(C.PencilEdit,{color:"gray-1000",size:10}),unchecked:(0,t.jsx)(C.PencilEdit,{color:"gray-1000",size:10})},label:"Override",onChange:e=>{var t;m(t=>({...t,[l]:!!e})),e&&!o[l]&&d({...o,[l]:((t=n?.settings[l])&&"value"in t?t.value:null)||""}),setTimeout(()=>{e&&f.current&&f.current.select()},30)},size:"large"});return(0,t.jsx)(z.default,{"data-testid":(0,V.tid)(a,"field"),halfGap:!0,row:!0,children:(0,t.jsxs)(z.default,{halfGap:!0,children:[(0,t.jsxs)(z.default,{noWrap:!0,row:!0,style:{maxWidth:180,minWidth:180,whiteSpace:"nowrap",marginBottom:-8},vcenter:!0,children:[(0,t.jsx)("span",{className:"text-label-12 m-0",children:a}),(0,t.jsx)(L.Spacer,{x:.25}),(0,t.jsx)(x.Tooltip,{text:r,children:(0,t.jsx)(B.InformationFillSmall,{})})]}),(0,t.jsx)(z.default,{children:(0,t.jsx)(O.Input,{"aria-label":a,disabled:p||!u[l]||s,onChange:e=>d({...o,[l]:e.target.value}),placeholder:c||n?.settings[l].placeholder||n?.settings[l].value||"",ref:f,style:{fontFamily:"var(--font-mono, var(--font-mono-fallback))"},suffix:h,suffixStyling:!1,value:(p||u[l])&&o[l]||"",width:"100%"})})]})})}let tN="env_value_input_";function tC(e,t){switch(t.type){case"SET_ENV_NAME":return{...e,envName:t.envName};case"SET_ENV_VALUE":return{...e,envValue:t.envValue};case"ADD":return{...e,envs:[...e.envs,{id:(0,N.default)("env_"),key:e.envName,value:e.envValue,system:(0,et.isSystemEnv)(e.envName)}],envName:"",envValue:""};case"BULK_ADD":{let i=t.parsedEnvs.map(e=>{let[t,i]=e;return{id:(0,N.default)("env_"),key:t,value:i,system:(0,et.isSystemEnv)(t)}});return{...e,envs:[...e.envs,...i]}}case"REMOVE":return{...e,envs:e.envs.filter(e=>e.id!==t.id)};case"UPDATE_ENV_NAME":return{...e,envs:e.envs.map(e=>e.id===t.id?{...e,key:t.name}:e)};case"UPDATE_ENV_VALUE":return{...e,envs:e.envs.map(e=>e.id===t.id?{...e,value:t.value}:e)};case"PREFILL_MISSING_ENV_VAR":{let i={id:(0,N.default)("env_"),key:t.name,value:"",system:(0,et.isSystemEnv)(t.name)};if(0===e.envs.length)return{...e,envOpen:!0,envs:[i]};if(1===e.envs.length){let i=e.envs[0];if(""===i.key&&""===i.value)return{...e,envOpen:!0,envs:[{...i,key:t.name}]}}if(e.envs.some(e=>e.key===t.name))return{...e,envOpen:!0};return{...e,envOpen:!0,envs:[...e.envs,i]}}case"ERROR":return{...e,envError:t.envError,envOpen:!0};case"TOGGLE_DETAILS":return{...e,envOpen:!e.envOpen};case"START_DEPLOYING":return{...e,envError:null};default:throw Error()}}let tS=["repo_links_exceeded_limit","too_many_projects"];async function tT(e){let{template:t,clone:i,type:l,host:a,path:r,selectedPath:n,owner:s,repo:o,ref:d,state:c,selected:u,projectSettings:m,setDeploying:p,setLoading:f,setRequiredEnvs:h,teamId:v,source:x,envs:y,isPrivate:g,projectName:j,deployHook:_,toasts:w,envVariablesDispatch:b,requiredEnvs:N,requiredEnvNames:C,repoId:S,setProjectSettingsError:T,setProjectSettingsOpen:I,confirmBuildCommand:P,qsProjectName:k,dispatch:O,setProjectNameError:R,clonedRepoId:D,setClonedRepoId:A,setGenericError:L,projectIdFromQuery:G,domains:M}=e,V=m?.buildCommand;if(!await P(V))return;O({type:"SET_DEPLOYMENT_ID",deploymentId:null}),f(!0),b({type:"START_DEPLOYING"}),R(null),T(null),L(null);let $=!1,F=[];if(C)for(let e of C)N[e]?.value||(0,et.isSystemEnv)(e)?F.push({key:e,value:N[e]?.value??""}):(h(t=>({...t,[e]:{value:"",error:"Required"}})),$=!0);if($){f(!1),p(!1);return}let W=[...y,...F];try{let e;k&&!G&&await ej({projectIdOrName:k,teamId:v}),(e=i||t?await eb({teamId:v,source:{type:l,host:a,source:x,repoId:S,owner:s,repo:o,ref:d},clone:{type:c.type,repo:c.repo,owner:c.owner},isPrivate:g,domains:M,projectName:j,deployHook:_,projectSettings:{framework:u||null,devCommand:null,rootDirectory:n||null,publicSource:!g,...m},envs:W,clonedRepoId:D,setClonedRepoId:A,setData:()=>{},projectIdFromQuery:G}):await eb({teamId:v,source:{owner:s,type:l,host:a,repo:o,repoId:S,ref:d},isPrivate:g,projectName:j,deployHook:_,projectSettings:{framework:u||null,devCommand:null,rootDirectory:r||null,...m},domains:M,envs:W,clonedRepoId:D,setClonedRepoId:A,setData:()=>{},projectIdFromQuery:G,clone:null}))&&(O({type:"SET_DEPLOYMENT_ID",deploymentId:e}),p(!0))}catch(e){p(!1),(0,eD.isProjectsError)(e)&&"steps"in e?"envs"===e.step?b({type:"ERROR",envError:e}):"buildSettings"===e.step?(T((0,E.errorToString)(e)),I(!0)):"projectName"===e.step&&R(e):(0,eD.isProjectsError)(e)&&(tS.includes(e.code)||"action"in e&&e.link)?L(e):w.error((0,E.errorToString)(e))}finally{f(!1)}}function tI(e){let{slug:i,totalEnvs:l}=e,{data:a}=(0,eI.useIntegration)(i);return(0,t.jsxs)(z.default,{noWrap:!0,row:!0,children:[a?.icon?(0,t.jsx)(T.Avatar,{hash:a?.icon,size:20}):(0,t.jsx)(T.Avatar,{placeholder:!0,size:20}),(0,t.jsx)(L.Spacer,{inline:!0,x:.2}),(0,t.jsxs)("span",{className:"text-copy-16",style:{color:"var(--accents-5)"},children:[a?.website?(0,t.jsx)(S.Link,{external:!0,href:a?.website,children:(0,t.jsx)("b",{children:a?.name})}):(0,t.jsx)("b",{children:a?.name})," ","added ",l," Environment Variable",l>1?"s":""]})]})}let tP=function(e){let{frameworks:a=[],canCreateProject:s}=e,{user:o}=(0,r.useUser)(),d=(0,M.useToasts)(),c=(0,w.useCardContext)(),[m,p]=(0,i.useState)(!1),[f,h]=(0,i.useState)(null),{clone:x,deploymentError:_,"project-name":b,"project-id":E,"production-deploy-hook":C,...T}=(0,eC.useImportUrlMachine)(),{isReady:L,query:G}=(0,v.useRouter)(),{projectName:B,framework:Y,path:q,buildCommand:K,outputDirectory:Q,installCommand:Z,domain:ee}=G,et=B?String(B):void 0,el=Array.isArray(ee)?ee:ee?[ee]:void 0,ea=Y?String(Y):void 0,er=q?String(q):void 0,eu=K?String(K):void 0,em=Q?String(Q):void 0,ep=Z?String(Z):void 0,ef=(0,g.useRepoQuery)(),{data:eh}=(0,y.useDetectEligibleProjects)(ef?.url),ev=eh?.monorepoManager,{deploying:ex,deploymentId:ey,rootDirectory:eg,dispatch:ej}=(0,u.useProjectImportContext)(),{data:e_}=(0,eR.default)({provider:ef?.type,name:ef?.name,customGitHost:ef?.host,owner:ef?.owner}),{selectedTeamSlug:ew,isCreatingTeam:eb,isSelectedTeamSlugReady:eI,onTeamSlugChange:eP,selectedTeamError:eD}=(0,tg.useSelectedTeamSlug)({gitProvider:e_?.provider,gitNamespaceId:e_?.owner.id,gitNamespaceSlug:e_?.namespace}),{team:e$}=(0,n.useTeam)(ew),eF=e$?.billing?.plan==="hobby",eW=e_?.ownerType==="team",eU=!!e_?.private,eB=eW&&eU&&eF,{showUpgradeCTA:ez,upgradeMessage:eH,setFreezeUpgradeUI:eY,disallowHobby:eJ}=(0,eM.useUpgradeCTA)({selectedTeamSlug:ew,isCreatingTeam:eb,isTeamRepo:eW,isPrivate:eU,gitType:e_?.provider}),eq=eh?.projects.find(e=>e.path===`/${eg??""}`)??null,[eK,eQ]=(0,i.useState)(void 0);(0,i.useEffect)(()=>{L&&!ea&&ef&&eQ((0,tp.default)(ef,void 0,er))},[L]);let{data:eX,isLoading:eZ}=(0,eO.default)(eK),{data:e0}=function(e){let{user:t}=(0,r.useUser)();return(0,eA.default)(()=>t&&!t.limited&&e?`${ec.API_INTEGRATION_CONTROLLER}/detect-vercel-configuration${(0,eo.encode)({url:e})}`:null,e=>(0,ed.fetchAPI)(e,{throwOnHTTPError:!0}))}(ef?.url),e1=e0?.settings,e2=!ea&&eZ,e4=!!(c.active&&!e2);(0,i.useEffect)(()=>{c.active&&ej({type:"SET_CONFIGURE_PROJECT",configureProject:!0})},[c.active,ej]);let[e9,e3]=(0,i.useState)(a.find(e=>e.slug===(e1?.framework==="other"?null:e1?.framework))??null);function e5(e){ej({type:"SET_DEPLOYING",deploying:e})}(0,i.useEffect)(()=>{"other"===ea?e3(a.find(e=>null===e.slug)??null):ea&&e3(a.find(e=>e.slug===ea)??null)},[ea,a]),(0,i.useEffect)(()=>{eX&&e3(eX.framework)},[eX]);let e8=er||ef?.subdir,e6=ef?.branch||e_?.defaultBranch;(0,i.useEffect)(()=>{e8&&ej({type:"SET_ROOT_DIRECTORY",rootDirectory:e8})},[e8,ej]);let e7=(0,i.useMemo)(()=>{if(ef?.name)return(0,t_.sanitizeProjectName)(ef.name)},[ef?.name]),[te,tt]=(0,i.useState)(e7),ti=(0,eL.useGetProjectName)();(0,i.useEffect)(()=>{async function e(){tt(await ti(e$?.id,b))}b&&e$?.id&&e()},[b,e$?.id]);let[tl,ta]=(0,i.useState)(null),[tr,tn]=(0,i.useState)({buildCommand:e1?.buildCommand??eu??null,outputDirectory:e1?.outputDirectory??em??null,installCommand:e1?.installCommand??ep??null}),[ts,to]=(0,i.useState)({buildCommand:"string"==typeof e1?.buildCommand||e1?.buildCommand===null||"string"==typeof eu&&void 0===ev,outputDirectory:"string"==typeof e1?.outputDirectory||e1?.outputDirectory===null||"string"==typeof em&&void 0===ev,installCommand:"string"==typeof e1?.installCommand||e1?.installCommand===null||"string"==typeof ep&&void 0===ev}),[td,tc]=(0,i.useState)(!1),[tu,tm]=(0,i.useState)(null),{confirm:tf,modal:tv}=(0,eN.default)(),[tx,tS]=(0,i.useState)(null),{missingEnvVarKey:tP,setMissingEnvVarKey:tk}=(0,tw.useOpenMissingEnvVar)(),[{envs:tO,envError:tR,envOpen:tD},tA]=(0,i.useReducer)(tC,{envName:"",envValue:"",envs:[{id:(0,N.default)("env_"),key:"",value:"",system:!1}]}),tL=T.env?.split(",")??[],tG=T.envDescription,tM=T.envLink,[tV,t$]=(0,i.useState)({}),[tF,tW]=(0,i.useState)(!1),tU=ef?.name,tB=ef?.template;(0,i.useLayoutEffect)(()=>{tP&&(tA({type:"PREFILL_MISSING_ENV_VAR",name:tP}),setTimeout(()=>{let e=document.getElementById(`${tN}${tP}`);if(e){let t=e.closest("details");t?t.scrollIntoView({behavior:"smooth",block:"center"}):e.scrollIntoView({behavior:"smooth",block:"center"}),e.focus()}},100),tk(null))},[tP,tk,tA,tO[0]?.id]),(0,i.useEffect)(()=>{tn({buildCommand:e1?.buildCommand??eu??null,outputDirectory:e1?.outputDirectory??em??null,installCommand:e1?.installCommand??ep??null}),to({buildCommand:"string"==typeof e1?.buildCommand||e1?.buildCommand===null||"string"==typeof eu&&void 0===ev,outputDirectory:"string"==typeof e1?.outputDirectory||e1?.outputDirectory===null||"string"==typeof em&&void 0===ev,installCommand:"string"==typeof e1?.installCommand||e1?.installCommand===null||"string"==typeof ep&&void 0===ev}),tt(b||tB||tU||"")},[eu,ev,em,tU,tB,b,ep,e1?.buildCommand,e1?.outputDirectory,e1?.installCommand]),(0,i.useEffect)(()=>{e9?.slug!==null&&to({buildCommand:"string"==typeof e1?.buildCommand||e1?.buildCommand===null||"string"==typeof eu&&void 0===ev,outputDirectory:"string"==typeof e1?.outputDirectory||e1?.outputDirectory===null||"string"==typeof em&&void 0===ev,installCommand:"string"==typeof e1?.installCommand||e1?.installCommand===null||"string"==typeof ep&&void 0===ev})},[e9]);let{data:tz}=(0,eV.useNewDeploymentInterval)(ey),tH=function(e){let{deploymentId:t}=e,[l,a]=(0,i.useState)(!1),{team:r}=(0,n.useTeam)(),{data:s}=(0,eV.useNewDeploymentInterval)(t);async function o(){l&&s?.projectId&&(await (0,ed.fetchAPI)(`${(0,ec.API_PROJECTS_VERSION)("v9")}/${s.projectId}${(0,eo.encode)({teamId:r?.id})}`,{method:"DELETE",throwOnHTTPError:!0}),a(!1))}return(0,i.useEffect)(()=>{switch(s?.readyState){case"CANCELED":case"ERROR":(0,i.startTransition)(()=>{a(!0)})}},[s]),o}({deploymentId:ey});(0,i.useEffect)(()=>{tz&&("CANCELED"===tz.readyState||"ERROR"===tz.readyState?e5(!1):tz.readyState&&e5(!0))},[tz]),(0,i.useEffect)(()=>{_&&e5(!1)},[_]);let{data:tY}=(0,eS.default)(E),tJ=tY?.envs.filter(e=>e.configurationId),{data:tq}=(0,eT.default)(E),tK=tb(tJ||[],"configurationId"),tQ=tb(tq?.integrations?.filter(e=>tJ&&tJ.map(e=>e.configurationId).includes(e.id))||[],"slug"),tX=[];for(let[e,t]of Object.entries(tQ)){let i=tK[t[0].id].length;tX.push({slug:e,totalEnvs:i})}let tZ=async e=>{eb&&e&&eP(e.slug),await tH(),await tT({template:ef?.template,clone:x,type:ef?.type,host:ef?.host,path:eg||e8,selectedPath:eg,owner:ef?.owner,repo:ef?.name,ref:e6,deployHook:C,state:T,domains:el,selected:e9?.slug??null,projectSettings:{outputDirectory:em??ts.outputDirectory?tr.outputDirectory:null,buildCommand:(eu??ts.buildCommand)&&eq?.settings.buildCommand!==tr.buildCommand?tr.buildCommand:null,installCommand:(ep??ts.installCommand)&&eq?.settings.installCommand!==tr.installCommand?tr.installCommand:null},setDeploying:e5,setLoading:tW,setRequiredEnvs:t$,teamId:eb&&e?e.id:e$?.id,userId:o?.uid,source:ef?.url,envs:tO.filter(e=>""!==e.id&&""!==e.key&&""!==e.value),isPrivate:eU,projectName:te,toasts:d,envVariablesDispatch:tA,requiredEnvs:tV,requiredEnvNames:tL,repoId:e_?.id,setProjectSettingsError:tm,setProjectSettingsOpen:tc,confirmBuildCommand:tf,qsProjectName:et,dispatch:ej,setProjectNameError:ta,clonedRepoId:f,setClonedRepoId:h,setGenericError:tS,projectIdFromQuery:E})},t0=ew&&ew===e$?.slug?eD:null,t1=ew&&ew===e$?.slug&&e$.billing?.plan==="hobby"?eH:null,t2=(0,i.useRef)(ew?{[ew]:ez}:{});(0,i.useEffect)(()=>{ew&&(t2.current[ew]||(t2.current[ew]=ez))},[ez,ew]);let t4=!!(!ex&&(_||ey)),t9=(0,i.useMemo)(()=>ew&&t2.current[ew]?!t4:!!eD||!!eB||!!ex||!s||!e4,[ew,e4,ex,t4,eB,eD,s]),t3=(0,i.useRef)(null);return(0,t.jsxs)("div",{className:(0,l.clsx)("flex flex-col items-stretch justify-start gap-6 flex-initial expand-mobile",eE.default.settings),children:[(0,t.jsx)(eG.GitRepositoryEntity,{action:"importing",frameworks:a}),(0,t.jsxs)("p",{className:"text-copy-14",children:["Choose where you want to create the project",E?".":" and give it a name."]}),(0,t.jsx)(J,{border:!1,className:"expand-mobile",style:{padding:0},children:(0,t.jsx)(tj.AnimateChangeInHeight,{children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-6 flex-initial",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row items-stretch justify-start gap-4 md:gap-0 flex-initial w-full",children:[(0,t.jsx)(R.Label,{style:{flex:1},value:"Vercel Team",children:(0,t.jsx)(tg.TeamSelector,{disabled:!!(tF||!e4||ex),gitNamespaceId:e_?.owner.id,gitNamespaceSlug:e_?.namespace,gitProvider:e_?.provider,loading:!eI,onChange:eP,value:ew})}),E?null:(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-initial geist-hide-on-mobile translate-y-8",children:(0,t.jsx)(H.SlashDivider,{})}),(0,t.jsx)(R.Label,{style:{flex:1,display:E?"none":"initial"},value:"Project Name",children:(0,t.jsx)(A.Skeleton,{show:!eI,style:{overflow:eI?void 0:"hidden"},children:(0,t.jsx)(O.Input,{"aria-label":"New Project Name",autoFocus:!0,className:(0,l.clsx)("new-project-name",eE.default.input),disabled:ex||"string"==typeof ey||tF||!e4,error:tl,id:"new-project-name",maxLength:100,onChange:e=>tt(e.target.value),placeholder:"my-project",value:te||"",width:"100%"})})})]}),tx?(0,t.jsx)(D.Note,{fill:!0,type:"error",children:tx.message}):null,t0?(0,t.jsx)(D.Note,{fill:!0,type:"secondary",children:t0}):null,t1?(0,t.jsx)(D.Note,{fill:!0,type:"secondary",children:t1}):null,ez?(0,t.jsx)(eM.UpgradeCTA,{disallowHobby:eJ,onSubmit:tZ,selectedTeamSlug:ew,setFreezeUpgradeUI:eY}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("hr",{className:"geist-hr-reset"}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial",children:[(0,t.jsx)(R.Label,{value:"Framework Preset",children:(0,t.jsx)(A.Skeleton,{show:!eI||!e9,style:{overflow:eI?void 0:"hidden"},children:(0,t.jsxs)(k.Combobox,{clearable:!1,disabled:!!(e1?.framework||!e4||ex||tF),noRawSelectedValue:!0,onChange:e=>{let t=a.find(t=>t.slug===("other"===e?null:e));t&&e3(t)},value:e9?.slug||"other",children:[(0,t.jsx)(k.Combobox.Input,{className:eE.default.input,"data-testid":(0,V.tid)("framework","select")}),(0,t.jsx)(k.Combobox.List,{children:(0,t.jsx)(es.FrameworkComboboxList,{frameworks:a})})]})})}),(0,t.jsx)(R.Label,{value:"Root Directory",children:(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-3 flex-initial",children:[(0,t.jsx)(A.Skeleton,{show:!eI,style:{overflow:eI?void 0:"hidden",width:"100%"},children:(0,t.jsx)(O.Input,{"aria-label":"Root Directory",className:eE.default.input,disabled:!0,style:{fontFamily:"var(--font-mono, var(--font-mono-fallback))",color:e4?"var(--geist-foreground)":"var(--accents-1)"},value:eg||"./",width:"100%"})}),(0,t.jsx)(A.Skeleton,{show:!eI,style:{overflow:eI?void 0:"hidden",flexShrink:0},children:(0,t.jsx)(z.default,{flex:"0 0 auto",children:(0,t.jsx)(P.Button,{disabled:!!(!e4||tF||ex),onClick:()=>{$.analytics.track(F.AnalyticsEvent.PROJECT_CREATION_EDITED_ROOT_DIRECTORY,{version:3}),p(!0)},type:"secondary",children:"Edit"})})})]})}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:[(0,t.jsx)(A.Skeleton,{show:!eI,style:{overflow:eI?void 0:"hidden"},children:(0,t.jsxs)(X,{className:eE.default.details,disableAnimation:!0,onClick:()=>tc(e=>!e),open:td,style:{backgroundColor:e4?"var(--geist-background)":"var(--accents-1)",color:e4?"var(--accents-6)":"var(--accents-3)"},title:"Build and Output Settings",children:[tv,(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-6 flex-initial",children:[tu?(0,t.jsx)(D.Note,{type:"error",children:tu}):null,(0,t.jsx)(tE,{defaultValue:eq?.settings.buildCommand,deploying:ex||tF,description:"The command your frontend framework provides for compiling your code.",disabled:!!e1?.buildCommand,field:"buildCommand",framework:e9,monorepoManager:ev,name:"Build Command",projectSettings:tr,setProjectSettings:tn,setShouldOverride:to,shouldOverride:ts}),(0,t.jsx)(tE,{deploying:ex||tF,description:"The directory in which your compiled frontend will be located.",disabled:!!e1?.outputDirectory,field:"outputDirectory",framework:e9,monorepoManager:ev,name:"Output Directory",projectSettings:tr,setProjectSettings:tn,setShouldOverride:to,shouldOverride:ts}),(0,t.jsx)(tE,{defaultValue:eq?.settings.installCommand,deploying:ex||tF,description:(0,t.jsx)(t.Fragment,{children:"The command that is used to install your Project's software dependencies. If you don't need to install dependencies, override this field and leave it empty."}),disabled:!!e1?.installCommand,field:"installCommand",framework:e9,monorepoManager:ev,name:"Install Command",projectSettings:tr,setProjectSettings:tn,setShouldOverride:to,shouldOverride:ts})]})]})}),(0,t.jsx)(A.Skeleton,{show:!eI,style:{overflow:eI?void 0:"hidden"},children:(0,t.jsx)(X,{className:eE.default.details,disableAnimation:!0,onClick:()=>tA({type:"TOGGLE_DETAILS"}),open:tD||tL.length>0,style:{backgroundColor:e4?"var(--geist-background)":"var(--accents-1)"},title:(0,t.jsxs)(t.Fragment,{children:["Environment Variables",tL.length>0?(0,t.jsxs)(t.Fragment,{children:[" ",(0,t.jsx)(I.Badge,{size:"sm",variant:"gray-subtle",children:"Required"})]}):null]}),children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-3 flex-initial",children:[tR?(0,t.jsx)(D.Note,{type:"error",children:tR.message}):null,tL.length>0?(0,t.jsxs)(t.Fragment,{children:[tL.map((e,i)=>(0,t.jsx)(en,{explicitId:`${tN}${e}`,description:null,disabled:ex||tF,envName:e,envValue:tV[e]?.value??"",error:tV[e]?.error,hideLabels:0!==i,onRemove:()=>t$(t=>({...t,[e]:{value:""}})),setEnvValue:t=>t$(i=>({...i,[e]:{value:t,error:t?void 0:"Required"}}))},e)),tG?(0,t.jsxs)("p",{className:"text-copy-14 text-gray-900",children:[tG," ",tM?(0,t.jsx)(S.Link,{external:!0,href:tM,variant:"highlight",children:"Learn More"}):null]}):null]}):null,tO.map((e,i)=>(0,t.jsx)(en,{explicitId:`${tN}${e.key}`,description:null,disabled:ex||tF,envName:e.key,envValue:e.value,hideLabels:tL.length>0||i>0,onBulkAdd:e=>tA({type:"BULK_ADD",parsedEnvs:e}),onRemove:()=>{tA({type:"REMOVE",id:e.id})},setEnvName:t=>tA({type:"UPDATE_ENV_NAME",name:t,id:e.id}),setEnvValue:t=>tA({type:"UPDATE_ENV_VALUE",value:t,id:e.id})},e.id)),(0,t.jsx)(P.Button,{disabled:ex||tF,onClick:()=>tA({type:"ADD"}),prefix:(0,t.jsx)(W.Plus,{}),size:"small",style:{alignSelf:"flex-start"},type:"secondary",children:"Add More"}),(0,t.jsxs)("div",{className:"flex flex-row gap-2 items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{accept:"env","aria-hidden":!0,multiple:!1,ref:t3,style:{display:"none"},type:"file",onChange:e=>{let t=e.target.files?.[0];if(!t||"text/plain"!==t.type&&""!==t.type)return void d.error("Please upload a valid env file");let i=new FileReader;i.onload=e=>{let t=e.target?.result;t&&tA({type:"BULK_ADD",parsedEnvs:Object.entries((0,ei.parseEnv)(t.toString()))})},i.readAsText(t)}}),(0,t.jsx)(P.Button,{disabled:!t3.current,onClick:()=>t3.current?.click(),prefix:(0,t.jsx)(U.FileText,{}),size:"small",type:"secondary",typeName:"button",children:"Import .env"})]}),(0,t.jsxs)("p",{className:"text-copy-14 text-gray-900",children:["or paste the .env contents above."," ",(0,t.jsx)(S.Link,{external:!0,href:"/docs/environment-variables",type:"highlight",children:"Learn more"})]})]}),tX.length>0?(0,t.jsx)(ek,{}):null,tX.map(e=>{let{slug:i,totalEnvs:l}=e;return(0,t.jsx)(z.default,{children:(0,t.jsx)(tI,{slug:i,totalEnvs:l})},i)})]})})})]}),eB?(0,t.jsx)(ty,{gitType:ef?.type}):null]})]})]})})}),ez?null:(0,t.jsx)(J,{footer:!0,style:{padding:0},children:(0,t.jsxs)(z.default,{className:"relative",children:[ev?.slug==="turbo"?(0,t.jsx)("div",{className:(0,l.clsx)(eB||ex||tF||t9?"hidden":j.default.turborepo,j.default.fadeIn)}):null,(0,t.jsx)(A.Skeleton,{show:!eI,style:{overflow:eI?void 0:"hidden"},children:(0,t.jsx)(P.Button,{disabled:t9,loading:tF||!!ex,onClick:()=>{tZ()},width:"100%",children:tF||ex?"Deployingâ€¦":"Deploy"})})]})}),(0,t.jsx)(th,{active:m,frameworks:a,onCancel:()=>{p(!1)},onContinue:e=>{p(!1),ej({type:"SET_ROOT_DIRECTORY",rootDirectory:e});let t=eh?.projects.find(t=>t.path===`/${e}`);async function i(){tt(await ti(e$?.id,t?.name))}t?(i(),tn(t.settings),e3(t.framework)):eQ((0,tp.default)(ef,void 0,e))}})]})};var tk=e.i(3495961),tO=e.i(6509836),tR=e.i(2329301),tD=e.i(1315623),tA=e.i(6979900),tL=e.i(2251791),tG=e.i(316263),tM=e.i(7780974);function tV(e){let{frameworks:a,hasAccess:s}=e;(0,tk.useShouldRedirectToNew)();let o=(0,v.useRouter)(),{user:d}=(0,r.useUser)(),{team:c}=(0,n.useTeam)(),{configureProject:E,deploying:N,deploymentReset:C,deploymentId:S,dispatch:T,flowId:I}=(0,u.useProjectImportContext)();(0,tL.useImportTrackStatusChanges)(),(0,tG.useTrackPageViewCustomActivityIgnoreQueryParams)(!!I,tM.VercelActivityAction.NewProjectImportViewed,{flowId:I});let{url:P}=(0,g.useRepoQuery)()||{},{data:k}=(0,y.useDetectEligibleProjects)(P),{monorepoManager:O}=k||{};(0,i.useEffect)(()=>()=>{T({type:"RESET"})},[T]);let[R,{height:D}]=(0,p.default)(),A=(0,h.useSpring)({height:D,config:{tension:300,friction:26,clamp:!0}}),L=(0,i.useCallback)(e=>{setTimeout(()=>{G.current?.scrollIntoView({behavior:"smooth"})},e||500)},[]),G=(0,i.useRef)(null);(0,i.useEffect)(()=>{if(o.query.finishSetup&&(c||!o.query.teamSlug&&d)){let e={...o.query};delete e.finishSetup,o.push({query:e}),requestAnimationFrame(()=>L())}},[o,L,c,d]);let M=(0,i.useMemo)(()=>O?(0,t.jsx)(x.Tooltip,{text:`This project is using ${O.name}`,children:(0,t.jsx)(tO.FrameworkIcon,{className:(0,l.clsx)(tR.default.monorepoManagerLogo,j.default.fadeIn),framework:O,size:24,style:{borderWidth:0}})}):void 0,[O]);return(0,_.useTrackStatsigEvent)({eventName:`new_import_${N?"deploying":"viewed"}`}),(0,t.jsxs)("div",{className:"flex flex-col items-center justify-start gap-0 md:gap-12 flex-initial",children:[(0,t.jsx)(w.default,{active:E||!!N||!!o.query.teamSlug||!o.query.gitOrgLimit,as:f.animated.article,className:"configure-project-card bg-background-100",ref:(0,m.default)([R,G]),style:{willChange:"height",overflow:"hidden",...null!==N&&{...A}},title:"New Project",titleSuffix:M,children:(0,t.jsx)(tP,{frameworks:a,canCreateProject:s})}),N||C?(0,t.jsx)(b.default,{active:!!(N||C),deploymentId:S,flow:"import",resetDeploying:N?function(){T({type:"SET_DEPLOYING",deploying:!1}),T({type:"SET_DEPLOYMENT_RESET",deploymentReset:!0})}:void 0,flowId:I}):(0,t.jsx)(tD.DeploymentPlaceholderCard,{}),(0,t.jsx)(tA.ImportFooter,{})]})}var t$=e.i(1459027),tF=e.i(8228513),tW=e.i(5746939);function tU(e){let{frameworks:l}=e,{isLoading:m,user:p}=(0,r.useUser)(),[f,h]=(0,u.useProjectImportReducer)(),{team:v,isReady:x}=(0,n.useTeam)(),{can:y,isLoading:j}=(0,o.default)(),_=(0,g.useRepoQuery)(),w=(0,s.useRouter)();(0,i.useEffect)(()=>{_||w.push("/new")},[_,w]);let b=y(d.Action.Create,d.Resource.Project),E=!x||j||m,N=(0,i.useMemo)(()=>({...f,dispatch:h}),[h,f]),C=(0,i.useRef)(!1);return(0,i.useEffect)(()=>{!f.deploymentId||C.current||(C.current=!0,a.default.get("visitor-id")&&(0,c.postToStatsigClient)({events:[{eventName:"project_created"}]}))},[f.deploymentId,v?.billing?.plan,v?.id,p?.uid]),(0,t.jsxs)(u.ProjectImportContext.Provider,{value:N,children:[(0,t.jsx)(t$.TrackStatsigPageView,{name:"new_import"}),(0,t.jsx)(tB,{frameworks:l,hasAccess:!E&&!(E||!b)})]})}function tB(e){let{hasAccess:i,frameworks:a=[]}=e;return(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:(0,l.clsx)(tF.default.importPageAdjustment,tW.default.newMain),children:(0,t.jsx)("div",{className:(0,l.clsx)("flex flex-col lg:flex-row items-stretch justify-start gap-9 lg:gap-[72px] flex-initial geist-wrapper",tW.default.newMainContentWrapper),children:(0,t.jsx)("div",{className:tW.default.mainContent,children:(0,t.jsx)(tV,{frameworks:a,hasAccess:!!i})})})})})}e.s(["ImportFlow",()=>tU,"StaticImportFlowPage",()=>tB],5187772)}]);

//# debugId=26f3abff-c3a4-7195-61da-0b86da3562ab
//# sourceMappingURL=1f4436602d801795.js.map